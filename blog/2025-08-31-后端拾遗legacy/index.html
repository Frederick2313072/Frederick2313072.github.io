<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
    
    
      <link href="../../css/fonts.css" rel="stylesheet" type="text/css">
    
  

  
  <title>åç«¯æ‹¾é—Legacy</title>

  
  
  <link rel="stylesheet" href="../../css/hugo-octopress.css">

  
  

  
    <link rel="stylesheet" href="../../css/fork-awesome.min.css">
  

  
  
    <link href="https://Frederick2313072.github.io/favicon.png" rel="icon">
  

  
  

  <meta name="description" content="æš‘å‡æ‘¸é±¼çœ‹é¡¹ç›®çš„æ—¶å€™é¡ºä¾¿ç¿»äº†ç¿»æŸäº›å®˜æ–¹æ–‡æ¡£" />
  <meta name="keywords" content="">
  <meta name="author" content="Frederick">

  
  <meta name="generator" content="Hugo 0.152.2">

  
  

  
  



</head>
<body>


<header role="banner">
<hgroup>
  
  <h1><a href="https://Frederick2313072.github.io/">Frederick</a></h1>
    <h2>Welcome to my Alter Ego&#39;s site!</h2>
</hgroup></header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigateâ€¦</option>
      
        <option value="https://Frederick2313072.github.io/about/">Â» About</option>
      
        <option value="https://Frederick2313072.github.io/links/">Â» Links</option>
      
        <option value="https://Frederick2313072.github.io/archives/">Â» Archives</option>
      
  </select>
</fieldset>


<ul class="main-navigation">
  
  
    
      <li><a href="https://Frederick2313072.github.io/about/" title="About"  target="_blank"  rel="noopener noreferrer">About</a></li>
    
  
    
      <li><a href="https://Frederick2313072.github.io/links/" title="Links"  target="_blank"  rel="noopener noreferrer">Links</a></li>
    
  
    
      <li><a href="https://Frederick2313072.github.io/archives/" title="Archives"  target="_blank"  rel="noopener noreferrer">Archives</a></li>
    
  
</ul>

<ul class="subscription">
  
    
        <a href="https://Frederick2313072.github.io/index.xml" target="_blank" type="application/rss+xml" title="RSS" rel="noopener noreferrer"><i class="fa fa-rss-square fa-lg"></i></a>
    
  
</ul>


</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
  <p class="meta">Aug 31, 2025
     - 10 minute read 
     - <a href="https://Frederick2313072.github.io/blog/2025-08-31-%E5%90%8E%E7%AB%AF%E6%8B%BE%E9%81%97legacy/#disqus_thread">Comments</a>

    
  </p>
  <h1 class="entry-title">
     åç«¯æ‹¾é—Legacy 
  </h1>
</header>


        <div class="entry-content">
          
          
          
          <h3 id="æœåŠ¡ç«¯webæ¡†æ¶">æœåŠ¡ç«¯webæ¡†æ¶</h3>
<p>ç›´æ¥å¤„ç†httpè¯·æ±‚å’Œå“åº”</p>
<p>å°†è¯·æ±‚è·¯ç”±åˆ°ç›¸å…³çš„handlerä¸­</p>
<p>ä½¿ä»è¯·æ±‚ä¸­è·å¾—æ•°æ®å˜å¾—ç®€å•</p>
<p>æŠ½è±¡æ•°æ®åº“æ¥å£</p>
<h3 id="ç±»å‹æç¤º">ç±»å‹æç¤º</h3>
<pre tabindex="0"><code>first_name: str, last_name: str
Dict[str, float]//ç¬¬ä¸€ä¸ªæ˜¯æ‰€æœ‰é”®ç±»å‹ï¼Œç¬¬äºŒä¸ªæ˜¯æ‰€æœ‰å€¼ç±»å‹
</code></pre><h3 id="pydanticæ¨¡å‹">Pydanticæ¨¡å‹</h3>
<ul>
<li>ä¸‰ç§åºåˆ—åŒ–</li>
</ul>
<p>dictï¼Œjsonableï¼ŒJSONå­—ç¬¦ä¸²</p>
<p>ç¬¦åˆjson schema</p>
<pre tabindex="0"><code>Meeting.model_json_schema()
</code></pre><p>æ•°æ®æ ¡éªŒ</p>
<p>å°†æ•°æ®çš„ç»“æ„å£°æ˜ä¸ºå…·æœ‰å±æ€§çš„ç±»</p>
<pre tabindex="0"><code>from pydantic import BaseModel
class User(BaseModel):
    id:int
    name:str=&#34;John&#34;
    signup_ts: datetime | None = None
external_data={
    &#34;id&#34;:&#34;123&#34;,
    &#34;signup_ts&#34;:&#34;2017-06-01&#34;,
}
user = User(external_data)
</code></pre><h3 id="å¹¶å‘asyncawait">å¹¶å‘async/await</h3>
<p>å¸¸è§çš„å¼‚æ­¥ä»»åŠ¡ï¼ˆi/oå¯†é›†å‹ï¼‰</p>
<ul>
<li>é€šè¿‡ç½‘ç»œå‘é€æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®</li>
<li>å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªç½‘ç»œä¸­çš„æ•°æ®</li>
<li>ç£ç›˜ä¸­è¦ç”±ç³»ç»Ÿè¯»å–å¹¶æä¾›ç»™ç¨‹åºçš„æ–‡ä»¶çš„å†…å®¹</li>
<li>ç¨‹åºæä¾›ç»™ç³»ç»Ÿçš„è¦å†™å…¥ç£ç›˜çš„å†…å®¹</li>
<li>ä¸€ä¸ª API çš„è¿œç¨‹è°ƒç”¨</li>
<li>ä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œç›´åˆ°å®Œæˆ</li>
<li>ä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢ï¼Œç›´åˆ°è¿”å›ç»“æœ</li>
<li>ç­‰ç­‰.</li>
</ul>
<p>CPUå¯†é›†å‹</p>
<ul>
<li><strong>éŸ³é¢‘</strong>æˆ–<strong>å›¾åƒ</strong>å¤„ç†ï¼›</li>
<li><strong>è®¡ç®—æœºè§†è§‰</strong>: ä¸€å¹…å›¾åƒç”±æ•°ç™¾ä¸‡åƒç´ ç»„æˆï¼Œæ¯ä¸ªåƒç´ æœ‰3ç§é¢œè‰²å€¼ï¼Œå¤„ç†é€šå¸¸éœ€è¦åŒæ—¶å¯¹è¿™äº›åƒç´ è¿›è¡Œè®¡ç®—ï¼›</li>
<li><strong>æœºå™¨å­¦ä¹ </strong>: å®ƒé€šå¸¸éœ€è¦å¤§é‡çš„&quot;çŸ©é˜µ&quot;å’Œ&quot;å‘é‡&quot;ä¹˜æ³•ã€‚æƒ³è±¡ä¸€ä¸ªåŒ…å«æ•°å­—çš„å·¨å¤§ç”µå­è¡¨æ ¼ï¼Œå¹¶åŒæ—¶å°†æ‰€æœ‰æ•°å­—ç›¸ä¹˜ï¼›</li>
<li><strong>æ·±åº¦å­¦ä¹ </strong>: è¿™æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªå­é¢†åŸŸï¼ŒåŒæ ·é€‚ç”¨ã€‚åªæ˜¯æ²¡æœ‰ä¸€ä¸ªæ•°å­—çš„ç”µå­è¡¨æ ¼å¯ä»¥ç›¸ä¹˜ï¼Œè€Œæ˜¯ä¸€ä¸ªåºå¤§çš„æ•°å­—é›†åˆï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å¤„ç†å™¨æ¥æ„å»ºå’Œä½¿ç”¨è¿™äº›æ¨¡å‹ã€‚</li>
</ul>
<p>ç¤ºä¾‹</p>
<pre tabindex="0"><code>@app.get(&#39;/burgers&#39;)
async def read_burgers():
    burgers = await get_burgers(2)
    return burgers
</code></pre><p><code>async</code> å’Œ <code>await</code> çš„å¼‚æ­¥ä»£ç çš„æ‰€æœ‰åŠŸèƒ½å¤§å¤šæ•°è¢«æ¦‚æ‹¬ä¸º&quot;åç¨‹&quot;</p>
<ul>
<li>å¯¼å…¥ <code>FastAPI</code>ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ª <code>app</code> å®ä¾‹ã€‚</li>
<li>ç¼–å†™ä¸€ä¸ª<strong>è·¯å¾„æ“ä½œè£…é¥°å™¨</strong>ï¼Œå¦‚ <code>@app.get(&quot;/&quot;)</code>ã€‚</li>
<li>å®šä¹‰ä¸€ä¸ª<strong>è·¯å¾„æ“ä½œå‡½æ•°</strong>ï¼Œå¦‚ <code>def root(): ...</code>ã€‚</li>
</ul>
<pre tabindex="0"><code>from fastapi import FastAPI
app=FastAPI()
@app.get(&#34;/&#34;)
async def root():
return {&#34;message&#34;:&#34;hello,fastapi&#34;}
</code></pre><h3 id="ä½¿ç”¨pydanticæ¨¡å‹çš„æŸ¥è¯¢å‚æ•°">ä½¿ç”¨pydanticæ¨¡å‹çš„æŸ¥è¯¢å‚æ•°</h3>
<pre tabindex="0"><code>from typing import Annotated, Literal

from fastapi import FastAPI, Query
from pydantic import BaseModel, Field

app = FastAPI()


class FilterParams(BaseModel):
    limit: int = Field(100, gt=0, le=100)
    offset: int = Field(0, ge=0)
    order_by: Literal[&#34;created_at&#34;, &#34;updated_at&#34;] = &#34;created_at&#34;
    tags: list[str] = []


@app.get(&#34;/items/&#34;)
async def read_items(filter_query: Annotated[FilterParams, Query()]):
    return filter_query
</code></pre><p><code>Annotated[..., Body()]</code> çš„ä½œç”¨æ˜¯<strong>æ˜¾å¼å£°æ˜</strong>è¿™ä¸ª&hellip;å‚æ•°å¿…é¡»ä»è¯·æ±‚ä½“ä¸­è·å–</p>
<p><code>Annotated</code>: ä» <code>typing</code> æ¨¡å—å¯¼å…¥ï¼Œå®ƒæ˜¯ä¸€ç§é«˜çº§ç±»å‹æç¤ºï¼Œå…è®¸æˆ‘ä»¬ä¸ºç±»å‹é™„åŠ é¢å¤–çš„å…ƒæ•°æ®ã€‚</p>
<p>å¦‚æœå‚æ•°æ²¡æœ‰å‡ºç°åœ¨è·¯å¾„ä¸­ï¼Œfastapiå°†å®ƒè¯†åˆ«æˆqueryï¼Œæ¯”å¦‚</p>
<pre tabindex="0"><code>from fastapi import FastAPI

app = FastAPI()

# æ¨¡æ‹Ÿä¸€ä¸ªå•†å“åˆ—è¡¨
fake_items_db = [{&#34;item_name&#34;: &#34;Apple&#34;}, {&#34;item_name&#34;: &#34;Banana&#34;}, {&#34;item_name&#34;: &#34;Cherry&#34;}]

# skip å’Œ limit å°±æ˜¯æŸ¥è¯¢å‚æ•°
@app.get(&#34;/items/&#34;)
async def read_items(skip: int = 0, limit: int = 10):
    # skip å’Œ limit æœ‰é»˜è®¤å€¼ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å¯é€‰çš„
    return fake_items_db[skip : skip + limit]
</code></pre><h3 id="cookieå‚æ•°æ¨¡å‹">cookieå‚æ•°æ¨¡å‹</h3>
<pre tabindex="0"><code>from fastapi import Cookie,FastAPI
from pydantic import BaseModel
app=FastAPI()
class Cookies(BaseModel):
    model_config={&#34;extra&#34;:&#34;forbid&#34;}//ç¦æ­¢é¢å¤–çš„cookie
    session_id:str
    fatebook_tracker:str|None=None
    googall_tracker:str|None=None
@app.get(&#34;/items/&#34;)
async def read_items(cookies:Annotated[Cookies,Cookie()]):
return cookies
</code></pre><p>ä»æä¾›çš„cookieä¸­æå–å­—æ®µï¼Œä¼ ç»™Cookiesè¿™ä¸ªbase modelæ¨¡å‹</p>
<h3 id="headerå‚æ•°æ¨¡å‹">headerå‚æ•°æ¨¡å‹</h3>
<pre tabindex="0"><code>from typing import Annotated

from fastapi import FastAPI, Header
from pydantic import BaseModel

app = FastAPI()


class CommonHeaders(BaseModel):
    host: str
    save_data: bool
    if_modified_since: str | None = None
    traceparent: str | None = None
    x_tag: list[str] = []


@app.get(&#34;/items/&#34;)
async def read_items(headers: Annotated[CommonHeaders, Header()]):
    return headers
</code></pre><h3 id="å“åº”æ¨¡å‹">å“åº”æ¨¡å‹</h3>
<p>ä¸€ä¸ªæœ‰æ˜æ–‡å¯†ç çš„è¾“å…¥æ¨¡å‹å’Œä¸€ä¸ªæ²¡æœ‰æ˜æ–‡å¯†ç çš„è¾“å‡ºæ¨¡å‹</p>
<pre tabindex="0"><code>from typing import Any

from fastapi import FastAPI
from pydantic import BaseModel, EmailStr

app = FastAPI()


class UserIn(BaseModel):
    username: str
    password: str
    email: EmailStr
    full_name: str | None = None


class UserOut(BaseModel):
    username: str
    //æ³¨æ„è¿™é‡Œæ²¡æœ‰password
    email: EmailStr
    full_name: str | None = None


@app.post(&#34;/user/&#34;, response_model=UserOut)
async def create_user(user: UserIn) -&gt; Any:
    return user
</code></pre><p>ä¸ä¼šåŒ…å«é»˜è®¤å€¼</p>
<pre tabindex="0"><code>@app.get(&#34;/items/{item_id}&#34;, response_model=Item, response_model_exclude_unset=True)
async def read_item(item_id: str):
    return items[item_id]
</code></pre><h3 id="åç«¯çš„pydanticæ¨¡å‹">åç«¯çš„Pydanticæ¨¡å‹</h3>
<pre tabindex="0"><code>class FormData(BaseModel):
    username:str
    password:str
@app.post(&#34;/login/&#34;)
async def login(data:Annotated[FormData,Form()])://å¦‚æœå‘ç°æ˜¯FormDataæ•°æ®ç±»å‹,ä¼šæå–ä½¿ç”¨åé¢çš„å…ƒæ•°æ®
    return data
</code></pre><h3 id="è¯·æ±‚æ–‡ä»¶">è¯·æ±‚æ–‡ä»¶</h3>
<pre tabindex="0"><code>@app.post(&#34;/files/&#34;)
async def create_file(file:bytes=File()):
    return {&#34;file_size&#34;:len(file)}
@app.post(&#34;/uploadfile/&#34;)
async def create_upload_file(file: UploadFile):
    return {&#34;filename&#34;: file.filename}
</code></pre><p>è¯»å–æ–‡ä»¶å†…å®¹</p>
<pre tabindex="0"><code>contents=await myfile.read()
</code></pre><p>å¤šæ–‡ä»¶ä¸Šä¼ </p>
<pre tabindex="0"><code>async def create_files(files: list[bytes] = File()):
</code></pre><pre tabindex="0"><code>async def create_upload_files(files: list[UploadFile]):
</code></pre><h3 id="è·¯å¾„æ“ä½œé…ç½®">è·¯å¾„æ“ä½œé…ç½®</h3>
<p>æ”¯æŒsummaryå’Œdescriptionä¸¤ä¸ªå‚æ•°</p>
<pre tabindex="0"><code>@app.post(&#34;/iems/&#34;,response_model=Item,summary=&#34;Create an Item&#34;,description=&#34;create an item&#34;)
</code></pre><p>deprecatedå‚æ•°å¯ä»¥æŠŠè·¯å¾„æ“ä½œæ ‡è®°ä¸ºå¼ƒç”¨ï¼Œæ— éœ€ç›´æ¥åˆ é™¤</p>
<pre tabindex="0"><code>@app.get(&#34;/elements/&#34;,tags=[&#34;items&#34;],deprecated=True)
</code></pre><h3 id="jsonå…¼å®¹ç¼–ç å™¨">JSONå…¼å®¹ç¼–ç å™¨</h3>
<pre tabindex="0"><code>@app.put(&#34;/itmes/{id})

def update_item(id:str,itme:Item):
   Json_compatible_item_data=jsonable_encoder(item)

   Fake_db[id]=json_compatible_item_data
</code></pre><p>å°†pydanticæ¨¡å‹è½¬æ¢ä¸ºdicï¼Œå¹¶å°†datetimeè½¬æ¢ä¸ºstr</p>
<h3 id="ç±»ä½œä¸ºä¾èµ–é¡¹">ç±»ä½œä¸ºä¾èµ–é¡¹</h3>
<pre tabindex="0"><code>commons: CommonQueryParams = Depends(CommonQueryParams)
</code></pre><p>ç®€æ´å†™æ³•</p>
<pre tabindex="0"><code>async def read_items(commons: CommonQueryParams = Depends()):
</code></pre><h3 id="è·¯å¾„æ“ä½œè§£é‡Šå™¨ä½œä¸ºä¾èµ–é¡¹å…¨å±€">è·¯å¾„æ“ä½œè§£é‡Šå™¨ä½œä¸ºä¾èµ–é¡¹ï¼ˆå…¨å±€ï¼‰</h3>
<pre tabindex="0"><code>app = FastAPI(dependencies=[Depends(verify_token), Depends(verify_key)])
</code></pre><h3 id="ä½¿ç”¨yieldçš„ä¾èµ–é¡¹">ä½¿ç”¨yieldçš„ä¾èµ–é¡¹</h3>
<p>æ•°æ®åº“ä¾èµ–</p>
<pre tabindex="0"><code>async def get_db():
    db=DBSession()
    try:
        yield db
    finally:
        db.close()
</code></pre><p>yieldå’ŒreturnåŒºåˆ«ï¼šyieldä¼šæš‚åœä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œï¼Œå¹¶äº§å‡ºä¸€ä¸ªå€¼ï¼Œå‡½æ•°ä¼šè®°ä½æš‚åœçš„ä½ç½®ï¼Œä¸‹æ¬¡å–å€¼æ—¶ï¼Œå®ƒä¼šä»ä¸Šæ¬¡æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Œreturnä¼šå½»åº•ç»ˆæ­¢ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªå€¼</p>
<p>åœ¨åŒ…å«yieldå’Œexceptçš„ä¾èµ–é¡¹ä¸­ä¸€å®šè¦raise</p>
<pre tabindex="0"><code>def get_username():
    try:
        yield &#34;Rick&#34;
    except InternalError:
        print(&#34;We don&#39;t swallow the internal error here, we raise again ğŸ˜&#34;)
        raise
</code></pre><h3 id="ä¸Šä¸‹æ–‡ç®¡ç†å™¨">ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<p>withè¯­å¥ä¸­ä½¿ç”¨çš„ä»»ä½•pythonå¯¹è±¡</p>
<pre tabindex="0"><code>with open(&#34;./somefile.txt&#34;) as f:
    contents = f.read()
    print(contents)
</code></pre><p>openapiçš„å®‰å…¨æ–¹æ¡ˆ</p>
<ul>
<li>apikeyï¼ŒæŸ¥è¯¢å‚æ•°ï¼Œè¯·æ±‚å¤´ï¼Œcookie</li>
<li>httpï¼Œæ ‡å‡†çš„httpèº«ä»½è®¤è¯</li>
<li>oauth2</li>
<li>openid connectæä¾›äº†ä¸€ç§å®šä¹‰å¦‚ä½•è‡ªåŠ¨å‘ç°oauth2èº«ä»½è®¤è¯æ•°æ®çš„æ–¹æ³•</li>
</ul>
<p>fastapiå¦‚ä½•å¤„ç†apiä¸èº«ä»½éªŒè¯ï¼Ÿ</p>
<ul>
<li>ç”¨æˆ·åœ¨å‰ç«¯è¾“å…¥ <code>username</code> ä¸<code>password</code>ï¼Œå¹¶ç‚¹å‡»<strong>å›è½¦</strong></li>
<li>ï¼ˆç”¨æˆ·æµè§ˆå™¨ä¸­è¿è¡Œçš„ï¼‰å‰ç«¯æŠŠ <code>username</code> ä¸<code>password</code> å‘é€è‡³ API ä¸­æŒ‡å®šçš„ URLï¼ˆä½¿ç”¨ <code>tokenUrl=&quot;token&quot;</code> å£°æ˜ï¼‰</li>
<li>API æ£€æŸ¥ <code>username</code> ä¸<code>password</code>ï¼Œå¹¶ç”¨ä»¤ç‰Œï¼ˆ<code>Token</code>ï¼‰ å“åº”ï¼ˆæš‚æœªå®ç°æ­¤åŠŸèƒ½ï¼‰ï¼š</li>
<li>ä»¤ç‰Œåªæ˜¯ç”¨äºéªŒè¯ç”¨æˆ·çš„å­—ç¬¦ä¸²</li>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œä»¤ç‰Œä¼šåœ¨ä¸€æ®µæ—¶é—´åè¿‡æœŸ
<ul>
<li>è¿‡æ—¶åï¼Œç”¨æˆ·è¦å†æ¬¡ç™»å½•</li>
<li>è¿™æ ·ä¸€æ¥ï¼Œå°±ç®—ä»¤ç‰Œè¢«äººçªƒå–ï¼Œé£é™©ä¹Ÿè¾ƒä½ã€‚å› ä¸ºå®ƒä¸æ°¸ä¹…å¯†é’¥ä¸åŒï¼Œ<strong>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹</strong>ä¸ä¼šé•¿æœŸæœ‰æ•ˆ</li>
</ul>
</li>
<li>å‰ç«¯ä¸´æ—¶å°†ä»¤ç‰Œå­˜å‚¨åœ¨æŸä¸ªä½ç½®</li>
<li>ç”¨æˆ·ç‚¹å‡»å‰ç«¯ï¼Œå‰å¾€å‰ç«¯åº”ç”¨çš„å…¶å®ƒéƒ¨ä»¶</li>
<li>å‰ç«¯éœ€è¦ä» API ä¸­æå–æ›´å¤šæ•°æ®ï¼š
<ul>
<li>ä¸ºæŒ‡å®šçš„ç«¯ç‚¹ï¼ˆEndpointï¼‰è¿›è¡Œèº«ä»½éªŒè¯</li>
<li>å› æ­¤ï¼Œç”¨ API éªŒè¯èº«ä»½æ—¶ï¼Œè¦å‘é€å€¼ä¸º <code>Bearer</code> + ä»¤ç‰Œçš„è¯·æ±‚å¤´ <code>Authorization</code></li>
<li>å‡å¦‚ä»¤ç‰Œä¸º <code>foobar</code>ï¼Œ<code>Authorization</code> è¯·æ±‚å¤´å°±æ˜¯ï¼š <code>Bearer foobar</code></li>
</ul>
</li>
</ul>
<pre tabindex="0"><code>oauth2_scheme = OAuth2PasswordBearer(tokenUrl=&#34;token&#34;)
</code></pre><h3 id="è·å–å½“å‰ç”¨æˆ·">è·å–å½“å‰ç”¨æˆ·</h3>
<p>åˆ›å»ºç”¨æˆ·æ¨¡å‹</p>
<pre tabindex="0"><code>from pydantic import BaseModel

class User(BaseModel):
    username: str
    email: Union[str, None] = None
    full_name: Union[str, None] = None
    disabled: Union[bool, None] = None
</code></pre><p>åˆ›å»ºä¾èµ–é¡¹</p>
<pre tabindex="0"><code>async def get_current_user(token:str=Depends(oauth2_schema))
    user=fake_decode_token(token)
    return user
</code></pre><pre tabindex="0"><code>def fake_decode_token(token):
    return User(username=token+&#34;fakedecoded&#34;,email=&#34;john@example.com&#34;)
</code></pre><p>æ³¨å…¥å½“å‰ç”¨æˆ·</p>
<pre tabindex="0"><code>@app.get(&#34;/users/me&#34;)
async def read_users_me(current_user: User = Depends(get_current_user)):
    return current_user
</code></pre><p>è£…é¥°å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç›®çš„æ˜¯åœ¨ä¸ä¿®æ”¹åŸå‡½æ•°ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºåŸå‡½æ•°å¢åŠ é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<h3 id="ä¸­é—´ä»¶">ä¸­é—´ä»¶</h3>
<p>åˆ›å»ºä¸­é—´ä»¶é¡¶éƒ¨ä½¿ç”¨@app.middleware(&ldquo;http&rdquo;)</p>
<pre tabindex="0"><code>@app.middleware(&#34;http&#34;)//è¯·å°†ä»¥ä¸‹å‡½æ•°å®šä¹‰ä¸ºå¤„ç†httpè¯·æ±‚çš„ä¸­é—´ä»¶
async def add_process_time_header(request: Request, call_next):
    start_time = time.perf_counter()
    response = await call_next(request)
    process_time = time.perf_counter() - start_time
    response.headers[&#34;X-Process-Time&#34;] = str(process_time)
    return response
</code></pre><h3 id="corsè·¨åŸŸèµ„æºå…±äº«">corsè·¨åŸŸèµ„æºå…±äº«</h3>
<p>ä½¿ç”¨ CORSMiddleware</p>
<pre tabindex="0"><code>from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI()

origins = [
    &#34;http://localhost.tiangolo.com&#34;,
    &#34;https://localhost.tiangolo.com&#34;,
    &#34;http://localhost&#34;,
    &#34;http://localhost:8080&#34;,
]

app.add_middleware(
    CORSMiddleware,
    allow_origins=origins,
    allow_credentials=True,
    allow_methods=[&#34;*&#34;],
    allow_headers=[&#34;*&#34;],
)


@app.get(&#34;/&#34;)
async def main():
    return {&#34;message&#34;: &#34;Hello World&#34;}
</code></pre><p>allow_credentials - è·¨åŸŸè¯·æ±‚æ”¯æŒcooiesï¼Œé»˜è®¤æ˜¯cookies</p>
<h3 id="å¤šæ–‡ä»¶åä½œ">å¤šæ–‡ä»¶åä½œ</h3>
<p>æœ‰å‡ ä¸ª__init__.pyæ–‡ä»¶ï¼Œè¿™æ˜¯ä»£ç èƒ½ä»ä¸€ä¸ªæ–‡ä»¶å¯¼å…¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶çš„åŸå› </p>
<p>å¯¼å…¥APIRouter</p>
<pre tabindex="0"><code>from fastapi import APIRouter
router=APIRouter()
</code></pre><p>åœ¨main.pyä¸­å¯¼å…¥è·¯å¾„</p>
<pre tabindex="0"><code>from fastapi import Depends, FastAPI

from .dependencies import get_query_token, get_token_header
from .internal import admin
from .routers import items, users

app = FastAPI(dependencies=[Depends(get_query_token)])


app.include_router(users.router)
app.include_router(items.router)
app.include_router(
    admin.router,
    prefix=&#34;/admin&#34;,
    tags=[&#34;admin&#34;],
    dependencies=[Depends(get_token_header)],
    responses={418: {&#34;description&#34;: &#34;I&#39;m a teapot&#34;}},
)


@app.get(&#34;/&#34;)
async def root():
    return {&#34;message&#34;: &#34;Hello Bigger Applications!&#34;}
</code></pre><h3 id="åå°ä»»åŠ¡">åå°ä»»åŠ¡</h3>
<p>ä½¿ç”¨BackgroundTasks</p>
<pre tabindex="0"><code>@app.post(&#34;/send-notification/{email}&#34;)
async def send_notifaction(email:str,background_tasks:BackgroundTaks):
    background_tasks.add_task(write_notification,email,messages=&#34;some notification&#34;)
    return {&#34;message&#34;: &#34;Notification sent in the background&#34;}
</code></pre><p>fastapiä¼šåˆ›å»ºä¸€ä¸ªbackgroundtasksç±»å‹çš„å¯¹è±¡å¹¶ä½œä¸ºå‚æ•°ä¼ å…¥</p>
<p>åˆ›å»ºä¸€ä¸ªä»»åŠ¡å‡½æ•°</p>
<pre tabindex="0"><code>from fastapi import BackgroundTasks,FastAPI
app=FastAPI()
def write_notifacation(email:str,message=&#34;&#34;):
    with open(&#34;log.txt&#34;,mode=&#34;w&#34;) as email_file:
    content = f&#34;notifaction for {email}:{message}&#34;
    email_file.write(content)
</code></pre><p>è®¾ç½®swagger uiæœåŠ¡äº/documentationå¹¶ä¸”ç¦ç”¨redoc</p>
<pre tabindex="0"><code>app = FastAPI(docs_url=&#34;/documentation&#34;, redoc_url=None)
</code></pre><h3 id="é™æ€æ–‡ä»¶">é™æ€æ–‡ä»¶</h3>
<p>å¯¼å…¥staticfilesï¼Œæåœ¨ä¸€ä¸ªstaticfiles()å®ä¾‹åˆ°ä¸€ä¸ªæŒ‡å®šè·¯å¾„</p>
<pre tabindex="0"><code>from fastapi import FastAPI
from fastapi.staticfile import StaticFiles
app=FastAPI()
app.mount(&#34;/static&#34;,StaticFile(directory=&#34;static&#34;),name=&#34;static&#34;)
</code></pre><p>ä»»ä½•ä»¥&quot;/static&quot;å¼€å¤´çš„è·¯å¾„éƒ½ä¼šè¢«ç¬¬ä¸€ä¸ªâ€œ/staticâ€œæŒ‡å‘çš„å­è·¯å¾„å¤„ç†</p>
<h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<p>å¯¼å…¥tetsclient</p>
<pre tabindex="0"><code>from fastapi import FastAPI
from fastapi.testclient import TestClient

app = FastAPI() //åˆ›å»ºä¸€ä¸ªtestclient


@app.get(&#34;/&#34;)
async def read_main():
    return {&#34;msg&#34;: &#34;Hello World&#34;}


client = TestClient(app)


def test_read_main()://åˆ›å»ºåå­—ä»¥test_å¼€å¤´çš„å‡½æ•°ï¼Œè¿™æ˜¯æ ‡å‡†çš„pytestçº¦å®š
    response = client.get(&#34;/&#34;)
    assert response.status_code == 200
    assert response.json() == {&#34;msg&#34;: &#34;Hello World&#34;}
</code></pre><p>å†™assertè¯­å¥</p>
<p>æµ‹è¯•æ–‡ä»¶ç»“æ„</p>
<pre tabindex="0"><code>.
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ main.py
â”‚Â Â  â””â”€â”€ test_main.py
</code></pre><h3 id="celery">celery</h3>
<p>åˆ›å»ºä»»åŠ¡Celery()</p>
<pre tabindex="0"><code>from celery import Celery
app=Celery(&#39;tasks&#39;,broker=&#39;redis://localhost:6379/0&#39;)
@app.task
def add(x,y):
    return x+y
</code></pre><p>è°ƒåº¦ä»»åŠ¡dely()</p>
<pre tabindex="0"><code>from tasks import add
add.delay(4,4)
</code></pre><p>ä¿ç•™ç»“æœ</p>
<pre tabindex="0"><code>app = Celery(&#39;tasks&#39;, backend=&#39;rpc://&#39;, broker=&#39;pyamqp://&#39;)
</code></pre><p>è¿”å›ä»»åŠ¡æ˜¯å¦å·²å®Œæˆå¤„ç†ï¼ˆlogï¼Ÿï¼‰</p>
<pre tabindex="0"><code>result.ready()
</code></pre><p>åç«¯ä½¿ç”¨èµ„æºæ¥å­˜å‚¨å’Œä¼ è¾“ç»“æœï¼Œç¡®ä¿èµ„æºè¢«é‡Šæ”¾æ—¶ï¼Œå¿…é¡»è°ƒç”¨get()æˆ–forget()è°ƒç”¨ä»»åŠ¡è¿”å›çš„æ¯ä¸ªasyncresultå®ä¾‹</p>
<p>é…ç½®</p>
<pre tabindex="0"><code>app.conf.update(
    task_serializer=&#39;json&#39;,
    accept_content=[&#39;json&#39;],  # Ignore other content
    result_serializer=&#39;json&#39;,
    timezone=&#39;Europe/Oslo&#39;,
    enable_utc=True,
)
</code></pre><p>é€šè¿‡è°ƒç”¨config_from_object()å‘Šè¯‰celeryå®ä¾‹ä½¿ç”¨é…ç½®æ¨¡å—</p>
<pre tabindex="0"><code>app.config_from_object(&#39;celeryconfig&#39;)
</code></pre><p>éªŒè¯é…ç½®æ–‡ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œä¸åŒ…å«è¯­æ³•é”™è¯¯ï¼Œå¯¼å…¥</p>
<pre tabindex="0"><code>python -m celeryconfig
</code></pre><p>é¡¹ç›®ç»“æ„</p>
<pre tabindex="0"><code>src/
    proj/__init__.py
        /celery.py
        /tasks.py
</code></pre><p>proj/celery.py</p>
<pre tabindex="0"><code>from celery import Celery

app = Celery(&#39;proj&#39;,
             broker=&#39;amqp://&#39;,
             backend=&#39;rpc://&#39;,
             include=[&#39;proj.tasks&#39;])

# Optional configuration, see the application user guide.
app.conf.update(
    result_expires=3600,
)

if __name__ == &#39;__main__&#39;:
    app.start()
</code></pre><p>Proj/tasks.py</p>
<pre tabindex="0"><code>from .celery import app
@app.task
def add(x, y):
    return x + y
@app.task
def mul(x, y):
    return x * y
@app.task
def xsum(numbers):
    return sum(numbers)
</code></pre><p>åœ¨åå°å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·¥ä½œç¨‹åº</p>
<pre tabindex="0"><code>celery multi start w1 -A proj -l INFO
</code></pre><h3 id="chain">chain</h3>
<pre tabindex="0"><code>chain(add.s(4)|mul.s(8)).get()
</code></pre><p>å¦ä¸€ç§å†™æ³•</p>
<pre tabindex="0"><code>c=chain(add.s(4)|mul.s(8))
c.get()
</code></pre><h3 id="è·¯ç”±">è·¯ç”±</h3>
<p>Task_routeså°†æ‰€æœ‰å†…å®¹é›†ä¸­åœ¨ä¸€ä¸ªä½ç½®</p>
<pre tabindex="0"><code>app.conf.update(task_routes={&#39;prok.tasks.add&#39;:{&#39;queue&#39;:&#39;hipri&#39;}})
</code></pre><h3 id="redis">redis</h3>
<p>redis insightå¯è§†åŒ–</p>
<h3 id="æ–‡æ¡£æ•°æ®åº“">æ–‡æ¡£æ•°æ®åº“</h3>
<p>æ”¯æŒåœ¨jsonå’Œhashæ–‡æ¡£ä¸Šåˆ›å»ºäºŒçº§ç´¢å¼•</p>
<pre tabindex="0"><code>schema = (
    TextField(&#34;$.brand&#34;, as_name=&#34;brand&#34;),
    TextField(&#34;$.model&#34;, as_name=&#34;model&#34;),
    TextField(&#34;$.description&#34;, as_name=&#34;description&#34;),
    NumericField(&#34;$.price&#34;, as_name=&#34;price&#34;),
    TagField(&#34;$.condition&#34;, as_name=&#34;condition&#34;),
)

index = r.ft(&#34;idx:bicycle&#34;)
index.create_index(
    schema,
    definition=IndexDefinition(prefix=[&#34;bicycle:&#34;], index_type=IndexType.JSON),
)
</code></pre><p>ä»»ä½•å¸¦æœ‰é”®å‰ç¼€bicycleï¼šçš„é¢„å…ˆå­˜åœ¨çš„jsonæ–‡æ¡£ä¼šè‡ªåŠ¨æ·»åŠ åˆ°ç´¢å¼•ä¸­</p>
<p>ragä¸è¯´äº†ï¼Œåº”è¯¥æ²¡äººä¼šç”¨redisæ­å»ºrag or embeddingï¼Ÿ</p>
<h3 id="asgi">ASGI</h3>
<p>scopeï¼Œä¸€ä¸ªåŒ…å«è¿æ¥ç»†èŠ‚çš„dicï¼Œsendæ˜¯ä¸€ä¸ªå¼‚æ­¥å¯è°ƒç”¨å¯¹è±¡ï¼Œå…è®¸åº”ç”¨ç¨‹åºå‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶æ¶ˆæ¯</p>
<p>events</p>
<p>ASGIåªéœ€è¦http.requestå’Œhttp.disconnect</p>
<p>å¯¹äºåƒwebsocketï¼Œæ¥å—websocket.connectï¼Œå‘é€web socket.sendï¼Œæ¥å—websocket.receiveï¼Œæœ€åæ¥å—web socket.disconnect</p>
<p>ASGIåº”ç”¨ç¨‹åºåº”è¯¥æ˜¯å•ä¸ªå¼‚æ­¥å¯è°ƒç”¨å¯¹è±¡</p>
<pre tabindex="0"><code>coroutine application(scope,receive,send)
</code></pre><h3 id="unicorn">unicorn</h3>
<p>ä½¿ç”¨&ndash;reloadä½¿ç”¨watchfiles</p>
<p>è¿è¡ŒæœåŠ¡å™¨</p>
<pre tabindex="0"><code>uvicorn main:app
</code></pre><p>æ›´å¥½åœ°æ§åˆ¶é…ç½®å’ŒæœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ç”¨configå’Œserver</p>
<pre tabindex="0"><code>import uvicorn
if __name__ == &#34;__main__&#34;:
    config=uvicorn.Config(&#34;main:app&#34;,port=5000,log_level=&#34;info&#34;)
    server =uvicorn.Server(config)
    server.run()
</code></pre><p>å·¥å‚å‡½æ•°</p>
<p>è°ƒç”¨è€…åªéœ€è¦å‘Šè¯‰å·¥å‚å®ƒæƒ³è¦ä»€ä¹ˆï¼Œè€Œä¸éœ€è¦çŸ¥é“ç±»çš„å­˜åœ¨ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“å¦‚ä½•å»å®ä¾‹åŒ–å®ƒ</p>
<p>uvicornä½¿ç”¨ASGIè§„èŒƒä¸åº”ç”¨ç¨‹åºäº¤äº’</p>
<p>scope-åŒ…å«ä¼ å…¥è¿æ¥çš„ä¿¡æ¯dic</p>
<pre tabindex="0"><code>{
    &#39;type&#39;: &#39;http&#39;,
    &#39;scheme&#39;: &#39;http&#39;,
    &#39;root_path&#39;: &#39;&#39;,
    &#39;server&#39;: (&#39;127.0.0.1&#39;, 8000),
    &#39;http_version&#39;: &#39;1.1&#39;,
    &#39;method&#39;: &#39;GET&#39;,
    &#39;path&#39;: &#39;/&#39;,
    &#39;headers&#39;: [
        (b&#39;host&#39;, b&#39;127.0.0.1:8000&#39;),
        (b&#39;user-agent&#39;, b&#39;curl/7.51.0&#39;),
        (b&#39;accept&#39;, b&#39;*/*&#39;)
    ]
}
</code></pre><p>Receive-æ¥å—æ¥è‡ªæœåŠ¡å™¨çš„ä¼ å…¥æ¶ˆæ¯çš„é€šé“</p>
<p>Send-å°†ä¼ å‡ºæ¶ˆæ¯å‘é€åˆ°æœåŠ¡å™¨çš„é€šé“</p>
<pre tabindex="0"><code>await send({
    &#39;type&#39;: &#39;http.response.start&#39;,
    &#39;status&#39;: 200,
    &#39;headers&#39;: [
        [b&#39;content-type&#39;, b&#39;text/plain&#39;],
    ]
})
await send({
    &#39;type&#39;: &#39;http.response.body&#39;,
    &#39;body&#39;: b&#39;Hello, world!&#39;,
})
</code></pre><p>è¯·æ±‚å’Œå“åº”ç¤ºä¾‹</p>
<pre tabindex="0"><code>async def app(scope, receive, send):
    &#34;&#34;&#34;
    Echo the method and path back in an HTTP response.
    &#34;&#34;&#34;
    assert scope[&#39;type&#39;] == &#39;http&#39;

    body = f&#39;Received {scope[&#34;method&#34;]} request to {scope[&#34;path&#34;]}&#39;
    await send({
        &#39;type&#39;: &#39;http.response.start&#39;,
        &#39;status&#39;: 200,
        &#39;headers&#39;: [
            [b&#39;content-type&#39;, b&#39;text/plain&#39;],
        ]
    }) //å‘é€å“åº”å¤´
    await send({
        &#39;type&#39;: &#39;http.response.body&#39;,
        &#39;body&#39;: body.encode(&#39;utf-8&#39;),
    }) //å‘é€å“åº”ä½“
</code></pre><p>åœ¨ASGIä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„httpå“åº”æ˜¯é€šè¿‡å‘é€ä¸€ç³»åˆ—çš„çš„äº‹ä»¶å®Œæˆçš„</p>
<p>æ¥å—scopeï¼Œå‘é€å“åº”å¤´ï¼Œå‘é€å“åº”ä½“</p>
<p>è¯»å–è¯·æ±‚æ­£æ–‡</p>
<pre tabindex="0"><code>async def read_body(receive):
    &#34;&#34;&#34;
    Read and return the entire body from an incoming ASGI message.
    &#34;&#34;&#34;
    body = b&#39;&#39;
    more_body = True

    while more_body:
        message = await receive()
        body += message.get(&#39;body&#39;, b&#39;&#39;)
        more_body = message.get(&#39;more_body&#39;, False)

    return body


async def app(scope, receive, send):
    &#34;&#34;&#34;
    Echo the request body back in an HTTP response.
    &#34;&#34;&#34;
    body = await read_body(receive)
    await send({
        &#39;type&#39;: &#39;http.response.start&#39;,
        &#39;status&#39;: 200,
        &#39;headers&#39;: [
            (b&#39;content-type&#39;, b&#39;text/plain&#39;),
            (b&#39;content-length&#39;, str(len(body)).encode())
        ]
    })
    await send({
        &#39;type&#39;: &#39;http.response.body&#39;,
        &#39;body&#39;: body,
    })
</code></pre><p>æµå¼å“åº”</p>
<pre tabindex="0"><code>import asyncio


async def app(scope, receive, send):
    &#34;&#34;&#34;
    Send a slowly streaming HTTP response back to the client.
    &#34;&#34;&#34;
    await send({
        &#39;type&#39;: &#39;http.response.start&#39;,
        &#39;status&#39;: 200,
        &#39;headers&#39;: [
            [b&#39;content-type&#39;, b&#39;text/plain&#39;],
        ]
    })
    for chunk in [b&#39;Hello&#39;, b&#39;, &#39;, b&#39;world!&#39;]:
        await send({
            &#39;type&#39;: &#39;http.response.body&#39;,
            &#39;body&#39;: chunk,
            &#39;more_body&#39;: True
        })
        await asyncio.sleep(1)
    await send({
        &#39;type&#39;: &#39;http.response.body&#39;,
        &#39;body&#39;: b&#39;&#39;,
    })
</code></pre><p>å‘é€å“åº”å¤´</p>
<p>åˆ†æ•°æ®å—chunkï¼Œåœ¨æ¯æ¬¡å‘é€å®Œä¸€å—chunkåï¼Œç¨‹åºä¼šå¼‚æ­¥æš‚åœ1ç§’ï¼Œå› ä¸ºæ˜¯awaitï¼ŒæœåŠ¡å™¨çš„äº‹ä»¶å¾ªç¯å¯ä»¥å»å¤„ç†å…¶ä»–è¯·æ±‚ï¼Œä¸ä¼šè¢«é˜»å¡</p>
<p>ç»“æŸå“åº”æµ</p>
<h3 id="django-adminæ¡†æ¶">django-adminæ¡†æ¶</h3>
<ul>
<li>æ–‡ä»¶å¤¹ç»“æ„</li>
</ul>
<pre tabindex="0"><code>locallibrary/
    manage.py
    locallibrary/
        settings.py
        urls.py
        wsgi.py
</code></pre><p>settingsåŒ…æ‹¬æ‰€æœ‰çš„ç½‘ç«™è®¾ç½®,urlså®šä¹‰äº†urlåˆ°viewçš„æ˜ å°„ï¼Œwsgiå¸®åŠ©djangoåº”ç”¨å’Œç½‘ç»œæœåŠ¡å™¨é—´çš„é€šè®¯</p>
<p>åˆ›å»ºåº”ç”¨</p>
<pre tabindex="0"><code>python manager startapp catalog
</code></pre><p>è§†å›¾å‡½æ•°å°±æ˜¯views.pyï¼Œ<em>æ¨¡å‹å°±æ˜¯</em>models.pyï¼Œ<em>æµ‹è¯•æ˜¯</em>tests.pyï¼Œ<em>ç½‘ç«™ç®¡ç†è®¾ç½®æ˜¯</em>admin.pyï¼Œ<em>æ³¨å†Œåº”ç”¨æ˜¯</em>apps.py</p>
<p>Migration/æ–‡ä»¶å¤¹ï¼Œå½“ä¿®æ”¹æ•°æ®æ¨¡å‹æ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šè‡ªåŠ¨å‡çº§æ•°æ®åº“</p>
<p>æ¨¡å‹æ ¹æ®æ•°æ®åº“æ¥åˆ›å»º</p>
<p>æ¯æ¬¡æ¨¡å‹åˆ›å»ºå®Œæˆä»¥åï¼Œè¦é‡æ–°è¿è¡Œæ•°æ®åº“è¿ç§»å°†å®ƒä»¬æ·»åŠ åˆ°æ•°æ®åº“ä¸­</p>
<pre tabindex="0"><code>python3 manage.py makemigrations
python3 manage.py migrate
</code></pre><p>åˆ›å»ºè¶…çº§ç”¨æˆ·</p>
<pre tabindex="0"><code>python manage.py createsuperuser
</code></pre><p>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</p>
<pre tabindex="0"><code>python manage.py runserver
</code></pre><p><img src="https://developer.mozilla.org/zh-CN/docs/Learn_web_development/Extensions/Server-side/Django/Home_page/basic-django.png" alt="img"></p>
<h3 id="node">node</h3>
<p>ä¸€ä¸ªå®Œæ•´çš„åŸºäºnode.jsçš„webåº”ç”¨</p>
<p>éœ€è¦å®ç°ï¼š</p>
<ul>
<li>æˆ‘ä»¬éœ€è¦æä¾›Webé¡µé¢ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ª<em>HTTPæœåŠ¡å™¨</em></li>
<li>å¯¹äºä¸åŒçš„è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚çš„URLï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨éœ€è¦ç»™äºˆä¸åŒçš„å“åº”ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<em>è·¯ç”±</em>ï¼Œç”¨äºæŠŠè¯·æ±‚å¯¹åº”åˆ°è¯·æ±‚å¤„ç†ç¨‹åºï¼ˆrequest handlerï¼‰</li>
<li>å½“è¯·æ±‚è¢«æœåŠ¡å™¨æ¥æ”¶å¹¶é€šè¿‡è·¯ç”±ä¼ é€’ä¹‹åï¼Œéœ€è¦å¯ä»¥å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æœ€ç»ˆçš„<em>è¯·æ±‚å¤„ç†ç¨‹åº</em></li>
<li>è·¯ç”±è¿˜åº”è¯¥èƒ½å¤„ç†POSTæ•°æ®ï¼Œå¹¶ä¸”æŠŠæ•°æ®å°è£…æˆæ›´å‹å¥½çš„æ ¼å¼ä¼ é€’ç»™è¯·æ±‚å¤„ç†å…¥ç¨‹åºï¼Œå› æ­¤éœ€è¦<em>è¯·æ±‚æ•°æ®å¤„ç†åŠŸèƒ½</em></li>
<li>æˆ‘ä»¬ä¸ä»…ä»…è¦å¤„ç†URLå¯¹åº”çš„è¯·æ±‚ï¼Œè¿˜è¦æŠŠå†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸€äº›<em>è§†å›¾é€»è¾‘</em>ä¾›è¯·æ±‚å¤„ç†ç¨‹åºä½¿ç”¨ï¼Œä»¥ä¾¿å°†å†…å®¹å‘é€ç»™ç”¨æˆ·çš„æµè§ˆå™¨</li>
<li>æœ€åï¼Œç”¨æˆ·éœ€è¦ä¸Šä¼ å›¾ç‰‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦<em>ä¸Šä¼ å¤„ç†åŠŸèƒ½</em>æ¥å¤„ç†è¿™æ–¹é¢çš„ç»†èŠ‚</li>
</ul>
<h3 id="å‡½æ•°å›è°ƒ">å‡½æ•°å›è°ƒ</h3>
<p>ä¸€ä¸ªå‡½æ•°ï¼ˆAï¼‰ä½œä¸ºå‚æ•°è¢«ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼ˆBï¼‰ï¼Œç„¶ååœ¨å‡½æ•°ï¼ˆBï¼‰æ‰§è¡Œçš„æŸä¸ªç‰¹å®šæ—¶åˆ»ï¼Œè¿™ä¸ªè¢«ä¼ é€’è¿›æ¥çš„å‡½æ•°ï¼ˆAï¼‰ä¼šè¢«è°ƒç”¨æ‰§è¡Œã€‚</p>
<pre tabindex="0"><code>var http = require(&#34;http&#34;);

function onRequest(request, response) {
  console.log(&#34;Request received.&#34;);
  response.writeHead(200, {&#34;Content-Type&#34;: &#34;text/plain&#34;});
  response.write(&#34;Hello World&#34;);
  response.end();
}

http.createServer(onRequest).listen(8888);

console.log(&#34;Server has started.&#34;);
</code></pre><p><em>onRequest()</em> å‡½æ•°è¢«è§¦å‘çš„æ—¶å€™ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°è¢«ä¼ å…¥ï¼š <em>request</em> å’Œ <em>response</em> ã€‚</p>
<p>å½“æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä½¿ç”¨ <em>response.writeHead()</em> å‡½æ•°å‘é€ä¸€ä¸ªHTTPçŠ¶æ€200å’ŒHTTPå¤´çš„å†…å®¹ç±»å‹ï¼ˆcontent-typeï¼‰ï¼Œä½¿ç”¨ <em>response.write()</em> å‡½æ•°åœ¨HTTPç›¸åº”ä¸»ä½“ä¸­å‘é€æ–‡æœ¬â€œHello World&quot;ã€‚</p>
<p>è°ƒç”¨ <em>response.end()</em> å®Œæˆå“åº”ã€‚</p>

        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">Frederick</span></span>
    
    <time>Aug 31, 2025</time>
    
    </span>
  </p>

  

  <p class="meta">
    
        <a class="basic-alignment left" href="https://Frederick2313072.github.io/blog/2025-06-25-%E5%A4%A7%E4%BA%8C%E4%B8%8B%E5%AD%A6%E6%9C%9F%E6%80%BB%E7%BB%93/" title="å¤§äºŒä¸‹å­¦æœŸæ€»ç»“">å¤§äºŒä¸‹å­¦æœŸæ€»ç»“</a>
    

    
      <a class="basic-alignment right" href="https://Frederick2313072.github.io/blog/2025-09-02-%E9%98%85%E8%AF%BBpaper%E7%9A%84%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/" title="é˜…è¯»paperçš„ä¸€äº›æƒ³æ³•">é˜…è¯»paperçš„ä¸€äº›æƒ³æ³•</a>
    
  </p>
  
    
      <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
  
</footer>


      </article>
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    
      <h1>About me</h1>
    

    <p>
      
        <p>2023å—å¼€DSåœ¨è¯»</p>
<p>ç›®å‰åœ¨TJUNLP</p>
<p>æ„Ÿå…´è¶£çš„æ–¹å‘ï¼šNLP,OS,LLM,Security</p>
<p>æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€ï¼šRust<br>
Click on 
<a href="../../about/">About</a> to know more.</p>

      
    </p>
  </section>

  
  



<ul class="sidebar-nav">
  <li class="sidebar-nav-item">
    <a target="_blank" rel="noopener noreferrer" href="https://github.com/Frederick2313072" title="https://github.com/Frederick2313072"><i class="fa fa-github fa-3x"></i></a>
    
    
    
    
    
    
    
    
    
    
    

  
  
  </li>
</ul>

  

  
    
      <section class="odd">
        
          <h1>Collections</h1>
        
        
          <li>
            <a href="https://Frederick2313072.github.io/categories/golang/" title="Hugo category" >Hugo category</a>
          </li>
        
      </section>
    
  

  
  
  
    
      <section class="even">
        <h1>Recent Posts</h1>
        <ul id="recent_posts">
          
          
            
          
            
              <li class="post">
                <a href="../../blog/2025-12-19-%E6%B2%89%E6%80%9D%E5%BD%95/">æ²‰æ€å½•</a>
              </li>
            
          
            
              <li class="post">
                <a href="../../blog/2025-12-15-0g%E5%AE%98%E6%96%B9docs%E5%90%88%E7%BA%A6%E6%BC%8F%E6%B4%9E/">0gå®˜æ–¹docsåˆçº¦æ¼æ´</a>
              </li>
            
          
            
              <li class="post">
                <a href="../../blog/2025-09-02-%E9%98%85%E8%AF%BBpaper%E7%9A%84%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/">é˜…è¯»paperçš„ä¸€äº›æƒ³æ³•</a>
              </li>
            
          
            
              <li class="post">
                <a href="../../blog/2025-08-31-%E5%90%8E%E7%AB%AF%E6%8B%BE%E9%81%97legacy/">åç«¯æ‹¾é—Legacy</a>
              </li>
            
          
        </ul>
      </section>
    
  
</aside>

  </div>
</div>

    <footer role="contentinfo">
      <p>Copyright &copy; 2025 Frederick - <a href="https://Frederick2313072.github.io/license/">License</a> -
        <span class="credit">Powered by <a target="_blank" href="https://gohugo.io" rel="noopener noreferrer">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/" rel="noopener noreferrer">Hugo-Octopress</a> theme.
      </p>
    </footer>

    
    



    
    
    

    
  </body>
</html>

